{"kind":"Notebook","sha256":"2d8455224d4f8998486186e882dbadf7466faf81a403c1b4838c4decc7bed4a5","slug":"l09-03-shelling-agents","location":"/week09/L09.03_shelling_agents.ipynb","dependencies":[],"frontmatter":{"title":"Schelling Model with Agents.jl","content_includes_title":false,"kernelspec":{"name":"julia-1.10","language":"julia","display_name":"Julia 1.10.4"},"authors":[{"nameParsed":{"literal":"Spencer Lyon","given":"Spencer","family":"Lyon"},"name":"Spencer Lyon","orcid":"0009-0001-6461-885X","email":"spencer.lyon@ucf.edu","affiliations":["University of Central Florida","Valorum Data"],"id":"contributors-myst-generated-uid-0","corresponding":true}],"github":"https://github.com/sglyon/ucf-cap6318-book","affiliations":[{"id":"University of Central Florida","name":"University of Central Florida"},{"id":"Valorum Data","name":"Valorum Data"}],"thumbnail":"https://sglyon.github.io/ucf-cap-6318-book/docs/build/df6a6b05f3de1e22494ef3ccc0e47c9f.png","thumbnailOptimized":"https://sglyon.github.io/ucf-cap-6318-book/docs/build/df6a6b05f3de1e22494ef3ccc0e47c9f.webp","exports":[{"format":"ipynb","filename":"L09.03_shelling_agents.ipynb","url":"https://sglyon.github.io/ucf-cap-6318-book/docs/build/L09.03_shelling_agen-e9eaf3e8dbdf0f708dc61790e1744c28.ipynb"}]},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","data":{"slideshow":{"slide_type":"slide"}},"children":[{"type":"blockquote","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Computational Analysis of Social Complexity","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"iPnXs87T12"}],"key":"w6e91ZoAoA"}],"key":"CkdNknd6Xn"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"strong","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Prerequisites","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"sqlFjWBgI9"}],"key":"AIEiHQoXPm"}],"key":"lYC9z1xSHB"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":9,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Julia Basics","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"j4zoPMuNEN"}],"key":"dJ5HFmsHoF"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Julia Types","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"mQX8zvi4NV"}],"key":"h05YKRL6OF"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"ABM intro","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"kdSRHvveh2"}],"key":"h7Fq0sNv6B"}],"key":"Np3SzESOeN"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"strong","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Outcomes","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"iD42oKrU5Z"}],"key":"S97K0pIWzz"}],"key":"WesOqhw7nc"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":15,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Implement the Schelling segregation model using Agents.jl","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"kINCaMS7Pn"}],"key":"VrlEdjxcbh"}],"key":"yZsPaze9NJ"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"strong","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"References","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"IMZzJSH91W"}],"key":"nzVAB3HJi9"}],"key":"Md3PBd7N7N"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":19,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"link","url":"https://juliadynamics.github.io/Agents.jl/stable/examples/schelling/#Schelling's-segregation-model","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"Agents.jl tutorial","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"oDkU7C4BEi"}],"urlSource":"https://juliadynamics.github.io/Agents.jl/stable/examples/schelling/#Schelling's-segregation-model","key":"xQ281z9gYW"}],"key":"Gj9WiDg6il"},{"type":"listItem","spread":true,"position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"link","url":"https://julia.quantecon.org/multi_agent_models/schelling.html","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"QuantEcon lecture","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"UR8lLUg458"}],"urlSource":"https://julia.quantecon.org/multi_agent_models/schelling.html","key":"kh0QBu6LeF"}],"key":"VM2Nnn3yMn"}],"key":"gmzWKDRmDk"}],"key":"eAKCVFWBKv"},{"type":"block","kind":"notebook-content","data":{"slideshow":{"slide_type":"slide"}},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Review Schelling Model","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"UCjzFh1Cb0"}],"identifier":"review-schelling-model","label":"Review Schelling Model","html_id":"review-schelling-model","implicit":true,"key":"x1Alun3k74"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Recall the components of the Schelling segregation model","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"pCKW67scRY"}],"key":"DOQvwG8tZI"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Environment: 25x25 grid of single family dwellings","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"lzGqXS0Pf8"}],"key":"NaAwKMMLwI"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Agents with properties:","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"eFsMK0QtTv"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"location (x,y) coordinate for current home","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"SaGecJhdOp"}],"key":"jABUodP4B9"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"type: orange or blue. Fixed over time. 250 of each","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"FnC4g06FYV"}],"key":"QXq1S1fAVz"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"happiness: 0 if less than ","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"ZV0hjldcqB"},{"type":"inlineMath","value":"N","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span></span></span></span>","key":"vY0I1elDBG"},{"type":"text","value":" of neighbors are of same type, 1 otherwise","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"EPUxQKBY9g"}],"key":"kpM4mBX3Ex"}],"key":"ZioaspebL9"}],"key":"cyZe63Kv4P"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Rules:","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"Wk9yJhvY7F"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":10,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Agents choose to move to unoccupied grid point if unhappy","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"Uz1WszlBnj"}],"key":"wAvYpQU6Pk"}],"key":"Hc6ptXBcBv"}],"key":"pY0zazVBEc"}],"key":"gJACnsWJI4"},{"type":"blockquote","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Note neighbors for a particular cell are the the 8 other cells surrounding the cell of interest. Corner or edge cells have less than 8 neighbors","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"KMMfXuSYM4"}],"key":"o8nFXAww3t"}],"key":"iwk5eVVUnc"}],"key":"nyZisk1qt7"},{"type":"block","kind":"notebook-content","data":{"slideshow":{"slide_type":"slide"}},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Agents.jl","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"UMWVGhtmjf"}],"identifier":"agents-jl","label":"Agents.jl","html_id":"agents-jl","implicit":true,"key":"lF1hubY2FH"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"We are now ready to get started implementing the Schelling segregation model in Julia","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"S65Ivpq0cF"}],"key":"v9S8QDzPCE"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"We’ll use the Agents.jl library, which is a very powerful ABM toolkit","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"icyC5GdC0o"}],"key":"wTDBGKmjhO"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Here are some points of comparison between Agents.jl and other ABM software (from the Agents.jl website):","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"S4lNGqLD0D"}],"key":"QLtuJahO9U"}],"key":"i0bvtwObux"},{"type":"image","url":"https://sglyon.github.io/ucf-cap-6318-book/docs/build/df6a6b05f3de1e22494ef3ccc0e47c9f.png","alt":"abm toolkits","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"dhkzgLMwFk","urlSource":"https://compsosci-resources.s3.amazonaws.com/abm/abm_toolkit_comparison.png","urlOptimized":"https://sglyon.github.io/ucf-cap-6318-book/docs/build/df6a6b05f3de1e22494ef3ccc0e47c9f.webp"},{"type":"image","url":"https://sglyon.github.io/ucf-cap-6318-book/docs/build/2cdb6b79d083866f84f6f3eea8ec4b87.png","alt":"toolkit features","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"W5me7Hddf3","urlSource":"https://compsosci-resources.s3.amazonaws.com/abm/abm_table1.png","urlOptimized":"https://sglyon.github.io/ucf-cap-6318-book/docs/build/2cdb6b79d083866f84f6f3eea8ec4b87.webp"},{"type":"image","url":"https://sglyon.github.io/ucf-cap-6318-book/docs/build/8dd0a7c0542555050678597b03d6816e.png","alt":"toolkit features","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"o8zss1ZkKt","urlSource":"https://compsosci-resources.s3.amazonaws.com/abm/abm_table2.png","urlOptimized":"https://sglyon.github.io/ucf-cap-6318-book/docs/build/8dd0a7c0542555050678597b03d6816e.webp"}],"key":"HO9ZiqkddI"},{"type":"block","kind":"notebook-content","data":{"slideshow":{"slide_type":"slide"}},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Schelling in Agents.jl","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KKit78TIjt"}],"identifier":"schelling-in-agents-jl","label":"Schelling in Agents.jl","html_id":"schelling-in-agents-jl","implicit":true,"key":"qyvSjdUVyg"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Let’s now implement the Schelling Segregation model in Agents.jl","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"tFCtMtUYj0"}],"key":"QZtoYgo0TK"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"The first thing we’ll need to do is define our Agent","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"Hpz21RPNem"}],"key":"XR6mrDUu8D"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"The reccomended way to do this is to create a new Juila struct using the ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Hy2ZNfdjQ3"},{"type":"inlineCode","value":"@agent","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"h3EwCihGjs"},{"type":"text","value":" macro provided by Agents.jl","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"rHdtzMtUV4"}],"key":"uSvBfz3CL0"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"The macro will ensure a few things:","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"idXwiNQXC4"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":7,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"The struct contains ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"YiC5Bns7bF"},{"type":"inlineCode","value":"id","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"ffSYCWOkz1"},{"type":"text","value":" and ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"Pf4t9vrZJY"},{"type":"inlineCode","value":"pos","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"ZeP8MbXe0j"},{"type":"text","value":" fields to keep track of the agent and its position","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"ZFJ7C1fWqP"}],"key":"tEcTazgokK"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"The struct is mutable so the position can be updated","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"I2IDknOOVm"}],"key":"RSoFcEujDS"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"The struct is a subtype of ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"WZiq5E41rs"},{"type":"inlineCode","value":"AbstractAgent","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"gsUKTBgrb1"},{"type":"text","value":" so it can be used by other functions in Agents.jl","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"hxP7Hzi3oS"}],"key":"tHLp1KcqYu"}],"key":"lO3P4lGKdF"}],"key":"iPwVGrfY3v"}],"key":"vo3JAO78qX"}],"key":"ENgrcdM2wQ"},{"type":"block","kind":"notebook-code","data":{"slideshow":{"slide_type":"subslide"}},"children":[{"type":"code","lang":"julia","executable":true,"value":"# load up packages we need for this example... might take a few minutes\n# import Pkg\n# Pkg.activate(\".\")\n# Pkg.instantiate()\n\nusing Agents","key":"BkHfgaX6Ze"},{"type":"output","id":"hWsVrpmDdDPbHL33uYlQ0","data":[],"key":"y3Bj6K1sPD"}],"key":"eBXTnifBcp"},{"type":"block","kind":"notebook-code","data":{"slideshow":{"slide_type":"slide"}},"children":[{"type":"code","lang":"julia","executable":true,"value":"@agent struct SchellingAgent(GridAgent{2})\n    is_happy::Bool      # whether the agent is happy in its position. (true = happy)\n    group::Int          # The group of the agent, determines mood as it interacts with neighbors 0: blue, 1: orange\nend","key":"kYd0USPBny"},{"type":"output","id":"Z-2KSrrBOdXHKTgCgc3N7","data":[],"key":"clTrP9lgAR"}],"key":"GDsalJSDu0"},{"type":"block","kind":"notebook-content","data":{"slideshow":{"slide_type":"subslide"}},"children":[{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We can see the complete structure of the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LvRYb9gVYB"},{"type":"inlineCode","value":"ShellingAgent","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Ystuw1A9WP"},{"type":"text","value":" type using the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"gdzftZGA0Q"},{"type":"inlineCode","value":"dump","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"J82ntrfPtF"},{"type":"text","value":" function","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"au8z8eeIWX"}],"key":"R8Qnf9LLkY"}],"key":"WPx8hmZ9p4"}],"key":"oOqrxeJPjw"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"julia","executable":true,"value":"dump(SchellingAgent)","key":"cLyt2CfH26"},{"type":"output","id":"SMkzNFQWGePDAuPamY0pG","data":[{"output_type":"stream","name":"stdout","text":"SchellingAgent <: AbstractAgent\n  id::Int64\n  pos::Tuple{Int64, Int64}\n  is_happy::Bool\n  group::Int64\n"}],"key":"P843lNhg9I"}],"key":"PwcSlJ9xCI"},{"type":"block","kind":"notebook-content","data":{"slideshow":{"slide_type":"subslide"}},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Schelling Environment","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Nu5Qph4SIy"}],"identifier":"schelling-environment","label":"Schelling Environment","html_id":"schelling-environment","implicit":true,"key":"gdYasw5vV8"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Our Schelling environment will be one the built-in Agents.jl spaces","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"EDJ3c2uLa8"}],"key":"vs0chW3ISN"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"We’ll use ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"rXpbt2RVtj"},{"type":"inlineCode","value":"GridSpace","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"uO9FYyqgeY"}],"key":"A7ZmlOrtVd"}],"key":"uwJHJq23SP"}],"key":"OZO71sROR9"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"julia","executable":true,"value":"environment = GridSpaceSingle((25, 25); periodic = false)","key":"Oa2RdnIuoV"},{"type":"output","id":"19L0U2-gH45kdUC6KD_IQ","data":[{"output_type":"execute_result","execution_count":4,"metadata":{},"data":{"text/plain":{"content":"GridSpaceSingle with size (25, 25), metric=chebyshev, periodic=false","content_type":"text/plain"}}}],"key":"pfdyRmiBsE"}],"key":"ZAxnVX2uns"},{"type":"block","kind":"notebook-content","data":{"slideshow":{"slide_type":"subslide"}},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Rules","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tXtvRXrN9K"}],"identifier":"rules","label":"Rules","html_id":"rules","implicit":true,"key":"pXtxg15yPJ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"The last part of our ABM that we need to specify is the rules for how agents respond to the environment and state","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"zOlldrYK5U"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Our rule is that agents will choose to move to an empty grid space if they have less than ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"TQZPrudrwZ"},{"type":"inlineCode","value":"wanted_neighbors","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"crwG2Ms6oo"},{"type":"text","value":" neighbors of the same group","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"O9WgSG7i0Y"}],"key":"XHJ8YaDEch"}],"key":"ZFb7EqF5nz"}],"key":"TOJ2azMoXa"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Agents.jl requires us to implement these rules in a method ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"kQpfbfrHHT"},{"type":"inlineCode","value":"agent_step!(agent::SchellingAgent, model)","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"U9CW9SUcnZ"}],"key":"xngyxm8TVb"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"We’ll make use of a couple helper functions provided by Agents.jl:","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"kieQIiJ8Gf"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"inlineCode","value":"move_agent_single!","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"aSrzgkR7Fb"},{"type":"text","value":": move a single agent to an empty place in the environment. This modifies the ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"KyfhSFAJsp"},{"type":"inlineCode","value":"pos","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"fhLi8LhqQO"},{"type":"text","value":" field of the agent","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"zRgAfuifaA"}],"key":"eXfydPRBn4"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"inlineCode","value":"nearby_agents","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"RbJYJoypLW"},{"type":"text","value":": return an array of all neighbors of a particular agent. This queries the ","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"miy8XjSjKb"},{"type":"inlineCode","value":"pos","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"P2COTuMa0N"},{"type":"text","value":" field of all agents","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"uZVoyKtTcN"}],"key":"Wz6qCIHDEp"}],"key":"fnPujEFfAS"}],"key":"IS7Drpy2Q6"}],"key":"Aktlw4wFm5"}],"key":"tf2505zZLK"},{"type":"block","kind":"notebook-code","data":{"slideshow":{"slide_type":"subslide"}},"children":[{"type":"code","lang":"julia","executable":true,"value":"function agent_step!(agent::SchellingAgent, model)\n\twant = model.wanted_neighbors\n\thave = 0\n\tfor n in nearby_agents(agent, model)\n\t\tif n.group == agent.group\n\t\t\thave += 1\n\t\tend\n\tend\n\tagent.is_happy = have >= want\n\tif !agent.is_happy\n\t\tmove_agent_single!(agent, model)\n\tend\n\treturn\nend","key":"MDkjvGXoVp"},{"type":"output","id":"eNLMf3d3JQEwQD_7Fb4vX","data":[{"output_type":"execute_result","execution_count":5,"metadata":{},"data":{"text/plain":{"content":"agent_step! (generic function with 1 method)","content_type":"text/plain"}}}],"key":"UnyIXgfr0a"}],"key":"enVDg6zPxW"},{"type":"block","kind":"notebook-content","data":{"slideshow":{"slide_type":"subslide"}},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Combining Agents, Environment, and Rules","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Lx1woq7hIh"}],"identifier":"combining-agents-environment-and-rules","label":"Combining Agents, Environment, and Rules","html_id":"combining-agents-environment-and-rules","implicit":true,"key":"A27ikH2kFp"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"We now need to create an instance of the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"SVe9RlK7cZ"},{"type":"inlineCode","value":"AgentBasedModel","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"hRe6EbdbX7"},{"type":"text","value":" (or ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"iZsNBrYqbE"},{"type":"inlineCode","value":"ABM","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"vAF3B1etHq"},{"type":"text","value":" for short) type","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Ycor4i5GPL"}],"key":"bEAX1xhxfc"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"To construct our instance we need to specify our agent type, our environment, our rules (via ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"QA4qOKtvdL"},{"type":"inlineCode","value":"agent_step!","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"JOec89hs28"},{"type":"text","value":" function), and any additional properties","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"umWjhhYIxF"}],"key":"eBvaMwnVcW"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"These additional properties belong to the model, and can be thought of as parameters that should be calibrated","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"xC96Rb0kwW"}],"key":"TgzW9FTRh1"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"In our previous exposition we would have attached these to the environment","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"dGfeAtLxuK"}],"key":"z0uXFvSgad"}],"key":"PWduaAXzUp"}],"key":"yh9oVIkWC1"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"julia","executable":true,"value":"properties = Dict(:wanted_neighbors => 4)\nschelling = AgentBasedModel(SchellingAgent, environment; properties=properties, agent_step! = agent_step!)","key":"exP8tSSiM5"},{"type":"output","id":"leu21X8tdfXQ9Lr4y9dtc","data":[{"output_type":"execute_result","execution_count":6,"metadata":{},"data":{"text/plain":{"content":"StandardABM with 0 agents of type SchellingAgent\n agents container: Dict\n space: GridSpaceSingle with size (25, 25), metric=chebyshev, periodic=false\n scheduler: fastest\n properties: wanted_neighbors","content_type":"text/plain"}}}],"key":"WJ8VKfvRf3"}],"key":"w1Q9BgGy2i"},{"type":"block","kind":"notebook-content","data":{"slideshow":{"slide_type":"subslide"}},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Add Agents","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xLZW6Wymyi"}],"identifier":"add-agents","label":"Add Agents","html_id":"add-agents","implicit":true,"key":"YbbT6mtdfr"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Now we have fully specified the behavior of our ABM, but we have a problem...","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"IflQcwQa1D"}],"key":"u2DcshTmSC"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"We don’t have any agents!!","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"UFa6ZVtOA9"}],"key":"HOSs8PMQIV"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"To add agents, we’ll use the ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"mRp5O0ljoa"},{"type":"inlineCode","value":"add_agent_single!(::SchellingAgent, model)","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"QthtxW60tn"},{"type":"text","value":" function, which is provided by Agents.jl and knows how to place non-overlapping agents in our environment","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"QKyi2JItzJ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"This will set the ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"HCUU0x6hBX"},{"type":"inlineCode","value":"pos","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"oFYhFNmFS1"},{"type":"text","value":" field for our agents","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"X8dLJRK2R1"}],"key":"VdBSmBCK6A"}],"key":"m3xfdM62Uc"}],"key":"rqAKq4qXmP"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"So that we can run many experiements, we’ll actually create a helper function that will create a new model from scratch and add agents to it","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"v7mRzpCUyA"}],"key":"mqQlRbgyz7"}],"key":"T2rHzpaH55"}],"key":"NESlxTKf6Y"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"julia","executable":true,"value":"function init_schelling(;num_agents_per_group=250)\n\tenvironment = GridSpaceSingle((25, 25), periodic=false)\n\tproperties = Dict(:wanted_neighbors => 4)\n\tmodel = ABM(SchellingAgent, environment; properties=properties, agent_step! = agent_step!)\n\t\n\tid = 0\n\tfor group in 1:2, i in 1:num_agents_per_group\n\t\tagent = SchellingAgent(id+=1, (1, 1), false, group)\n\t\tadd_agent_single!(agent, model)\n\tend\n\tmodel\nend\n\nmodel = init_schelling()","key":"q59xIVHidT"},{"type":"output","id":"BS6NSTWxVnKiEyOtqdeCD","data":[{"output_type":"execute_result","execution_count":7,"metadata":{},"data":{"text/plain":{"content":"StandardABM with 500 agents of type SchellingAgent\n agents container: Dict\n space: GridSpaceSingle with size (25, 25), metric=chebyshev, periodic=false\n scheduler: fastest\n properties: wanted_neighbors","content_type":"text/plain"}}}],"key":"exmXWTV03E"}],"key":"HpU2vwAWie"},{"type":"block","kind":"notebook-content","data":{"slideshow":{"slide_type":"slide"}},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Running the Model","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KTy3CUKJ3c"}],"identifier":"running-the-model","label":"Running the Model","html_id":"running-the-model","implicit":true,"key":"mtdFukTs7J"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"To run our model, we need to step forward in time","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"YDZL0gaVxh"}],"key":"gimX7HDo2C"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"We do this using the ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"NWiGr06P69"},{"type":"inlineCode","value":"step!","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"oog7igDHBD"},{"type":"text","value":" function provided by Agents.jl","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"USW2eaww0p"}],"key":"pG83gssDmf"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"This function will iterate over all the agents in the model and call ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Qah0ZlSiQv"},{"type":"inlineCode","value":"agent_step!","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"XA0hTKDEQT"},{"type":"text","value":" for each of them","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"w4QivRF3Ht"}],"key":"pfaEp24D8K"}],"key":"suoIn8L5su"}],"key":"wkYECVnsWT"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"julia","executable":true,"value":"# advance one step\nstep!(model)","key":"CWWpL8d1FS"},{"type":"output","id":"2Y5F73L7oK6iIXctdxLeU","data":[{"output_type":"execute_result","execution_count":8,"metadata":{},"data":{"text/plain":{"content":"StandardABM with 500 agents of type SchellingAgent\n agents container: Dict\n space: GridSpaceSingle with size (25, 25), metric=chebyshev, periodic=false\n scheduler: fastest\n properties: wanted_neighbors","content_type":"text/plain"}}}],"key":"qnnzlVrnzn"}],"key":"S1bs2PfEEy"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"julia","executable":true,"value":"# advance three steps\nstep!(model, 3)","key":"GTR8b6YmCw"},{"type":"output","id":"NqHRWveXioAb9EVj12Oqr","data":[{"output_type":"execute_result","execution_count":9,"metadata":{},"data":{"text/plain":{"content":"StandardABM with 500 agents of type SchellingAgent\n agents container: Dict\n space: GridSpaceSingle with size (25, 25), metric=chebyshev, periodic=false\n scheduler: fastest\n properties: wanted_neighbors","content_type":"text/plain"}}}],"key":"TDM8EOy8Hl"}],"key":"YZd5i4PDtD"},{"type":"block","kind":"notebook-content","data":{"slideshow":{"slide_type":"subslide"}},"children":[{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":1,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We can also use the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TtCmmM660U"},{"type":"inlineCode","value":"run","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"szRGEFzz2v"},{"type":"text","value":" function","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KuRFnUUn0C"}],"key":"I7l4Amauq8"},{"type":"listItem","spread":true,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"This function requires a model, agent_step! function, number of steps and array of agent property names to record","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"E4vxyGkUQi"}],"key":"n53gQSs8sR"},{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The output is a DataFrame with all the data","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"nSBvbphkwh"}],"key":"M9qQKnMvME"}],"key":"cH2XaPcmJu"}],"key":"QW8EoEokJf"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"julia","executable":true,"value":"model = init_schelling()\nadata = [:pos, :is_happy, :group]  # short for agent data\ndata, _ = run!(model, 10; adata)\ndata","key":"AS9YfULzkZ"},{"type":"output","id":"2Ew2QbSiWZpYJzqAhN495","data":[{"output_type":"execute_result","execution_count":10,"metadata":{},"data":{"text/plain":{"content":"\u001b[1m5500×5 DataFrame\u001b[0m\n\u001b[1m  Row \u001b[0m│\u001b[1m time  \u001b[0m\u001b[1m id    \u001b[0m\u001b[1m pos      \u001b[0m\u001b[1m is_happy \u001b[0m\u001b[1m group \u001b[0m\n      │\u001b[90m Int64 \u001b[0m\u001b[90m Int64 \u001b[0m\u001b[90m Tuple…   \u001b[0m\u001b[90m Bool     \u001b[0m\u001b[90m Int64 \u001b[0m\n──────┼─────────────────────────────────────────\n    1 │     0      1  (10, 5)      false      1\n    2 │     0      2  (3, 11)      false      1\n    3 │     0      3  (1, 4)       false      1\n    4 │     0      4  (16, 19)     false      1\n    5 │     0      5  (12, 25)     false      1\n    6 │     0      6  (10, 9)      false      1\n    7 │     0      7  (20, 7)      false      1\n    8 │     0      8  (3, 5)       false      1\n    9 │     0      9  (17, 2)      false      1\n   10 │     0     10  (4, 8)       false      1\n   11 │     0     11  (24, 3)      false      1\n  ⋮   │   ⋮      ⋮       ⋮         ⋮        ⋮\n 5491 │    10    491  (18, 8)       true      2\n 5492 │    10    492  (12, 9)       true      2\n 5493 │    10    493  (9, 9)        true      2\n 5494 │    10    494  (21, 17)      true      2\n 5495 │    10    495  (24, 22)     false      2\n 5496 │    10    496  (22, 13)      true      2\n 5497 │    10    497  (18, 11)      true      2\n 5498 │    10    498  (2, 9)        true      2\n 5499 │    10    499  (21, 10)      true      2\n 5500 │    10    500  (11, 22)      true      2\n\u001b[36m                               5479 rows omitted\u001b[0m","content_type":"text/plain"},"text/html":{"content":"<div><div style = \"float: left;\"><span>5500×5 DataFrame</span></div><div style = \"float: right;\"><span style = \"font-style: italic;\">5475 rows omitted</span></div><div style = \"clear: both;\"></div></div><div class = \"data-frame\" style = \"overflow-x: scroll;\"><table class = \"data-frame\" style = \"margin-bottom: 6px;\"><thead><tr class = \"header\"><th class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">Row</th><th style = \"text-align: left;\">time</th><th style = \"text-align: left;\">id</th><th style = \"text-align: left;\">pos</th><th style = \"text-align: left;\">is_happy</th><th style = \"text-align: left;\">group</th></tr><tr class = \"subheader headerLastRow\"><th class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\"></th><th title = \"Int64\" style = \"text-align: left;\">Int64</th><th title = \"Int64\" style = \"text-align: left;\">Int64</th><th title = \"Tuple{Int64, Int64}\" style = \"text-align: left;\">Tuple…</th><th title = \"Bool\" style = \"text-align: left;\">Bool</th><th title = \"Int64\" style = \"text-align: left;\">Int64</th></tr></thead><tbody><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">1</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">1</td><td style = \"text-align: left;\">(10, 5)</td><td style = \"text-align: right;\">false</td><td style = \"text-align: right;\">1</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">2</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">2</td><td style = \"text-align: left;\">(3, 11)</td><td style = \"text-align: right;\">false</td><td style = \"text-align: right;\">1</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">3</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">3</td><td style = \"text-align: left;\">(1, 4)</td><td style = \"text-align: right;\">false</td><td style = \"text-align: right;\">1</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">4</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">4</td><td style = \"text-align: left;\">(16, 19)</td><td style = \"text-align: right;\">false</td><td style = \"text-align: right;\">1</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">5</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">5</td><td style = \"text-align: left;\">(12, 25)</td><td style = \"text-align: right;\">false</td><td style = \"text-align: right;\">1</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">6</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">6</td><td style = \"text-align: left;\">(10, 9)</td><td style = \"text-align: right;\">false</td><td style = \"text-align: right;\">1</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">7</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">7</td><td style = \"text-align: left;\">(20, 7)</td><td style = \"text-align: right;\">false</td><td style = \"text-align: right;\">1</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">8</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">8</td><td style = \"text-align: left;\">(3, 5)</td><td style = \"text-align: right;\">false</td><td style = \"text-align: right;\">1</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">9</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">9</td><td style = \"text-align: left;\">(17, 2)</td><td style = \"text-align: right;\">false</td><td style = \"text-align: right;\">1</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">10</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">10</td><td style = \"text-align: left;\">(4, 8)</td><td style = \"text-align: right;\">false</td><td style = \"text-align: right;\">1</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">11</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">11</td><td style = \"text-align: left;\">(24, 3)</td><td style = \"text-align: right;\">false</td><td style = \"text-align: right;\">1</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">12</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">12</td><td style = \"text-align: left;\">(14, 12)</td><td style = \"text-align: right;\">false</td><td style = \"text-align: right;\">1</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">13</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">13</td><td style = \"text-align: left;\">(16, 11)</td><td style = \"text-align: right;\">false</td><td style = \"text-align: right;\">1</td></tr><tr><td style = \"text-align: right;\">&vellip;</td><td style = \"text-align: right;\">&vellip;</td><td style = \"text-align: right;\">&vellip;</td><td style = \"text-align: right;\">&vellip;</td><td style = \"text-align: right;\">&vellip;</td><td style = \"text-align: right;\">&vellip;</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">5489</td><td style = \"text-align: right;\">10</td><td style = \"text-align: right;\">489</td><td style = \"text-align: left;\">(24, 18)</td><td style = \"text-align: right;\">false</td><td style = \"text-align: right;\">2</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">5490</td><td style = \"text-align: right;\">10</td><td style = \"text-align: right;\">490</td><td style = \"text-align: left;\">(7, 24)</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">2</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">5491</td><td style = \"text-align: right;\">10</td><td style = \"text-align: right;\">491</td><td style = \"text-align: left;\">(18, 8)</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">2</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">5492</td><td style = \"text-align: right;\">10</td><td style = \"text-align: right;\">492</td><td style = \"text-align: left;\">(12, 9)</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">2</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">5493</td><td style = \"text-align: right;\">10</td><td style = \"text-align: right;\">493</td><td style = \"text-align: left;\">(9, 9)</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">2</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">5494</td><td style = \"text-align: right;\">10</td><td style = \"text-align: right;\">494</td><td style = \"text-align: left;\">(21, 17)</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">2</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">5495</td><td style = \"text-align: right;\">10</td><td style = \"text-align: right;\">495</td><td style = \"text-align: left;\">(24, 22)</td><td style = \"text-align: right;\">false</td><td style = \"text-align: right;\">2</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">5496</td><td style = \"text-align: right;\">10</td><td style = \"text-align: right;\">496</td><td style = \"text-align: left;\">(22, 13)</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">2</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">5497</td><td style = \"text-align: right;\">10</td><td style = \"text-align: right;\">497</td><td style = \"text-align: left;\">(18, 11)</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">2</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">5498</td><td style = \"text-align: right;\">10</td><td style = \"text-align: right;\">498</td><td style = \"text-align: left;\">(2, 9)</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">2</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">5499</td><td style = \"text-align: right;\">10</td><td style = \"text-align: right;\">499</td><td style = \"text-align: left;\">(21, 10)</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">2</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">5500</td><td style = \"text-align: right;\">10</td><td style = \"text-align: right;\">500</td><td style = \"text-align: left;\">(11, 22)</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">2</td></tr></tbody></table></div>","content_type":"text/html"},"text/latex":{"content":"\\begin{tabular}{r|ccccc}\n\t& time & id & pos & is\\_happy & group\\\\\n\t\\hline\n\t& Int64 & Int64 & Tuple… & Bool & Int64\\\\\n\t\\hline\n\t1 & 0 & 1 & (10, 5) & 0 & 1 \\\\\n\t2 & 0 & 2 & (3, 11) & 0 & 1 \\\\\n\t3 & 0 & 3 & (1, 4) & 0 & 1 \\\\\n\t4 & 0 & 4 & (16, 19) & 0 & 1 \\\\\n\t5 & 0 & 5 & (12, 25) & 0 & 1 \\\\\n\t6 & 0 & 6 & (10, 9) & 0 & 1 \\\\\n\t7 & 0 & 7 & (20, 7) & 0 & 1 \\\\\n\t8 & 0 & 8 & (3, 5) & 0 & 1 \\\\\n\t9 & 0 & 9 & (17, 2) & 0 & 1 \\\\\n\t10 & 0 & 10 & (4, 8) & 0 & 1 \\\\\n\t11 & 0 & 11 & (24, 3) & 0 & 1 \\\\\n\t12 & 0 & 12 & (14, 12) & 0 & 1 \\\\\n\t13 & 0 & 13 & (16, 11) & 0 & 1 \\\\\n\t14 & 0 & 14 & (21, 3) & 0 & 1 \\\\\n\t15 & 0 & 15 & (19, 1) & 0 & 1 \\\\\n\t16 & 0 & 16 & (10, 25) & 0 & 1 \\\\\n\t17 & 0 & 17 & (6, 3) & 0 & 1 \\\\\n\t18 & 0 & 18 & (14, 18) & 0 & 1 \\\\\n\t19 & 0 & 19 & (19, 6) & 0 & 1 \\\\\n\t20 & 0 & 20 & (21, 5) & 0 & 1 \\\\\n\t21 & 0 & 21 & (5, 15) & 0 & 1 \\\\\n\t22 & 0 & 22 & (22, 12) & 0 & 1 \\\\\n\t23 & 0 & 23 & (9, 15) & 0 & 1 \\\\\n\t24 & 0 & 24 & (18, 14) & 0 & 1 \\\\\n\t25 & 0 & 25 & (20, 14) & 0 & 1 \\\\\n\t26 & 0 & 26 & (6, 15) & 0 & 1 \\\\\n\t27 & 0 & 27 & (22, 22) & 0 & 1 \\\\\n\t28 & 0 & 28 & (13, 8) & 0 & 1 \\\\\n\t29 & 0 & 29 & (13, 19) & 0 & 1 \\\\\n\t30 & 0 & 30 & (13, 4) & 0 & 1 \\\\\n\t$\\dots$ & $\\dots$ & $\\dots$ & $\\dots$ & $\\dots$ & $\\dots$ \\\\\n\\end{tabular}\n","content_type":"text/latex"}}}],"key":"QHXf4NiQ1e"}],"key":"DqejktJFD9"},{"type":"block","kind":"notebook-content","data":{"slideshow":{"slide_type":"slide"}},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Visualizing the Agents","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"v4y49mONZU"}],"identifier":"visualizing-the-agents","label":"Visualizing the Agents","html_id":"visualizing-the-agents","implicit":true,"key":"ZYhO7e1398"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"One of the more instructive (and fun!) parts of agent based modeling is visualizing the data","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"AiRlLirJ0f"}],"key":"m12DFE3qAJ"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"To do this visualization we will use the ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"pO4OxvNyBa"},{"type":"inlineCode","value":"abmplot","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"QeLzO24gBM"},{"type":"text","value":" function","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"gYVnqNXuxx"}],"key":"gAEqTBaN3T"}],"key":"Wp3fJKjQ9U"}],"key":"BwNjszO9ov"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"julia","executable":true,"value":"using CairoMakie\n\nagent_color(a) = a.group == 1 ? :blue : :orange\nagent_marker(a) = a.group == 1 ? :circle : :rect\nfigure, _ = abmplot(model; agent_color, agent_marker, agent_size = 10)\nfigure # returning the figure displays it","key":"tCUEHeuVuD"},{"type":"output","id":"z-uBwZSYCbP6DL0nhx20_","data":[{"output_type":"execute_result","execution_count":11,"metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"fd79fbb6b34ba1f866bc2cd8a6f3c63e","path":"https://sglyon.github.io/ucf-cap-6318-book/docs/build/fd79fbb6b34ba1f866bc2cd8a6f3c63e.png"},"text/html":{"content_type":"text/html","hash":"9256941e56e2c39524c3946758ea648f","path":"https://sglyon.github.io/ucf-cap-6318-book/docs/build/9256941e56e2c39524c3946758ea648f.html"}}}],"key":"tiNnuO0oli"}],"key":"SUF4sLrp5K"},{"type":"block","kind":"notebook-content","data":{"slideshow":{"slide_type":"slide"}},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Animating the Agents","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"VqC66h2g5S"}],"identifier":"animating-the-agents","label":"Animating the Agents","html_id":"animating-the-agents","implicit":true,"key":"zGvMPNqssk"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"We can also create a video that animates our agents moving throughout the system","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"aFOEppqO6c"}],"key":"ibEAjMAYGe"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"We do this using the ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"aSerpsw4m5"},{"type":"inlineCode","value":"abmvideo","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"tCUB3F2VDb"},{"type":"text","value":" function as follows","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"TzAL3wpz74"}],"key":"gBiT8vlWFd"}],"key":"UwKP4a4CXg"}],"key":"eqkJup4iEY"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"julia","executable":true,"value":"model = init_schelling();\nabmvideo(\n    \"schelling.mp4\", model;\n    agent_color, agent_marker, agent_size = 10,\n    framerate = 4, frames = 20,\n    title = \"Schelling's segregation model\"\n)","key":"vzMG7i1ab9"},{"type":"output","id":"t5HcQdxeRmBpFaSWoCNpD","data":[],"key":"DjwVGaMOWJ"}],"key":"w62v48EMTQ"},{"type":"block","kind":"notebook-content","data":{"slideshow":{"slide_type":"slide"}},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Interactive Application","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"eUAxumSa87"}],"identifier":"interactive-application","label":"Interactive Application","html_id":"interactive-application","implicit":true,"key":"APzMhOgYkn"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Agents.jl also makes it very easy to create an interactive application for our model!","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"YhlroIkxau"}],"key":"WfklaCChDd"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"We can do this using the ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"FlOxYGwoxu"},{"type":"inlineCode","value":"abmexploration","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"dHgRPJmHLY"},{"type":"text","value":" function","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"k70jhUZM0D"}],"key":"q8KQdPp7YZ"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"This expects a single positional argument:","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"PAomvA7Yqp"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"inlineCode","value":"model","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"uHgEYN2VZU"}],"key":"UZYomXA4yv"}],"key":"A5wHVhkw9a"}],"key":"C1eRv5Co0z"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"We also have some keyword arguments","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"rCAmWV5G8q"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":8,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"inlineCode","value":"params","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"WpEEHy2865"},{"type":"text","value":": Dict mapping model parameters to range of values to test","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"WnQ5OGysNP"}],"key":"za5bG612y2"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"inlineCode","value":"agent_color","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"VgVQpPqsfj"},{"type":"text","value":", ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"BZ6gXAfmts"},{"type":"inlineCode","value":"agent_marker","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"dVQFCzvQmr"},{"type":"text","value":", ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"YSKu2LLuu1"},{"type":"inlineCode","value":"agent_size","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"MJjYleKc08"},{"type":"text","value":": control marker color color, symbol, and size as before","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"yTI1dslt0P"}],"key":"HEgAYQx0FC"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"inlineCode","value":"adata","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"XCYtCb49eA"},{"type":"text","value":": Array of (agent_property, summary_func) tuples that specify which data to plot in separate charts","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"JCSNDElgqY"}],"key":"ywHhIaj565"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"inlineCode","value":"alabels","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"uICf2tCLOV"},{"type":"text","value":": What label to put on the plots for ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"hOgFWIndSj"},{"type":"inlineCode","value":"adata","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"NjmGu2dC25"}],"key":"i3MbPh6v4M"}],"key":"rCXsWzTecw"}],"key":"zNtQ361jkP"}],"key":"PdCWQGETnE"}],"key":"Dl0yiNRb9N"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"julia","executable":true,"value":"model = init_schelling()\nadata = [(:is_happy, sum)]\nalabels = [\"n_happy\"]\nparameter_range = Dict(:wanted_neighbors => 0:8)\nfigure, abmobs = abmexploration(\n    model;\n    adata, alabels,\n    agent_color, agent_marker, agent_size = 10,\n    params=parameter_range,\n)\nfigure","key":"cuLQfjHYLr"},{"type":"output","id":"oNk5K9o-K3mcCt278jQeP","data":[{"output_type":"execute_result","execution_count":13,"metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"832bf6dcbba0f37003617d834b0da1fd","path":"https://sglyon.github.io/ucf-cap-6318-book/docs/build/832bf6dcbba0f37003617d834b0da1fd.png"},"text/html":{"content_type":"text/html","hash":"1d400da51dbf712b4c034c225f6454e8","path":"https://sglyon.github.io/ucf-cap-6318-book/docs/build/1d400da51dbf712b4c034c225f6454e8.html"}}}],"key":"rWdF8bEY8I"}],"key":"wLgkdtQyDM"},{"type":"block","kind":"notebook-content","data":{"slideshow":{"slide_type":"slide"}},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Run from REPL","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"XVSWjHfbY7"}],"identifier":"run-from-repl","label":"Run from REPL","html_id":"run-from-repl","implicit":true,"key":"ZHfrNZtk2O"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"In order to use the interactive app we need to run the code from the Julia REPL (not inside vs code or jupyter)","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"WZGbINiiec"}],"key":"fjjxG1wC7z"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"We’ll do that now","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"ubmbIvEZT0"}],"key":"eucFUl2IQ6"}],"key":"QbOwko76NU"}],"key":"Ban56j9Ldm"}],"key":"D18ltemGwt"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Julia Skills","url":"/l09-02-julia-skills","group":"Week 09"},"next":{"title":"Agent Based Models Review/Practice","url":"/l10-01-abm-money","group":"Week 10"}}},"domain":"http://localhost:3000"}