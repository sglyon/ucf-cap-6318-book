{"version":2,"kind":"Notebook","sha256":"6ff87350a80d2f2c8dea184abb23e2df5c019aca239bf7c1d104b7c10ce64b72","slug":"l-a02-03-evaluations","location":"/weekA02/L.A02.03_evaluations.ipynb","dependencies":[],"frontmatter":{"title":"Evaluating AI Systems: Testing Agents at Scale","content_includes_title":false,"kernelspec":{"name":"python3","display_name":".venv","language":"python"},"authors":[{"nameParsed":{"literal":"Spencer Lyon","given":"Spencer","family":"Lyon"},"name":"Spencer Lyon","orcid":"0009-0001-6461-885X","email":"spencer.lyon@ucf.edu","affiliations":["University of Central Florida","Valorum Data"],"id":"contributors-myst-generated-uid-0","corresponding":true}],"affiliations":[{"id":"University of Central Florida","name":"University of Central Florida"},{"id":"Valorum Data","name":"Valorum Data"}],"numbering":{"title":{"offset":1}},"exports":[{"format":"ipynb","filename":"L.A02.03_evaluations.ipynb","url":"/build/L.A02.03_evaluations-960f7d74d18299c9bca299a3b862e39d.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"blockquote","position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Computational Analysis of Social Complexity","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"DgHpHhjp0p"}],"key":"hOuTPa0mlX"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Fall 2025, Spencer Lyon","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"FrbnEArIVF"}],"key":"t984OwD37X"}],"key":"MybzsWmVQF"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"strong","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Prerequisites","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"MMuCYpQKAm"}],"key":"r4t4DmjAEG"}],"key":"AxiyjJgmHw"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":9,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Pydantic AI Agents and Tools","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"GThlk8v6tS"}],"key":"XnYbmW2XVY"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Python programming fundamentals","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"pvG4UPZqXr"}],"key":"NP8bJTuM5G"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Basic understanding of testing concepts","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"l2poMfHjS5"}],"key":"jGDU1UTI3Y"}],"key":"ykYfSAsUFL"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"strong","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Outcomes","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"CU69alaFvv"}],"key":"wLVi9Kyy0Q"}],"key":"Xn5WC53gUx"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":15,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Understand why systematic evaluation is critical for AI systems","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"dATm7VuCuX"}],"key":"s1bGcyp5EA"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Identify when and what to evaluate in AI agents","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"bEK4acVt4T"}],"key":"QqX7TujMGB"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Implement deterministic and LLM-based evaluators","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"IysimTOAMZ"}],"key":"hFJCqNnDlJ"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Design evaluation datasets using code-first approaches","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"KYTKa9z1Ej"}],"key":"k0vD6Xl2zl"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"Analyze and compare evaluation results across experiments","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"Ggo4SyWfiI"}],"key":"OR0sUQlZ01"},{"type":"listItem","spread":true,"position":{"start":{"line":20,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Connect evaluation practices to production deployment concerns","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"raVUbWdN50"}],"key":"MWRqxnwDVF"}],"key":"dlxDlg0ifC"},{"type":"paragraph","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"strong","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"References","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"eKkdKehkeQ"}],"key":"tifzBmPacu"}],"key":"KR5LVtB4oO"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":24,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"link","url":"https://ai.pydantic.dev/evals/index.md","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"Pydantic AI Evals Documentation","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"rdxDASDZSP"}],"urlSource":"https://ai.pydantic.dev/evals/index.md","key":"vOf99PHcBq"}],"key":"UePBebUOxl"},{"type":"listItem","spread":true,"position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"link","url":"https://ai.pydantic.dev/api/pydantic_evals/dataset/index.md","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"Pydantic Evals API Reference","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"uRT5nHqJWg"}],"urlSource":"https://ai.pydantic.dev/api/pydantic_evals/dataset/index.md","key":"yDLZZJmvX8"}],"key":"pn6ztN2Oir"},{"type":"listItem","spread":true,"position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"Testing practices from software engineering","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"IpKKPDaAYo"}],"key":"hRVf6S1tss"}],"key":"ILymYg0o6U"}],"key":"LHtiF6Gdar"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Introduction: The AI Testing Problem","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DRWo5tSlvZ"}],"identifier":"introduction-the-ai-testing-problem","label":"Introduction: The AI Testing Problem","html_id":"introduction-the-ai-testing-problem","implicit":true,"key":"TGeVEd1s0u"}],"key":"NiQqyvf7FS"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Why Testing AI is Different","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"aEj6mhf9qT"}],"identifier":"why-testing-ai-is-different","label":"Why Testing AI is Different","html_id":"why-testing-ai-is-different","implicit":true,"key":"maYHotk8ke"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Traditional software testing: deterministic inputs → deterministic outputs","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"qVDZpM6tfa"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"If ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"OAn6nTvFe7"},{"type":"inlineCode","value":"add(2, 3)","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"Z6cen3Vpw7"},{"type":"text","value":" returns ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"vnVirmjDAN"},{"type":"inlineCode","value":"5","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"EEtIyk7I5e"},{"type":"text","value":" once, it always will","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"FmAiOnvnJm"}],"key":"wO5h5rUmws"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Clear pass/fail criteria","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"bSIETtKyr2"}],"key":"mTMz6g2F9g"}],"key":"Gk0AQjDlzh"}],"key":"FaJ7ZLokhc"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"AI systems: same input → potentially different outputs","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"bqf77J9YVf"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":7,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Ask an agent “What’s the capital of France?” twice, might get:","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"xXjIRgz3PE"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":8,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"“The capital of France is Paris.”","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"Se9MvBBEzy"}],"key":"ZGuw0XpZWL"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"“Paris is France’s capital city.”","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"Crh243sI1P"}],"key":"lO77fmv1lF"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"“France’s capital is Paris, known for the Eiffel Tower.”","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"Dnp9yP0Saj"}],"key":"JLpn1PI5Xk"}],"key":"Kb2k1X255r"}],"key":"gJRTvQm9nK"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"All correct, but different!","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"mjVu9QBk10"}],"key":"NHo26qgL4x"}],"key":"qt4s6QtxPJ"}],"key":"ShDlYdubl5"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"strong","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Key challenge","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"SzYGRxKnp6"}],"key":"PvPgBu4qVo"},{"type":"text","value":": How do we test something that’s non-deterministic?","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"agtKQREXC8"}],"key":"WpHIYscIlF"}],"key":"ElDeRHGuw1"},{"type":"heading","depth":3,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Motivating Scenario: The Support Bot Problem","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"mMutmRh4bO"}],"identifier":"motivating-scenario-the-support-bot-problem","label":"Motivating Scenario: The Support Bot Problem","html_id":"motivating-scenario-the-support-bot-problem","implicit":true,"key":"RlBvFUAPtH"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":16,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"You’ve built a customer support agent using Pydantic AI","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"TgX30G3C0P"}],"key":"TIZuy64IEW"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"It handles questions about product returns, shipping, and account issues","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"giHZYWnxxY"}],"key":"sFTpRoy2mD"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"In development, it seems to work great on the examples you tried","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"iCLhsvX1v7"}],"key":"Z9fJQgmTBx"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"You deploy to production and...","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"Hrj33V8bba"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":20,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"Sometimes gives outdated return policy information","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"gHHv3F0kCY"}],"key":"ewn6BZJ4b4"},{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Occasionally “hallucinates” shipping partners that don’t exist","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"RAJnKKn8Js"}],"key":"JkfBE8B9Ai"},{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Has trouble with edge cases you didn’t think to test","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"jMWJygtM5Y"}],"key":"fcHPBCxNLs"}],"key":"KojFDO6FGm"}],"key":"g5YVxutHtt"},{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"strong","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"Question","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"Aj0241WGvG"}],"key":"knRuFOueVl"},{"type":"text","value":": How could systematic evaluation have caught these issues?","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"qKMGwGEyZj"}],"key":"VtXZCZ3sHk"}],"key":"qmWhuuVTl5"},{"type":"heading","depth":3,"position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"What We’ll Learn","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"NZZr78wgFu"}],"identifier":"what-well-learn","label":"What We’ll Learn","html_id":"what-well-learn","implicit":true,"key":"voVg8uKKEQ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":27,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"We’ll explore ","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"xax7lclMMD"},{"type":"strong","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"Pydantic Evals","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"yxGOZ3X0AN"}],"key":"k8yGzdPyG7"},{"type":"text","value":", a framework for testing AI systems","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"s95neNH6Sy"}],"key":"OgTf95gv7N"},{"type":"listItem","spread":true,"position":{"start":{"line":28,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"Three main components:","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"bF8ysEVoYH"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":29,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"strong","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"Datasets","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"nnaBDwEEZd"}],"key":"acVYswjZLL"},{"type":"text","value":": Collections of test scenarios","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"y4wvvwUR5l"}],"key":"gA9KK9cyuK"},{"type":"listItem","spread":true,"position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"strong","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"text","value":"Evaluators","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"g71hECkWcG"}],"key":"S1eDilvBvE"},{"type":"text","value":": Scoring mechanisms to check outputs","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"gtLrPjfKLP"}],"key":"VczquibiEB"},{"type":"listItem","spread":true,"position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"strong","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"Experiments","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"ktrLcqcSTQ"}],"key":"qxmuYWahM7"},{"type":"text","value":": Runs that combine datasets and evaluators","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"SOSp53nmaV"}],"key":"mJBUWRTmov"}],"key":"BWoPb0aG7w"}],"key":"xtdgBPq1CF"},{"type":"listItem","spread":true,"position":{"start":{"line":32,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"text","value":"Think of it like unit testing for AI:","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"aevUZh9Rjk"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":33,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"text","value":"Cases + Evaluators = individual unit tests","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"FUAlW6cISs"}],"key":"DKc5MaMcIW"},{"type":"listItem","spread":true,"position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"text","value":"Datasets = test suites","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"zjjJzGIyZE"}],"key":"oU9WNOEes9"},{"type":"listItem","spread":true,"position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"text","value":"Experiments = running your entire test suite","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"eLrmUc5ifY"}],"key":"qtyLmtvoPl"}],"key":"wfnJ3XM4Xu"}],"key":"XZzY13XRFN"}],"key":"fM4OGpcxLI"}],"key":"PbI8cU6nad"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Setup","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hcNCunZayj"}],"identifier":"setup","label":"Setup","html_id":"setup","implicit":true,"key":"XquIoTz6U9"}],"key":"UY14e2XRla"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Install and Import Dependencies","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Vd8BqNvlO8"}],"identifier":"install-and-import-dependencies","label":"Install and Import Dependencies","html_id":"install-and-import-dependencies","implicit":true,"key":"YyHx6KFxoP"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"We’ll need Pydantic AI and the evals module:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"AQePcnBKwt"}],"key":"WAy69GmKS1"}],"key":"wa7DG4xB7K"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Install pydantic-ai if needed\n# %pip install pydantic-ai[anthropic,evals] pydantic-evals","key":"cfQKRQ2Awj"},{"type":"output","id":"7Jm7agH4bvyFmxwrUbWqH","data":[],"key":"a6EDwfvAv2"}],"key":"pmjnpPqVpc"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from pydantic_ai import Agent\nfrom pydantic_evals import Dataset, Case\nfrom pydantic_evals.evaluators import (\n    Evaluator,\n    EvaluatorContext,\n    EvaluationReason,\n    EqualsExpected,\n    Contains,\n    IsInstance,\n    MaxDuration,\n    LLMJudge,\n    HasMatchingSpan,\n)\nfrom pydantic import BaseModel\nimport os","key":"HW05Pt9HTY"},{"type":"output","id":"JY7gmdrVYu5hvbu14zTxW","data":[],"key":"dNQSwFp0jt"}],"key":"JhSdqIW1rP"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Configure API Keys","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"stQz7000r9"}],"identifier":"configure-api-keys","label":"Configure API Keys","html_id":"configure-api-keys","implicit":true,"key":"SDwuepkbng"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Make sure you have your Anthropic API key set:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"PP2lLbbuT1"}],"key":"JaSiKRNrMI"}],"key":"fbXHRvnUAK"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from dotenv import load_dotenv\nimport nest_asyncio\n\nload_dotenv()\nnest_asyncio.apply()","key":"RiXbtLE4vW"},{"type":"output","id":"1f53owVX8gELLnXy44a9M","data":[],"key":"YpmIl8DMEy"}],"key":"RrKUQBmtcM"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Your API key should be set in environment\n# os.environ[\"ANTHROPIC_API_KEY\"] = \"your-key-here\"\n\n# Verify it's set\nassert \"ANTHROPIC_API_KEY\" in os.environ, \"Please set ANTHROPIC_API_KEY environment variable\"","key":"FeQI27jUfk"},{"type":"output","id":"I4KqA_03xGktQskiOJULG","data":[],"key":"Rxx8VBQPOq"}],"key":"nOvwdqUokz"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Core Concepts: The Evaluation Framework","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"kc6HR3zL2b"}],"identifier":"core-concepts-the-evaluation-framework","label":"Core Concepts: The Evaluation Framework","html_id":"core-concepts-the-evaluation-framework","implicit":true,"key":"gnR1D7Xtaz"}],"key":"KSnPikM8ik"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Structure: Cases, Datasets, and Experiments","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Udz8MP7F0B"}],"identifier":"structure-cases-datasets-and-experiments","label":"Structure: Cases, Datasets, and Experiments","html_id":"structure-cases-datasets-and-experiments","implicit":true,"key":"oJqKtxIDeY"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Cases","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ggrJKsBnEi"}],"key":"HkJFa50n1g"},{"type":"text","value":": Individual test scenarios","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"gSI31pYFUt"}],"key":"FbeZESnuYu"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Like a single unit test","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"lGt05tKlkh"}],"key":"VK775B7bUd"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Contains:","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"bX3T1aRatm"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":7,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"inlineCode","value":"inputs","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"RPCWEL6XF0"},{"type":"text","value":": Data you pass to the agent","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"kxuYON4Fw6"}],"key":"HpmnAQz2JZ"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"inlineCode","value":"expected_output","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"MEN6j2r3WE"},{"type":"text","value":": (Optional) What you expect back","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"uUHVtbkNRY"}],"key":"FhpPIdh5e5"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"inlineCode","value":"metadata","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"R8ww1dOSzp"},{"type":"text","value":": (Optional) Context about this test","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"BREn99oXVz"}],"key":"Md1ECIjxzT"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"inlineCode","value":"evaluators","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"vwM86t9EwJ"},{"type":"text","value":": (Optional) Case-specific checks","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"x7oxiOOc76"}],"key":"m8J93S2CdX"}],"key":"BJ6nmtA1Rj"}],"key":"Uw7yMDn0y0"}],"key":"EboyYmyJ8r"},{"type":"paragraph","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"strong","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Datasets","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"UpH2OcO0o5"}],"key":"nr2bqf8Uex"},{"type":"text","value":": Collections of cases","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"eKPxADU2sO"}],"key":"tPBQcMOuFl"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":14,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Like a test suite","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"KsSGRP5Hz8"}],"key":"equBlxbcc6"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Groups related test scenarios","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"Lu53aWxmUo"}],"key":"QM7k9eazNd"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Can have dataset-level evaluators that apply to all cases","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"sYiyVs6VyE"}],"key":"i8i8gwgO7n"}],"key":"hYM6suMclu"},{"type":"paragraph","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"strong","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Experiments","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"y4EkmVmtLT"}],"key":"Rsw0fROE46"},{"type":"text","value":": Evaluation runs","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"yC1KhMEWBi"}],"key":"pZGBBafouH"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":20,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"Like running ","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"GjZuAGwv7B"},{"type":"inlineCode","value":"pytest","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"mDWXVSUduF"},{"type":"text","value":" or ","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"viRkbxo5Ar"},{"type":"inlineCode","value":"julia test","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"rpHefspDN9"}],"key":"nhZPPK4Get"},{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Executes your task function on all cases","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"vFqgSn7EbU"}],"key":"yVDhgYiNUj"},{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Applies evaluators to score outputs","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"p9HnQ74nDH"}],"key":"wpHBI3PL3g"},{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"Generates reports with results","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"oAIQuUW69p"}],"key":"f3v0uUvb6Q"}],"key":"CBaxLVIUz1"}],"key":"GYFmjJDfmO"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Example: Simple Support Bot Dataset","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qYYyfR5AA4"}],"identifier":"example-simple-support-bot-dataset","label":"Example: Simple Support Bot Dataset","html_id":"example-simple-support-bot-dataset","implicit":true,"key":"JQM3j5jSUw"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Let’s build intuition with a concrete example.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"YOVoKICXat"}],"key":"sv41A8ByfT"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Suppose we want to test our support bot’s ability to identify the user’s intent:","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ML68MiYAwe"}],"key":"fnC5yCWFzW"}],"key":"y1sP61vH2G"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Define test cases\nintent_dataset = Dataset[str, str](\n    name=\"Intent Classification Tests\",\n    cases=[\n        Case(\n            name=\"return_request\",\n            inputs=\"I want to return my order\",\n            expected_output=\"return\"\n        ),\n        Case(\n            name=\"shipping_status\",\n            inputs=\"Where is my package?\",\n            expected_output=\"shipping\"\n        ),\n        Case(\n            name=\"account_question\",\n            inputs=\"How do I reset my password?\",\n            expected_output=\"account\"\n        )\n    ]\n)\n\nprint(f\"Dataset: {intent_dataset.name}\")\nprint(f\"Number of cases: {len(intent_dataset.cases)}\")","key":"QVTGkggnG2"},{"type":"output","id":"p3qCkD8Jnj2bySVDoxLel","data":[{"name":"stdout","output_type":"stream","text":"Dataset: Intent Classification Tests\nNumber of cases: 3\n"}],"key":"wzhIQifp2i"}],"key":"YddsrlevY6"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Note the pattern","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DRRcPmSW1H"}],"key":"hsd8wvD62h"},{"type":"text","value":":","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GgEgBqguFf"}],"key":"n2ebjeHgfu"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Each case tests one scenario","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"QuiIDBlYjo"}],"key":"Kc9Rc9PeFb"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"We specify what we expect","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"O0SWiPEApK"}],"key":"aFn5S5CUad"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Cases are typed: ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"rjFMNEJxKa"},{"type":"inlineCode","value":"Dataset[str, str]","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"wTiwawyq55"},{"type":"text","value":" means string inputs → string outputs","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"FxA1KitTB3"}],"key":"rb0AdhgSOW"}],"key":"QhEcPtRy58"}],"key":"scSDAV5gtC"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Exercise 1: Design Your Own Cases","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"gsD29EGyVj"}],"identifier":"exercise-1-design-your-own-cases","label":"Exercise 1: Design Your Own Cases","html_id":"exercise-1-design-your-own-cases","implicit":true,"key":"J962DlTuS6"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Scenario","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"PpM05viM0E"}],"key":"pw8ACWjYGt"},{"type":"text","value":": You’re building a sentiment analysis agent for product reviews.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"UTJCkpvz11"}],"key":"xd2fbISJx7"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Task","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ExTMnSnw9w"}],"key":"FILeSWd1Pu"},{"type":"text","value":": Following the pattern above, create a ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"WpAfp0wKC0"},{"type":"inlineCode","value":"Dataset[str, str]","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"PdBlQYjigK"},{"type":"text","value":" with 3-5 test cases for an agent that should classify product reviews as:","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"yyGStvfcTv"}],"key":"BZeZg5SQDy"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"“positive”","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"ql7cqI7CSH"}],"key":"TQe3kvfOhd"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"“negative”","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"r2IhlpqsEO"}],"key":"H1oPDR6BVp"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"“neutral”","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"TS5B2cQ2sk"}],"key":"BrV8ZAjeBe"}],"key":"wxgQJhMbci"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Think about:","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"UoEhyMylMe"}],"key":"mRQxFgZuGS"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":12,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"What review texts represent typical positive/negative/neutral cases?","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"HxxScm8QsM"}],"key":"HLd6DR79KY"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"What are edge cases? (e.g., mixed sentiments, sarcasm)","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"Hr9PRJR7qK"}],"key":"tr6aTz0p3H"},{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Make sure each Case has:","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"vWcxHpD2K4"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":15,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"A descriptive ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"DEQgJ8AoSG"},{"type":"inlineCode","value":"name","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"XBansz3Krd"}],"key":"r4QGSLlxve"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"inlineCode","value":"inputs","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"uyObra81mA"},{"type":"text","value":" (the review text)","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"wyFVkPJjqj"}],"key":"QxjQ9OSryn"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"inlineCode","value":"expected_output","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"CD3VoL3wyF"},{"type":"text","value":" (the sentiment label)","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"KdO2wTfq5g"}],"key":"ogcwtAx48N"}],"key":"piNoA4CWZ3"}],"key":"apfpImcXGX"}],"key":"coHfJ3CVrJ"}],"key":"t1xc0FX0Yn"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# TODO: Your code here\n# Create a sentiment analysis dataset following the pattern above\n\nsentiment_dataset = Dataset[str, str](\n    name=\"Product Sentiment Analysis\",\n    cases=[\n        # TODO: Add your test cases here\n        # Case(\n        #     name=\"clearly_positive\",\n        #     inputs=\"This product exceeded my expectations! ...\",\n        #     expected_output=\"positive\"\n        # ),\n    ]\n)\n\nprint(f\"Created dataset with {len(sentiment_dataset.cases)} cases\")","key":"kiuqsM05SO"},{"type":"output","id":"H4nWMavKSCfsivQiBHYv4","data":[{"name":"stdout","output_type":"stream","text":"Created dataset with 0 cases\n"}],"key":"uUJLyh8byI"}],"key":"pT0hBR8fFS"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Evaluators: How to Score Outputs","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jxbGCpCdDz"}],"identifier":"evaluators-how-to-score-outputs","label":"Evaluators: How to Score Outputs","html_id":"evaluators-how-to-score-outputs","implicit":true,"key":"QMNtDDjnst"}],"key":"VYdesnFPl7"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Two Types of Evaluation","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bw9czUez45"}],"identifier":"two-types-of-evaluation","label":"Two Types of Evaluation","html_id":"two-types-of-evaluation","implicit":true,"key":"tIv56ILPpv"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Deterministic Evaluators","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"QuRwdh05o2"}],"key":"mk0wkzfBie"},{"type":"text","value":": Code-based checks","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"dK69BLqKXh"}],"key":"enCxlDfI1c"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Exact matches","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ZNTAQnElzx"}],"key":"dUSYwz7YaQ"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Type checking","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"GnAcGt6uOm"}],"key":"Wt0e7AJzNi"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Format validation (email, phone number, URL)","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"UMTnp2jZcY"}],"key":"kpFcHnNpGV"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"PII detection","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"nr4ikdOwHp"}],"key":"nzav5F3Uu7"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Regular expression matching","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"BlmodykOGP"}],"key":"pUPp9nsPwm"}],"key":"xzOGcBCXyr"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"strong","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Non-Deterministic Evaluators","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"InhwsVn4uf"}],"key":"Zt7qJcGJzu"},{"type":"text","value":": Subjective assessment","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"lHSDwUj9CD"}],"key":"rd6ryX3tl6"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":13,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"LLM as judge","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"BAW7xeBRWf"}],"key":"ezPeNo4mS8"},{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Human evaluation","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"ccJDtdOZ0u"}],"key":"qwl0Z02nZx"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Quality metrics (accuracy, relevance, helpfulness)","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"cWi2B6Y3gw"}],"key":"I3bK8WzN9u"}],"key":"FEeoxkfnYH"}],"key":"JJfm2Ff4PX"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Built-in Evaluators","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"IwdK8FaUW3"}],"identifier":"built-in-evaluators","label":"Built-in Evaluators","html_id":"built-in-evaluators","implicit":true,"key":"Kl2YbmgBKE"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Pydantic Evals provides several ready-made evaluators:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"V8szmAOkO9"}],"key":"hVeNxP4xbA"},{"type":"heading","depth":4,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"1. Exact Matching","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"M5yR2KZztG"}],"identifier":"id-1-exact-matching","label":"1. Exact Matching","html_id":"id-1-exact-matching","implicit":true,"key":"IS9lusiAkr"}],"key":"q08xhMu57W"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Check if output equals expected value\nevaluator = EqualsExpected()\n\nprint(f\"Evaluator: {evaluator}\")","key":"y5jTL3vj5K"},{"type":"output","id":"NYWV_xiNNaiQRxbRqjY3q","data":[{"name":"stdout","output_type":"stream","text":"Evaluator: EqualsExpected()\n"}],"key":"itTKpqS4QB"}],"key":"zkD5hY2vvp"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"2. Type Checking","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LCKWhvAWBu"}],"identifier":"id-2-type-checking","label":"2. Type Checking","html_id":"id-2-type-checking","implicit":true,"key":"Nr8Fi7deVU"}],"key":"Z5MCkzdzpK"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Ensure output is correct type\nevaluator = IsInstance('str')\n\nprint(f\"Evaluator: {evaluator}\")","key":"WOItpXcjKr"},{"type":"output","id":"eCp_6jxmcUKmieixqonzg","data":[{"name":"stdout","output_type":"stream","text":"Evaluator: IsInstance(type_name='str')\n"}],"key":"pcD0lpr3mb"}],"key":"q5TDPuzAGY"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"3. Membership/Contains","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"OZfShGvW8B"}],"identifier":"id-3-membership-contains","label":"3. Membership/Contains","html_id":"id-3-membership-contains","implicit":true,"key":"kD4qnnKDPO"}],"key":"f6QgCM7HdT"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Check if key phrase appears in output\nevaluator = Contains('return policy')\n\nprint(f\"Evaluator: {evaluator}\")","key":"p4HaFv6dAk"},{"type":"output","id":"3iaPgZ8l4_-S2-lhghzY8","data":[{"name":"stdout","output_type":"stream","text":"Evaluator: Contains(value='return policy')\n"}],"key":"cNIqN4odrW"}],"key":"EuacFwaCWY"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"4. Performance Constraints","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GsnsXC9S2I"}],"identifier":"id-4-performance-constraints","label":"4. Performance Constraints","html_id":"id-4-performance-constraints","implicit":true,"key":"U7duk0Lzl9"}],"key":"Bu5CSaVKzP"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Ensure agent responds quickly enough\nevaluator = MaxDuration(seconds=2.0)  # 2 seconds max\n\nprint(f\"Evaluator: {evaluator}\")","key":"yizEWIS3cR"},{"type":"output","id":"brMSFjgFTzMQLo_60V8f-","data":[{"name":"stdout","output_type":"stream","text":"Evaluator: MaxDuration(seconds=2.0)\n"}],"key":"RP59M27UFI"}],"key":"MHehHBBSAn"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Example: Adding Evaluators to Dataset","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"wBCDiVCobp"}],"identifier":"example-adding-evaluators-to-dataset","label":"Example: Adding Evaluators to Dataset","html_id":"example-adding-evaluators-to-dataset","implicit":true,"key":"NPtGjInUPP"}],"key":"co3FJg1uy5"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"intent_dataset_with_evals = Dataset[str, str](\n    name=\"Intent Classification Tests\",\n    cases=[\n        Case(\n            name=\"return_request\",\n            inputs=\"I want to return my order\",\n            expected_output=\"return\"\n        ),\n        Case(\n            name=\"shipping_status\",\n            inputs=\"Where is my package?\",\n            expected_output=\"shipping\"\n        ),\n        Case(\n            name=\"account_question\",\n            inputs=\"How do I reset my password?\",\n            expected_output=\"account\"\n        ),\n    ],\n    evaluators=[\n        EqualsExpected(),  # Applied to all cases\n        MaxDuration(seconds=2.0)  # Response time check\n    ]\n)\n\nprint(f\"Dataset has {len(intent_dataset_with_evals.evaluators)} evaluators\")\nprint(f\"Dataset has {len(intent_dataset_with_evals.cases)} cases\")","key":"r2B9uUs5Mu"},{"type":"output","id":"iCB6LuWJVR-Ff3BI-s0WP","data":[{"name":"stdout","output_type":"stream","text":"Dataset has 2 evaluators\nDataset has 3 cases\n"}],"key":"J4DmH0Y60q"}],"key":"x9O9ftxkfu"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"LLM as Judge: When Correctness is Subjective","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"snS4YYfCbP"}],"identifier":"llm-as-judge-when-correctness-is-subjective","label":"LLM as Judge: When Correctness is Subjective","html_id":"llm-as-judge-when-correctness-is-subjective","implicit":true,"key":"e8tjhL9hD5"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Sometimes there’s no single “correct” answer","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"xYPJ43u4Zj"}],"key":"ptTWw2F9yi"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Example: “Write a friendly response to this complaint”","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"haVGRVaVMb"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Many valid responses exist","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"tQdiLnNaf3"}],"key":"C6wEryr2YF"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Hard to check with deterministic rules","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"QFlna3vaL3"}],"key":"oPA0wRsZ1k"}],"key":"OsN6yvqB0G"}],"key":"YWv3MN9YzD"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Solution: Use another LLM to evaluate","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"ZCqAG53yEt"}],"key":"Rex03tstua"}],"key":"IhaPF7QStX"},{"type":"heading","depth":4,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"LLMJudge Evaluator:","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"Z1Y88nxoQI"}],"identifier":"llmjudge-evaluator","label":"LLMJudge Evaluator:","html_id":"llmjudge-evaluator","implicit":true,"key":"AM3WKm9fy7"}],"key":"KhNWUJpxAy"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"judge = LLMJudge(\n    rubric=(\n        \"Score from 0-10 on friendliness and helpfulness. \"\n        \"Friendly responses should acknowledge the customer's frustration. \"\n        \"Helpful responses should offer concrete next steps.\"\n    ),\n    model='anthropic:claude-haiku-4-5'\n)\n\nprint(\"Created LLMJudge evaluator\")","key":"BoGbEAjYTd"},{"type":"output","id":"SAEPDEm8SpdH5CZBRkMSf","data":[{"name":"stdout","output_type":"stream","text":"Created LLMJudge evaluator\n"}],"key":"RLy85iBANU"}],"key":"sHwF3FuBdC"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"How it works","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BVVgZuFfYC"}],"key":"vFVxX7XMh7"},{"type":"text","value":":","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"r7WUQB0EDa"}],"key":"HU4uffxR2Z"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Your agent generates an output","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"oXsfhp8Jc1"}],"key":"f3Ylaii1q4"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"LLMJudge sends that output + rubric to an LLM","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"Z2suvXerzl"}],"key":"WA2RAObpLB"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"LLM scores the output based on the rubric","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"hUjWMzdELi"}],"key":"iNIz8CXUqb"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Score is recorded in the evaluation report","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"MQ9k8KyZic"}],"key":"ffB7F1i7XU"}],"key":"L7QbMiL81W"}],"key":"vbyYuTjy3k"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Custom Evaluators: Domain-Specific Checks","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"pDjOdwK4uf"}],"identifier":"custom-evaluators-domain-specific-checks","label":"Custom Evaluators: Domain-Specific Checks","html_id":"custom-evaluators-domain-specific-checks","implicit":true,"key":"pHqLlEOCUO"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"You can create custom evaluators by subclassing ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Kzc3DlvSPO"},{"type":"inlineCode","value":"Evaluator","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"N15vlnz22u"},{"type":"text","value":":","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"uAKz2c2Nll"}],"key":"QvGq1I3pzs"}],"key":"vfSnG0ogwp"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"class ContainsURL(Evaluator):\n    \"\"\"Check if output contains a valid URL.\"\"\"\n\n    def evaluate(self, ctx: EvaluatorContext) -> EvaluationReason:\n        output = ctx.output\n        # Simple URL detection\n        has_url = 'http://' in str(output) or 'https://' in str(output)\n\n        return EvaluationReason(\n            value=has_url,\n            explanation=\"URL found\" if has_url else \"No URL found\"\n        )\n\n# Test it\nurl_checker = ContainsURL()\nprint(\"Created custom ContainsURL evaluator\")","key":"l9659r0AEN"},{"type":"output","id":"9GEnLPSJ_16klETgMzq3C","data":[{"name":"stdout","output_type":"stream","text":"Created custom ContainsURL evaluator\n"}],"key":"DRBWnJkcXr"}],"key":"lCa9EvGd0J"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Key points","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ew9Zzvt2YY"}],"key":"cdSqIuXC7T"},{"type":"text","value":":","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"B8PxOkpsvf"}],"key":"O3ImwydnUb"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Implement ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"MAPHKKnxFg"},{"type":"inlineCode","value":"evaluate","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"EXBOkxpD5C"},{"type":"text","value":" method (can be sync or async)","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"M0ApMJJnKf"}],"key":"N9TgkC1YIz"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Access inputs/outputs through ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"XzQRZuLhn3"},{"type":"inlineCode","value":"EvaluatorContext","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"gQsQ8wKlyK"}],"key":"eqB0tyMpnx"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Return ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"UVD4JC8Zt5"},{"type":"inlineCode","value":"EvaluationReason","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"TkTFjyL1TP"},{"type":"text","value":" with value and explanation","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"f94hhyrBV5"}],"key":"utwTCOUYWm"}],"key":"w8slYE2SRz"}],"key":"Nj6z68dtzx"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Exercise 2: Design Evaluators","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"oMRKKuk7qL"}],"identifier":"exercise-2-design-evaluators","label":"Exercise 2: Design Evaluators","html_id":"exercise-2-design-evaluators","implicit":true,"key":"PTSBce8DjO"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"For the sentiment analysis agent from Exercise 1:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"JQ5OJpDaVF"}],"key":"wMcnFhGiUC"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"What ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"R0CXvAYnU1"},{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"deterministic","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"mLcC9RL425"}],"key":"nOqkkCOcO6"},{"type":"text","value":" evaluators would you use?","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"KSN8VcefUT"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Think about checking exact label matches, valid sentiment values","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"Wd6knyPWk5"}],"key":"ArPm2XcOAC"}],"key":"rJxq0MmI2F"}],"key":"bxHXxcjMgO"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"What ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"YcHFXWCSWM"},{"type":"strong","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"subjective","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"BQjxiB2AF4"}],"key":"WZpWkBTQEk"},{"type":"text","value":" aspects might need LLM evaluation?","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"CQGOGNEP7Y"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":8,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Example: When a review has mixed sentiment, is the chosen label reasonable?","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"qgBgXzF3pP"}],"key":"jI5yu9SxrW"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"What would your LLMJudge rubric say?","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"e2ezywtEZG"}],"key":"HX5nLO6Tpk"}],"key":"e4VH7VMvDD"}],"key":"OL97kJxRra"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Design one ","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"FU1hHKsF48"},{"type":"strong","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"custom evaluator","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"kYcZbvJ7Bf"}],"key":"UMJ5GfCXCa"},{"type":"text","value":" for a domain-specific check","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"OiSbTd4Opq"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Example: “Output should be all lowercase” or “Response time should be fast”","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"wSAqAUPrJT"}],"key":"aTjnVH2qhs"}],"key":"lksvbHU3Ye"}],"key":"bv117EOpLG"}],"key":"TGjRxxuWeX"}],"key":"xyBvLYeIvU"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# TODO: Your code here\n# Create evaluators for sentiment analysis\n\n# Example deterministic evaluator\n# sentiment_dataset.evaluators.append(EqualsExpected())\n\n# Example custom evaluator\n# class ValidSentiment(Evaluator):\n#     \"\"\"Check if output is a valid sentiment label.\"\"\"\n#     def evaluate(self, ctx: EvaluatorContext) -> EvaluationReason:\n#         valid_sentiments = {\"positive\", \"negative\", \"neutral\"}\n#         is_valid = ctx.output.lower() in valid_sentiments\n#         return EvaluationReason(\n#             value=is_valid,\n#             explanation=f\"Output is {'valid' if is_valid else 'invalid'} sentiment\"\n#         )","key":"PwJSgZSAtT"},{"type":"output","id":"Voc4pr9jCmt0wXSM_M3z2","data":[],"key":"zj7Cmh1F4U"}],"key":"wrMFXCfmoX"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Running Evaluations: From Code to Reports","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZS4eW3N1Or"}],"identifier":"running-evaluations-from-code-to-reports","label":"Running Evaluations: From Code to Reports","html_id":"running-evaluations-from-code-to-reports","implicit":true,"key":"A6X7IKvpna"}],"key":"bLkGKE5Dll"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The Evaluation Loop","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"chAyYp1u8f"}],"identifier":"the-evaluation-loop","label":"The Evaluation Loop","html_id":"the-evaluation-loop","implicit":true,"key":"SZKsT0CKum"},{"type":"heading","depth":4,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Step 1: Define your task function","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"XZXaf5Nrfg"}],"identifier":"step-1-define-your-task-function","label":"Step 1: Define your task function","html_id":"step-1-define-your-task-function","implicit":true,"key":"OjhRhenIjE"}],"key":"fOo6yCdRIn"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Create a simple intent classifier agent\nsupport_agent = Agent(\n    'anthropic:claude-haiku-4-5',\n    system_prompt=(\n        \"You are a customer support intent classifier. \"\n        \"Classify user messages into one of: return, shipping, account. \"\n        \"Respond with ONLY the classification label, nothing else.\"\n    )\n)\n\nasync def classify_intent(inputs: str) -> str:\n    \"\"\"Our task: classify customer message intent.\"\"\"\n    result = await support_agent.run(inputs)\n    return result.output.lower().strip()\n\nprint(\"Created intent classification agent\")","key":"y7FM1F42Ag"},{"type":"output","id":"4u9g3XRJ-XTAhfvIqQuVT","data":[{"name":"stdout","output_type":"stream","text":"Created intent classification agent\n"}],"key":"HDtm8nLqL4"}],"key":"YLeyXD0hzA"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 2: Run evaluation","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ci26malPWd"}],"identifier":"step-2-run-evaluation","label":"Step 2: Run evaluation","html_id":"step-2-run-evaluation","implicit":true,"key":"j3JVOu493c"}],"key":"nOZKiaiNFf"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Run experiment\nreport = await intent_dataset_with_evals.evaluate(\n    task=classify_intent,\n    max_concurrency=3,  # Run 3 cases in parallel\n    progress=True  # Show progress bar\n)\n\nprint(\"\\nEvaluation complete!\")\nprint(f\"Evaluated {len(report.cases)} cases\")","key":"d8T9q6E0cR"},{"type":"output","id":"Z3V_xzf0pahdQ391m6jjt","data":[{"output_type":"display_data","metadata":{},"data":{"application/vnd.jupyter.widget-view+json":{"content":"{\"model_id\":\"22c255567d3f4994bdf857d217e2e00a\",\"version_major\":2,\"version_minor\":0}","content_type":"application/vnd.jupyter.widget-view+json"},"text/plain":{"content":"Output()","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"text/html":{"content":"<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\"></pre>\n","content_type":"text/html"},"text/plain":{"content":"","content_type":"text/plain"}}},{"name":"stdout","output_type":"stream","text":"\nEvaluation complete!\nEvaluated 3 cases\n"}],"key":"NIMK4Wk5S8"}],"key":"cjGyzyjUvE"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 3: Analyze results","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Yvq7Ichb9f"}],"identifier":"step-3-analyze-results","label":"Step 3: Analyze results","html_id":"step-3-analyze-results","implicit":true,"key":"hgGxdjByTZ"}],"key":"JjV78xGEcL"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Print formatted report\nreport.print()\n\nprint(\"\\n\" + \"=\"*50)\nprint(\"Detailed results:\")\nprint(\"=\"*50)\n\n# Or get the data programmatically\nfor case in report.cases:\n    print(f\"\\nCase: {case.name}\")\n    print(f\"  Input: {case.inputs}\")\n    print(f\"  Output: {case.output}\")\n    print(f\"  Expected: {case.expected_output}\")\n    print(f\"  Assertions: {case.assertions}\")\n    print(f\"  All passed: {all(case.assertions.values())}\")","key":"ysX2ZSHb6v"},{"type":"output","id":"abDF5455IXw5Lvs2H2Z_8","data":[{"output_type":"display_data","metadata":{},"data":{"text/html":{"content":"<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\"><span style=\"font-style: italic\">    Evaluation Summary: classify_intent     </span>\n┏━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━┳━━━━━━━━━━┓\n┃<span style=\"font-weight: bold\"> Case ID          </span>┃<span style=\"font-weight: bold\"> Assertions </span>┃<span style=\"font-weight: bold\"> Duration </span>┃\n┡━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━╇━━━━━━━━━━┩\n│<span style=\"font-weight: bold\"> return_request   </span>│ <span style=\"color: #008000; text-decoration-color: #008000\">✔✔</span>         │  736.7ms │\n├──────────────────┼────────────┼──────────┤\n│<span style=\"font-weight: bold\"> shipping_status  </span>│ <span style=\"color: #008000; text-decoration-color: #008000\">✔✔</span>         │     1.6s │\n├──────────────────┼────────────┼──────────┤\n│<span style=\"font-weight: bold\"> account_question </span>│ <span style=\"color: #008000; text-decoration-color: #008000\">✔✔</span>         │     1.0s │\n├──────────────────┼────────────┼──────────┤\n│<span style=\"font-weight: bold\"> </span><span style=\"font-weight: bold; font-style: italic\">Averages</span><span style=\"font-weight: bold\">         </span>│ 100.0% <span style=\"color: #008000; text-decoration-color: #008000\">✔</span>   │     1.1s │\n└──────────────────┴────────────┴──────────┘\n</pre>\n","content_type":"text/html"},"text/plain":{"content":"\u001b[3m    Evaluation Summary: classify_intent     \u001b[0m\n┏━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━┳━━━━━━━━━━┓\n┃\u001b[1m \u001b[0m\u001b[1mCase ID         \u001b[0m\u001b[1m \u001b[0m┃\u001b[1m \u001b[0m\u001b[1mAssertions\u001b[0m\u001b[1m \u001b[0m┃\u001b[1m \u001b[0m\u001b[1mDuration\u001b[0m\u001b[1m \u001b[0m┃\n┡━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━╇━━━━━━━━━━┩\n│\u001b[1m \u001b[0m\u001b[1mreturn_request  \u001b[0m\u001b[1m \u001b[0m│ \u001b[32m✔\u001b[0m\u001b[32m✔\u001b[0m         │  736.7ms │\n├──────────────────┼────────────┼──────────┤\n│\u001b[1m \u001b[0m\u001b[1mshipping_status \u001b[0m\u001b[1m \u001b[0m│ \u001b[32m✔\u001b[0m\u001b[32m✔\u001b[0m         │     1.6s │\n├──────────────────┼────────────┼──────────┤\n│\u001b[1m \u001b[0m\u001b[1maccount_question\u001b[0m\u001b[1m \u001b[0m│ \u001b[32m✔\u001b[0m\u001b[32m✔\u001b[0m         │     1.0s │\n├──────────────────┼────────────┼──────────┤\n│\u001b[1m \u001b[0m\u001b[1;3mAverages\u001b[0m\u001b[1m        \u001b[0m\u001b[1m \u001b[0m│ 100.0% \u001b[32m✔\u001b[0m   │     1.1s │\n└──────────────────┴────────────┴──────────┘\n","content_type":"text/plain"}}},{"name":"stdout","output_type":"stream","text":"\n==================================================\nDetailed results:\n==================================================\n\nCase: return_request\n  Input: I want to return my order\n  Output: return\n  Expected: return\n  Assertions: {'EqualsExpected': EvaluationResult(name='EqualsExpected', value=True, reason=None, source=EvaluatorSpec(name='EqualsExpected', arguments=None)), 'MaxDuration': EvaluationResult(name='MaxDuration', value=True, reason=None, source=EvaluatorSpec(name='MaxDuration', arguments=(2.0,)))}\n  All passed: True\n\nCase: shipping_status\n  Input: Where is my package?\n  Output: shipping\n  Expected: shipping\n  Assertions: {'EqualsExpected': EvaluationResult(name='EqualsExpected', value=True, reason=None, source=EvaluatorSpec(name='EqualsExpected', arguments=None)), 'MaxDuration': EvaluationResult(name='MaxDuration', value=True, reason=None, source=EvaluatorSpec(name='MaxDuration', arguments=(2.0,)))}\n  All passed: True\n\nCase: account_question\n  Input: How do I reset my password?\n  Output: account\n  Expected: account\n  Assertions: {'EqualsExpected': EvaluationResult(name='EqualsExpected', value=True, reason=None, source=EvaluatorSpec(name='EqualsExpected', arguments=None)), 'MaxDuration': EvaluationResult(name='MaxDuration', value=True, reason=None, source=EvaluatorSpec(name='MaxDuration', arguments=(2.0,)))}\n  All passed: True\n"}],"key":"vkRSfjYeGK"}],"key":"Y4AQadirHy"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Visualizing Results with Logfire","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DezF46zGYT"}],"identifier":"visualizing-results-with-logfire","label":"Visualizing Results with Logfire","html_id":"visualizing-results-with-logfire","implicit":true,"key":"sfMCnTpmra"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"While the printed reports are useful, ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"jHztaAyjWX"},{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Pydantic Logfire","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"GV7IUbwnBr"}],"key":"G62cgapcpN"},{"type":"text","value":" provides a web UI for visualizing and analyzing evaluation results over time.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Fq7QChhuhr"}],"key":"cFCm5Ks2jZ"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Why use Logfire?","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Yvkl1xrHVG"}],"key":"ws4kNhcUbn"}],"key":"Js9yPH7cS7"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Interactive dashboards for evaluation metrics","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"qSuBpOOSK7"}],"key":"QxceHu97nI"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Trace exploration for debugging failed cases","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"FkWIMJOrBg"}],"key":"lOvG5ElHU9"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Track trends across multiple evaluation runs","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"FxVjc0K5bp"}],"key":"x86bi7DoeZ"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Team collaboration and sharing results","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"T8jQrH9vlv"}],"key":"u6ZQAUkAqT"}],"key":"GhmnDJGNlO"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Let’s configure Logfire integration:","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"WV0tARUod1"}],"key":"mSnNGyVWRw"}],"key":"cCGU9CMvSS"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Note","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"et9Zdu8fBn"}],"key":"wPma8AlZaA"},{"type":"text","value":": With Logfire configured, all subsequent evaluations will automatically send their results to the Logfire web UI. You can then:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tc2JpAYhos"}],"key":"GBloalusel"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":2,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"View evaluation reports in an interactive dashboard","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"p9eahzIVwM"}],"key":"F82msA9cD9"},{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Explore individual traces and spans","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"BfmSm8o4Tm"}],"key":"UppcMvaZsb"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Compare results across multiple runs","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"gXDQaGoYbi"}],"key":"x0SwQ9c5qY"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Set up alerts for failing evaluations","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"pWUIWnBRMV"}],"key":"vSpUODnJCe"}],"key":"uDo25nMyel"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Visit ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"NAcNm9EtNz"},{"type":"link","url":"https://logfire.pydantic.dev","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"logfire​.pydantic​.dev","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"HhrpOiDHOI"}],"urlSource":"https://logfire.pydantic.dev","key":"yqznm36iFZ"},{"type":"text","value":" to view your evaluation results.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"SN4PfShqlE"}],"key":"rXniZYGLlX"},{"type":"heading","depth":3,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Understanding Evaluation Results","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"tbbr5I2McX"}],"identifier":"understanding-evaluation-results","label":"Understanding Evaluation Results","html_id":"understanding-evaluation-results","implicit":true,"key":"zrGYBoH6NK"}],"key":"dQowDvA43A"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import logfire\n\n# Configure Logfire\n# This will automatically send evaluation results to Logfire if token is present\nlogfire.configure(\n    send_to_logfire='if-token-present',\n\n)\n\nprint(\"Logfire configured!\")\nprint(\"Future evaluations will automatically appear in Logfire web UI\")","key":"rJchKXUdIh"},{"type":"output","id":"lI-TtXK0pV3TX5mwvtKlZ","data":[{"name":"stdout","output_type":"stream","text":"Logfire configured!\nFuture evaluations will automatically appear in Logfire web UI\n"},{"name":"stderr","output_type":"stream","text":"\u001b[1mLogfire\u001b[0m project URL: \u001b]8;id=50384;https://logfire-us.pydantic.dev/sglyon/cap-6318-example\u001b\\\u001b[4;36mhttps://logfire-us.pydantic.dev/sglyon/cap-6318-example\u001b[0m\u001b]8;;\u001b\\\n"}],"key":"wsQDzfHuor"}],"key":"zVitzIrJcH"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Comparing Experiments: Tracking Improvements","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"AugwZjemKi"}],"identifier":"comparing-experiments-tracking-improvements","label":"Comparing Experiments: Tracking Improvements","html_id":"comparing-experiments-tracking-improvements","implicit":true,"key":"xH9ujEZoNa"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Let’s modify our agent and compare results:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"DhIjZXXG2A"}],"key":"Imr9WdSLqc"}],"key":"P5wpmHOg2W"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Create an improved agent with better prompt\nimproved_agent = Agent(\n    'anthropic:claude-haiku-4-5',\n    system_prompt=(\n        \"You are a customer support intent classifier. \"\n        \"Classify user messages into exactly one of these categories:\\n\"\n        \"- return: for return/refund requests\\n\"\n        \"- shipping: for delivery/tracking questions\\n\"\n        \"- account: for login/password/profile issues\\n\\n\"\n        \"Respond with ONLY the classification label in lowercase, nothing else.\"\n    )\n)\n\nasync def improved_classify_intent(inputs: str) -> str:\n    \"\"\"Improved task function.\"\"\"\n    result = await improved_agent.run(inputs)\n    return result.output.lower().strip()\n\n# Run evaluation with improved agent\nimproved_report = await intent_dataset_with_evals.evaluate(\n    task=improved_classify_intent,\n    max_concurrency=3,\n    progress=True\n)","key":"rbY6289pwm"},{"type":"output","id":"bj61KnyHrlzVZcxrPFfg_","data":[{"output_type":"display_data","metadata":{},"data":{"application/vnd.jupyter.widget-view+json":{"content":"{\"model_id\":\"5ce63410f23e431f806c69f6ff437550\",\"version_major\":2,\"version_minor\":0}","content_type":"application/vnd.jupyter.widget-view+json"},"text/plain":{"content":"Output()","content_type":"text/plain"}}},{"name":"stdout","output_type":"stream","text":"20:11:13.865 evaluate improved_classify_intent\n20:11:13.869   case: return_request\n20:11:13.869     execute improved_classify_intent\n20:11:13.871   case: shipping_status\n20:11:13.871     execute improved_classify_intent\n20:11:13.872   case: account_question\n20:11:13.872     execute improved_classify_intent\n"},{"name":"stdout","output_type":"stream","text":"20:11:14.569     evaluator: EqualsExpected\n20:11:14.569     evaluator: MaxDuration\n               case: return_request\n20:11:14.570     evaluator: EqualsExpected\n20:11:14.570     evaluator: MaxDuration\n"},{"name":"stdout","output_type":"stream","text":"               case: shipping_status\n20:11:14.963     evaluator: EqualsExpected\n20:11:14.963     evaluator: MaxDuration\n"},{"output_type":"display_data","metadata":{},"data":{"text/html":{"content":"<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\"></pre>\n","content_type":"text/html"},"text/plain":{"content":"","content_type":"text/plain"}}}],"key":"HZgsFQXA3p"}],"key":"Jsn8NQPRek"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Compare against baseline\nimproved_report.print(baseline=report)","key":"nGXlIlgJMy"},{"type":"output","id":"l27_UOnSSZ7guvdG9C5sn","data":[{"output_type":"display_data","metadata":{},"data":{"text/html":{"content":"<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\"><span style=\"font-style: italic\">     Evaluation Diff: classify_intent → improved_classify_intent      </span>\n┏━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃<span style=\"font-weight: bold\"> Case ID          </span>┃<span style=\"font-weight: bold\"> Assertions </span>┃<span style=\"font-weight: bold\">                           Duration </span>┃\n┡━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩\n│<span style=\"font-weight: bold\"> account_question </span>│ <span style=\"color: #008000; text-decoration-color: #008000\">✔✔</span>         │ <span style=\"color: #008000; text-decoration-color: #008000\">1.0s → 696.5ms (-320.9ms / -31.5%)</span> │\n├──────────────────┼────────────┼────────────────────────────────────┤\n│<span style=\"font-weight: bold\"> return_request   </span>│ <span style=\"color: #008000; text-decoration-color: #008000\">✔✔</span>         │                  736.7ms → 700.2ms │\n├──────────────────┼────────────┼────────────────────────────────────┤\n│<span style=\"font-weight: bold\"> shipping_status  </span>│ <span style=\"color: #008000; text-decoration-color: #008000\">✔✔</span>         │    <span style=\"color: #008000; text-decoration-color: #008000\">1.6s → 1.1s (-544.0ms / -33.3%)</span> │\n├──────────────────┼────────────┼────────────────────────────────────┤\n│<span style=\"font-weight: bold\"> </span><span style=\"font-weight: bold; font-style: italic\">Averages</span><span style=\"font-weight: bold\">         </span>│ 100.0% <span style=\"color: #008000; text-decoration-color: #008000\">✔</span>   │ <span style=\"color: #008000; text-decoration-color: #008000\">1.1s → 829.4ms (-300.5ms / -26.6%)</span> │\n└──────────────────┴────────────┴────────────────────────────────────┘\n</pre>\n","content_type":"text/html"},"text/plain":{"content":"\u001b[3m     Evaluation Diff: classify_intent → improved_classify_intent      \u001b[0m\n┏━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃\u001b[1m \u001b[0m\u001b[1mCase ID         \u001b[0m\u001b[1m \u001b[0m┃\u001b[1m \u001b[0m\u001b[1mAssertions\u001b[0m\u001b[1m \u001b[0m┃\u001b[1m \u001b[0m\u001b[1m                          Duration\u001b[0m\u001b[1m \u001b[0m┃\n┡━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩\n│\u001b[1m \u001b[0m\u001b[1maccount_question\u001b[0m\u001b[1m \u001b[0m│ \u001b[32m✔\u001b[0m\u001b[32m✔\u001b[0m         │ \u001b[32m1.0s → 696.5ms (-320.9ms / -31.5%)\u001b[0m │\n├──────────────────┼────────────┼────────────────────────────────────┤\n│\u001b[1m \u001b[0m\u001b[1mreturn_request  \u001b[0m\u001b[1m \u001b[0m│ \u001b[32m✔\u001b[0m\u001b[32m✔\u001b[0m         │                  736.7ms → 700.2ms │\n├──────────────────┼────────────┼────────────────────────────────────┤\n│\u001b[1m \u001b[0m\u001b[1mshipping_status \u001b[0m\u001b[1m \u001b[0m│ \u001b[32m✔\u001b[0m\u001b[32m✔\u001b[0m         │    \u001b[32m1.6s → 1.1s (-544.0ms / -33.3%)\u001b[0m │\n├──────────────────┼────────────┼────────────────────────────────────┤\n│\u001b[1m \u001b[0m\u001b[1;3mAverages\u001b[0m\u001b[1m        \u001b[0m\u001b[1m \u001b[0m│ 100.0% \u001b[32m✔\u001b[0m   │ \u001b[32m1.1s → 829.4ms (-300.5ms / -26.6%)\u001b[0m │\n└──────────────────┴────────────┴────────────────────────────────────┘\n","content_type":"text/plain"}}}],"key":"lruUeYknl0"}],"key":"vhgd08BwJK"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Exercise 3: Run Your First Evaluation","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JWHWdy6qhR"}],"identifier":"exercise-3-run-your-first-evaluation","label":"Exercise 3: Run Your First Evaluation","html_id":"exercise-3-run-your-first-evaluation","implicit":true,"key":"b2tdcUl8yy"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Using the sentiment analysis agent you designed in Exercise 1:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"zZceDK9Zhp"}],"key":"MxMYu6kmj1"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Create an agent that performs sentiment classification","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ZJ68UWh4Hn"}],"key":"rWb2RXkq1A"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Use your dataset from Exercise 1 (add more cases if needed)","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"ccO0Mug9gb"}],"key":"MHtvLvQaEk"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Add 2-3 evaluators (mix of built-in and custom from Exercise 2)","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"LT0vvS7w9b"}],"key":"R66BBdZdLg"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Run the evaluation using ","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"qpbPCPZUbp"},{"type":"inlineCode","value":"await dataset.evaluate(task=your_function)","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"Tz3aDfGcOn"}],"key":"DuN7UlZu1G"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Interpret the results:","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"KTqhLiFrb4"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":10,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Which cases passed/failed?","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"KohgUDZU1D"}],"key":"VHJuEBGVJb"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"What patterns do you notice?","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"BYexa0SxsC"}],"key":"RGmZxFcnWP"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"What would you improve about the agent or the test cases?","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"Jp7Fpaovd9"}],"key":"EKV3vNmPBj"}],"key":"fAl6wUzFkf"}],"key":"B5I11MdF7A"}],"key":"UcMnAKg2EV"}],"key":"TvmJx2NI4y"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# TODO: Your code here","key":"iM5zhGinaM"},{"type":"output","id":"T3YBFGEIdTr-agyZwEA-f","data":[],"key":"zkNUD0NJBf"}],"key":"fmmpgWBBkR"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Advanced Topics: Span-Based Evaluation and Dataset Generation","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"UDTtJB8Zvt"}],"identifier":"advanced-topics-span-based-evaluation-and-dataset-generation","label":"Advanced Topics: Span-Based Evaluation and Dataset Generation","html_id":"advanced-topics-span-based-evaluation-and-dataset-generation","implicit":true,"key":"m1yA8Qgi1f"}],"key":"KTXGLPTopB"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Span-Based Evaluation: Evaluating the Process, Not Just the Output","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ltW4s2LUtB"}],"identifier":"span-based-evaluation-evaluating-the-process-not-just-the-output","label":"Span-Based Evaluation: Evaluating the Process, Not Just the Output","html_id":"span-based-evaluation-evaluating-the-process-not-just-the-output","implicit":true,"key":"V8xs3HQi0Z"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The Problem","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"is2vtzsZqD"}],"key":"UgIWsaE5kN"},{"type":"text","value":": Sometimes the final answer is correct, but the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"YjKPfx9VlP"},{"type":"emphasis","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"how","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"E82L9lVdgg"}],"key":"BWVXN82GQG"},{"type":"text","value":" matters","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"g2Ts8a6nAu"}],"key":"qgQoVKFf9O"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Example: Math problem solving","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"xQOm2YkNJL"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Output: “42” ✓ Correct!","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"tzbnVbdq01"}],"key":"eI17UBJ1xd"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"But did the agent:","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"oDQjFfLMMJ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":8,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Use the right formula?","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"bApYfXkurl"}],"key":"lbkXf1GUaC"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Show its work?","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"ZOWZqsOAmh"}],"key":"zKtCHd4DvC"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Make calculation errors that happened to cancel out?","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"vMluNSgOjx"}],"key":"jGqs1PCD6V"}],"key":"o9bEmP6UrL"}],"key":"gEX8ycoyUE"}],"key":"ThcWj7ySuk"}],"key":"UOcDO7QuX1"}],"key":"A10xMd6sz2"},{"type":"paragraph","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"strong","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Spans","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"r1Xg5ogRrE"}],"key":"tuZ7aji3dr"},{"type":"text","value":": Execution traces from OpenTelemetry","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"bvNeEDK7SC"}],"key":"KJL4KIMw1q"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":14,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Capture what the agent did internally","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"jcJL9ZJ5JR"}],"key":"V6GXIIboeG"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Tool calls made","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"FIzyjrlsSJ"}],"key":"YXyMn2mn3a"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"LLM requests and responses","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"SiQNO7SCtF"}],"key":"k0sIU3oahE"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Intermediate reasoning steps","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"RcTs5OyLNI"}],"key":"d8rFzlvZNT"}],"key":"XcPcgcHyGL"},{"type":"heading","depth":4,"position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"HasMatchingSpan Evaluator:","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"cQf5gf8mFn"}],"identifier":"hasmatchingspan-evaluator","label":"HasMatchingSpan Evaluator:","html_id":"hasmatchingspan-evaluator","implicit":true,"key":"QylXuPkLkn"}],"key":"NppcmCBHzm"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Ensure agent called a specific tool\nspan_evaluator = HasMatchingSpan(\n    query={'name_contains': 'calculator_tool'},\n    evaluation_name='used_calculator'\n)\n\nprint(\"Created span-based evaluator\")\nprint(\"This evaluator checks that a span named 'calculator_tool' was called\")","key":"WDUdG6wUTH"},{"type":"output","id":"fRshR00i4bhU9-7ypSU9g","data":[],"key":"gi0u10z5Ts"}],"key":"hOeVH3AwpA"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Why this matters","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xUeoO58tnc"}],"key":"E1bqmL3Nge"},{"type":"text","value":":","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Cwt7YalFE8"}],"key":"KvLcheSLjL"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Catches “lucky guesses” where agent gets answer right for wrong reasons","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"F3qNs3lZvd"}],"key":"EV2PRQkFwB"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Validates agent is following intended reasoning process","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"a4sHU90c2x"}],"key":"bYvCeRs9TY"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Useful for multi-step tasks where process correctness matters","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"YKK21YU30V"}],"key":"eT6o3j1LTA"}],"key":"L65MEU4hQD"}],"key":"pGq6FmlV6b"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Generating Datasets with LLMs","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"EEnqZx2S4C"}],"identifier":"generating-datasets-with-llms","label":"Generating Datasets with LLMs","html_id":"generating-datasets-with-llms","implicit":true,"key":"BPG09tPD8i"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The Challenge","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"HvNW6YCzO5"}],"key":"v4SglcWQhb"},{"type":"text","value":": Creating comprehensive test datasets is tedious","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"BNHYvNnk8P"}],"key":"qDScTxcvvg"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Need diverse inputs covering edge cases","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"I7Z3fvSR7k"}],"key":"RxeHlBefsz"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Need correct expected outputs","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"kl7KhHPmiS"}],"key":"CtTedQo2Fw"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Manual creation doesn’t scale","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"athksaf9H7"}],"key":"mQfx52VM5E"}],"key":"aeBZJ7nO8H"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"strong","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Solution","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"Kcxeq7K2ti"}],"key":"sN0NVE3EVA"},{"type":"text","value":": Use an LLM to generate test cases","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"tnKOeIElZU"}],"key":"Bu1cdTV57p"}],"key":"Gm7q3rbyzQ"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from pydantic_evals.generation import generate_dataset\n\n# Generate dataset for sentiment analysis\ngenerated_dataset = await generate_dataset(\n    dataset_type=Dataset[str, str],  # Input and output types\n    n_examples=5,  # Generate 5 test cases\n    extra_instructions=(\n        \"Create diverse restaurant reviews with clear sentiment. \"\n        \"Input should be a restaurant review. \"\n        \"Output should be the sentiment: positive, negative, or neutral.\"\n    ),\n    model='anthropic:claude-haiku-4-5'\n)\n\nprint(f\"Generated {len(generated_dataset.cases)} test cases\")\nfor i, case in enumerate(generated_dataset.cases[:3]):\n    print(f\"\\nCase {i+1}:\")\n    print(f\"  Input: {case.inputs}\")\n    print(f\"  Expected: {case.expected_output}\")","key":"QXS723HDHv"},{"type":"output","id":"HC-xlZAJXhxBGa-pcjMd0","data":[],"key":"NQqvRaUEP5"}],"key":"hJz7aUN0Eg"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"How it works","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"I7VSUsIAu9"}],"key":"iJYcJaGXJ2"},{"type":"text","value":":","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bRJxu92smd"}],"key":"npNNRKr2P0"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"You specify the dataset type with input/output types (e.g., ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"CmuDxGqX8m"},{"type":"inlineCode","value":"Dataset[str, str]","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"uAUPPBxRtM"},{"type":"text","value":")","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"yGJfttEVVa"}],"key":"BZgiyX2YKG"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"LLM generates diverse test scenarios based on your instructions","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"opvgeAqDOj"}],"key":"dWkZmqm1Yq"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Returns properly structured ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"zfmjQeL0gZ"},{"type":"inlineCode","value":"Dataset","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"wKrX50yvWK"},{"type":"text","value":" object with generated cases","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"nj3b1zi06y"}],"key":"nlMDgnmafa"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Can optionally save to file for version control (using ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"HBv1O8B7uY"},{"type":"inlineCode","value":"path","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"VjWXI6Ya5N"},{"type":"text","value":" parameter)","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"VNiu5ZK8gs"}],"key":"iSLNiTJtl8"}],"key":"hM2TLIl5R7"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"strong","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Best practices","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"mGZYFdd4YK"}],"key":"ONA7wDVpHL"},{"type":"text","value":":","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"FRKiopR1zI"}],"key":"IM9xPxauP4"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":10,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Review generated cases before using","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"iVbSG6Mm2H"}],"key":"NE1j2NWZIW"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Mix generated and hand-crafted cases","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"XK7l1u3q1O"}],"key":"cK2fOY2Thp"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Regenerate periodically to expand coverage","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"YTJQ2yxkoe"}],"key":"gIoEjIyW7Q"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Use ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"K809HZ92Hy"},{"type":"inlineCode","value":"extra_instructions","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"orevTeqvhW"},{"type":"text","value":" to guide the LLM toward specific edge cases","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"uBhZE7EH8O"}],"key":"ulRvWE6yl9"}],"key":"XKoRwU7HUI"}],"key":"i4YT6OMxuG"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Evaluating RAG Systems: A Two-Stage Challenge","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GblBUf0Dc3"}],"identifier":"evaluating-rag-systems-a-two-stage-challenge","label":"Evaluating RAG Systems: A Two-Stage Challenge","html_id":"evaluating-rag-systems-a-two-stage-challenge","implicit":true,"key":"mGNSoFPGg6"}],"key":"w3hWHyepyg"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"What is RAG?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tdyOgQ1hqN"}],"identifier":"what-is-rag","label":"What is RAG?","html_id":"what-is-rag","implicit":true,"key":"QAZqjwlkax"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"RAG = Retrieval-Augmented Generation","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"iKpXTpVFZj"}],"key":"pcRQIMBxim"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Common pattern for AI agents that need to answer questions about documents/data","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"zh2fDodI7Q"}],"key":"suKdUQ47da"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Two stages:","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"GMkXPZ24vL"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"strong","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Retrieval","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"L01NLp0C2M"}],"key":"peP2owA6od"},{"type":"text","value":": Find relevant documents/passages from knowledge base","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"VJi3updlqe"}],"key":"IIMxiXeB6N"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"strong","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Generation","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"kmIMPwQhKv"}],"key":"UjxN1OtuLD"},{"type":"text","value":": Use retrieved context to generate answer","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"vdS3Qvze2y"}],"key":"t0ihWu1RvH"}],"key":"F6fIXgDHdE"}],"key":"L68k3ilATD"}],"key":"i8egTPozf2"},{"type":"heading","depth":4,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Why RAG Evaluation is Different","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"DowjYBlFOd"}],"identifier":"why-rag-evaluation-is-different","label":"Why RAG Evaluation is Different","html_id":"why-rag-evaluation-is-different","implicit":true,"key":"AXPSl4gwKA"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":11,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Traditional evaluation: just check the final answer","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"OiRU4yN0NS"}],"key":"CI3bajRkRw"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"RAG evaluation: need to check ","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"vY0VUsCGlF"},{"type":"emphasis","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"both","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"SFjFmoFHd2"}],"key":"aig7d8phRD"},{"type":"text","value":" stages","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"sr8vWBfA8E"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":13,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Is the retrieval finding the right documents?","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"RCmct9s9uc"}],"key":"RazR6RySMy"},{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Is the generation using those documents correctly?","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"GqNrbQTM0i"}],"key":"HTdGfiMRTF"}],"key":"PoVgGOwhhh"}],"key":"mdSF9VUZal"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Failure can happen at either stage (or both!)","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"FaSgWphkGj"}],"key":"bNcyzc0k8u"}],"key":"kByuP3TJWs"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"strong","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Example Failure Modes","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"lW0tfdFmzb"}],"key":"Nt7THDOMwG"},{"type":"text","value":":","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"e11nDgoMrI"}],"key":"tUcffKKZMY"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":18,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"✓ Retrieval works, ✗ Generation fails: Found right docs, but hallucinated answer","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"DGUR6NrsZx"}],"key":"Bd1gV65lcS"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"✗ Retrieval fails, ✓ Generation works: Couldn’t find relevant docs, so generated plausible but wrong answer","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"kuMdr5sPGJ"}],"key":"yDQMGOesBL"},{"type":"listItem","spread":true,"position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"✗ Both fail: Retrieved irrelevant docs ","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"IoO60SDMKH"},{"type":"emphasis","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"and","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"F4Dbzh6ba4"}],"key":"fACv8gHwuK"},{"type":"text","value":" made up information","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"bAEPhjMHDE"}],"key":"t1iE7T4Ecr"}],"key":"aVgGK7eKdu"}],"key":"ZyA5dvz0Cx"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"RAG Evaluation Metrics","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Vofa1rZL90"}],"identifier":"rag-evaluation-metrics","label":"RAG Evaluation Metrics","html_id":"rag-evaluation-metrics","implicit":true,"key":"fW2D5HX5vO"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Retrieval Metrics","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"kIBxZkBkUs"}],"key":"fy9SAC6jPp"},{"type":"text","value":" (Is the retrieval working?)","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"yiiDYNk7Sa"}],"key":"EzqYVi8vHr"}],"key":"OMJrdlUOvl"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"class PrecisionAtK(Evaluator):\n    \"\"\"Check if retrieved documents are relevant.\"\"\"\n\n    def __init__(self, k: int = 5):\n        self.k = k\n\n    def evaluate(self, ctx: EvaluatorContext) -> EvaluationReason:\n        # Assume ctx.metadata contains retrieved doc IDs and ground truth\n        retrieved_docs = ctx.metadata.get('retrieved_doc_ids', [])[:self.k]\n        relevant_docs = ctx.metadata.get('relevant_doc_ids', [])\n\n        relevant_retrieved = set(retrieved_docs) & set(relevant_docs)\n        precision = len(relevant_retrieved) / self.k if self.k > 0 else 0\n\n        return EvaluationReason(\n            value=precision,\n            explanation=f\"Retrieved {len(relevant_retrieved)}/{self.k} relevant docs\"\n        )\n\nclass RecallAtK(Evaluator):\n    \"\"\"Check if all relevant documents were found.\"\"\"\n\n    def __init__(self, k: int = 5):\n        self.k = k\n\n    def evaluate(self, ctx: EvaluatorContext) -> EvaluationReason:\n        retrieved_docs = ctx.metadata.get('retrieved_doc_ids', [])[:self.k]\n        relevant_docs = ctx.metadata.get('relevant_doc_ids', [])\n\n        relevant_retrieved = set(retrieved_docs) & set(relevant_docs)\n        recall = len(relevant_retrieved) / len(relevant_docs) if len(relevant_docs) > 0 else 0\n\n        return EvaluationReason(\n            value=recall,\n            explanation=f\"Found {len(relevant_retrieved)}/{len(relevant_docs)} relevant docs\"\n        )\n\nprint(\"Created RAG retrieval evaluators\")","key":"HEJdjAU1Ve"},{"type":"output","id":"qvSXFkypc4pAR_OJeze5N","data":[],"key":"wnannEu0Mp"}],"key":"J4Z8Huhy5q"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Generation Metrics","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"sxeyORjhmb"}],"key":"ezSLwJdCYp"},{"type":"text","value":" (Is the generation working?)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"c3DjKauZIV"}],"key":"j2hmogaHNV"}],"key":"CRubhC4N6p"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"class Faithfulness(Evaluator):\n    \"\"\"Check if answer is grounded in retrieved context.\"\"\"\n\n    async def evaluate(self, ctx: EvaluatorContext) -> EvaluationReason:\n        answer = ctx.output\n        context = ctx.metadata.get('retrieved_context', '')\n\n        # Use LLM to judge faithfulness\n        judge = Agent('anthropic:claude-haiku-4-5')\n        result = await judge.run(\n            f\"Context: {context}\\n\\n\"\n            f\"Answer: {answer}\\n\\n\"\n            f\"Is the answer fully supported by the context? \"\n            f\"Respond with YES, NO, or PARTIAL and explain why.\"\n        )\n\n        assessment = result.data\n        is_faithful = assessment.startswith('YES')\n\n        return EvaluationReason(\n            value=is_faithful,\n            explanation=assessment\n        )\n\nprint(\"Created Faithfulness evaluator\")","key":"BxVhzaQKh4"},{"type":"output","id":"xmSQb_QG2lLDUJdBaNkob","data":[],"key":"FzfgNDaE4b"}],"key":"HfDagEwZFn"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Best Practices for RAG Evaluation","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"u3OuJGstAl"}],"identifier":"best-practices-for-rag-evaluation","label":"Best Practices for RAG Evaluation","html_id":"best-practices-for-rag-evaluation","implicit":true,"key":"gpKpWxIgX5"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"1. Evaluate Stages Independently","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"QCxk2xPFZe"}],"key":"f36kZGjN5W"}],"key":"XvSAiyfGXC"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Create separate datasets for retrieval and generation to pinpoint where failures occur.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"uLZt8D0VQu"}],"key":"vlSp5KhAzF"}],"key":"Fuyb0rLFgA"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Example: Retrieval evaluation dataset\nretrieval_dataset = Dataset(\n    name=\"Retrieval Quality\",\n    cases=[\n        Case(\n            inputs={\"query\": \"What are the return policies?\"},\n            metadata={\n                \"relevant_doc_ids\": [\"doc_42\", \"doc_87\"],  # Ground truth\n                \"retrieved_doc_ids\": [\"doc_42\", \"doc_87\", \"doc_13\", \"doc_99\", \"doc_5\"],  # Simulated retrieval\n            }\n        ),\n    ],\n    evaluators=[\n        PrecisionAtK(k=5),\n        RecallAtK(k=5),\n    ]\n)\n\nprint(\"Created retrieval evaluation dataset\")","key":"lrBUrnsugB"},{"type":"output","id":"ze-W6EUDrnk_0zH97vJv0","data":[],"key":"XtOkifQgAf"}],"key":"x5rKSRc5Y9"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Why separate?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"EKb8lkMwlg"}],"key":"PAqzJQe2Ww"}],"key":"pSyUxx53Vv"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":2,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Pinpoints where failures occur","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"wp2OOPK7Ym"}],"key":"bLUyEERdRU"},{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Can optimize retrieval and generation independently","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"behBteWht4"}],"key":"dydnvUajBf"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Clearer diagnosis: “Our retrieval is great but generation hallucinates” vs “Both need work”","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"K23sXeLEye"}],"key":"cISYVq8zCo"}],"key":"ndtGPBko4e"}],"key":"N418sgqBn6"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Exercise: Design RAG Evaluation","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DVbD1t6GWr"}],"identifier":"exercise-design-rag-evaluation","label":"Exercise: Design RAG Evaluation","html_id":"exercise-design-rag-evaluation","implicit":true,"key":"ywDrzTqEJz"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Scenario","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"sLC7daVOpy"}],"key":"tCRC9aDdrO"},{"type":"text","value":": You’re building a RAG system that answers questions about a company’s internal documentation.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ldslSWC0Pb"}],"key":"ZMA2ojR0Yu"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Tasks","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"V1u5AJZpdJ"}],"key":"CIEls1f8C9"},{"type":"text","value":":","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"EgbpcbrlU6"}],"key":"M8Nne8PkIF"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":7,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"strong","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Identify failure modes","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"FrCZwLykpa"}],"key":"gnnabggBma"},{"type":"text","value":": What are 3 ways this RAG system could fail?","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"sdAVIbnrpC"}],"key":"hgbAjOfhlm"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"strong","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Design retrieval tests","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"f3bb5mBBAa"}],"key":"XOpXIQKoTt"},{"type":"text","value":": What cases would test if retrieval is working?","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"RpVSswaMtj"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":9,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"What queries should always retrieve specific documents?","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"eJ1lZo4k4B"}],"key":"Dkrj2G4P4R"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"What edge cases might break retrieval?","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"lZWgM0S64W"}],"key":"BOnES04CVm"}],"key":"hyMcuPyZxX"}],"key":"snveM2mnjn"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"strong","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Design generation tests","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"ED6dm64myC"}],"key":"XG1NzeIFmA"},{"type":"text","value":": Assuming perfect retrieval, how do you test generation?","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"UKSQ6KMi4n"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":12,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"What makes a “good” answer?","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"yxiUmXgmBD"}],"key":"gCztJUyeeT"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"How do you detect hallucinations?","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"mavmnYy1s5"}],"key":"b12ceRW0OR"}],"key":"r2YvSLe5ym"}],"key":"Ahgiyc1MKm"},{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"strong","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Create evaluation pipeline","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"GWXMoI0SVP"}],"key":"BbXlWS8UOU"},{"type":"text","value":": Sketch code for evaluating both stages","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"qwnVjaTfsu"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":15,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"What metrics would you track?","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"ZkUTotiYCg"}],"key":"GhbmhXp36Z"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"How would you report results?","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"BNo7RNthbn"}],"key":"QwUjpHJWpB"}],"key":"S8vVl7SNE6"}],"key":"CZEl95tDXs"}],"key":"vajkfAlNGU"}],"key":"tD1bhrqByc"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# TODO: Your code here","key":"hOgdMnd0aQ"},{"type":"output","id":"ZExFuvyZ-yp7nTZlJUqXD","data":[],"key":"tSNdityjI4"}],"key":"noCr1XvRYV"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Integration and Best Practices","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"QXCf4dJeFD"}],"identifier":"integration-and-best-practices","label":"Integration and Best Practices","html_id":"integration-and-best-practices","implicit":true,"key":"mwILsP58VP"}],"key":"QcLuCTYHqg"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"When to Use Each Evaluation Type","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"g7Dihuu7pH"}],"identifier":"when-to-use-each-evaluation-type","label":"When to Use Each Evaluation Type","html_id":"when-to-use-each-evaluation-type","implicit":true,"key":"Zqka8M5bZM"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Deterministic Evaluators","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"K5W7FnlFDk"}],"key":"UQAPvlxsFU"},{"type":"text","value":" when:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"EWLOpHmsVn"}],"key":"PKd09PTyJA"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Clear right/wrong answers exist","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"tdpVgWfQAv"}],"key":"dRfRlFfHxW"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Output format matters (structured data)","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"QkHH8rB2rB"}],"key":"LZlAuqUwvy"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Security/safety constraints (no PII leakage)","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"VAuroL4fUt"}],"key":"VW94EycggH"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Performance requirements (latency, cost)","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"VhSiggJjvm"}],"key":"klkFW00pQw"}],"key":"SY1k23sM3c"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"strong","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"LLM as Judge","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"tYuxoU3Iie"}],"key":"VYvSPXywBu"},{"type":"text","value":" when:","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"siAndba3fd"}],"key":"g2s5X4sO8L"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":12,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Multiple valid answers exist","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"wxpYJ9bda7"}],"key":"po1DTqCf8r"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Quality is subjective (helpfulness, tone)","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"HYWKAmnsmL"}],"key":"ULHWgHecPI"},{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Semantic equivalence matters (“Paris” vs “The capital of France is Paris”)","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"noMZM6RLei"}],"key":"ilzeJVnSKb"}],"key":"oI62yrlKcu"},{"type":"paragraph","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"strong","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Span-Based Evaluation","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"arklcSzuV0"}],"key":"jFLWSr6cfD"},{"type":"text","value":" when:","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"jg29m7YDYS"}],"key":"F56q15DtNf"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":18,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Process correctness matters, not just output","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"aMgZ1sP2pu"}],"key":"bpZveABYWF"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"Multi-step reasoning needs validation","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"gDr9WZpQdV"}],"key":"jcPF8OkuxW"},{"type":"listItem","spread":true,"position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"Tool usage patterns are important","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"HmKPukJ0nt"}],"key":"bPYTJEAk8x"},{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Debugging complex agent behaviors","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"RhAwBExObS"}],"key":"tXkdc8ZhI6"}],"key":"SmQahFRoJ1"}],"key":"kUzkxzwQuW"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Tips for Effective Evaluation","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bEMh1yGXu4"}],"identifier":"tips-for-effective-evaluation","label":"Tips for Effective Evaluation","html_id":"tips-for-effective-evaluation","implicit":true,"key":"RXGEuxuKdE"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Start Small, Grow Gradually","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"qL7l5Xinbu"}],"key":"qI2Wk5tuU6"},{"type":"text","value":":","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"HanEAVihTh"}],"key":"Ph0Qf1ltVo"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Begin with 5-10 cases covering main scenarios","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"I41DjMFT05"}],"key":"olBdMtYFJz"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Add cases as you discover failures","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"ot6tyxphO4"}],"key":"iuzi78DL8W"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Prioritize cases that would impact users most","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"BvomouShTD"}],"key":"GQM5GsHCYW"}],"key":"kfHq7LxOUy"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"strong","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Balance Coverage and Maintainability","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"bpgoZnRLql"}],"key":"m6hWvvgG6y"},{"type":"text","value":":","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"v5fKJneBX5"}],"key":"KGEwJYYPGj"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":11,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Don’t try to test everything","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"ziPHrZ2Lw3"}],"key":"W5d7TNu2L9"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Focus on high-risk or high-value scenarios","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"ONsazgUzg8"}],"key":"oEamYCVxqZ"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Remove redundant cases","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"WehbclVQem"}],"key":"paxX6swyvm"}],"key":"HbToqxd0o5"},{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"strong","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Make Evaluators Specific and Clear","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"LbbzXlHpfb"}],"key":"XXNFebSO9q"},{"type":"text","value":":","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"Gj9fwr4yJQ"}],"key":"zpaN6nzRl4"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":17,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Good rubric: “Score 0-10 on factual accuracy. Check claims against provided context.”","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"cCn7dAfwkG"}],"key":"WZ0bFVrC9a"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"Bad rubric: “Score the quality of the response.”","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"E6PRMtawDA"}],"key":"sxwcyKays9"}],"key":"eK9Y0kyyK8"},{"type":"paragraph","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"strong","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"Version Control Your Datasets","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"TazaI1dKRg"}],"key":"UR5ftNK4zM"},{"type":"text","value":":","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"EKGlqxSK9X"}],"key":"ysGBZloXtu"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":22,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Store datasets as YAML/JSON in git","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"xFRGc0Kt2m"}],"key":"ej2wghn5jN"},{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"Track changes over time","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"WoMFfe5r6B"}],"key":"vLAUGyIjEP"},{"type":"listItem","spread":true,"position":{"start":{"line":24,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"Share across team","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"huGPOtJva1"}],"key":"grfSEI39oQ"}],"key":"HHJLABaR4B"},{"type":"paragraph","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"strong","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"Automate Where Possible","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"GHVh0FH2ZU"}],"key":"ltekyMgaqX"},{"type":"text","value":":","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"xbRLSDvJTQ"}],"key":"xBYkKljrme"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":28,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"Run evals in CI/CD pipeline","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"rUZL5IePzH"}],"key":"hwN53onk95"},{"type":"listItem","spread":true,"position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"Block deploys if pass rate drops","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"Cspopq5gYc"}],"key":"iyyO5mPVtZ"},{"type":"listItem","spread":true,"position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"text","value":"Generate alerts for regressions","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"aDc5Nszd7A"}],"key":"ieUxwaaWYB"}],"key":"fHcrs0Gebd"}],"key":"wUaNlvXx5p"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Exercise: Evaluation Strategy Design","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"WB8Kjo926r"}],"identifier":"exercise-evaluation-strategy-design","label":"Exercise: Evaluation Strategy Design","html_id":"exercise-evaluation-strategy-design","implicit":true,"key":"zSgb0ps1Ds"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Choose one scenario:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"PZKOZSnuqh"}],"key":"TGc5Gbcfy0"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"E-commerce support agent","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"VxXdCawHDr"}],"key":"rZnhyTSIf8"},{"type":"text","value":": Handles returns, shipping, account questions","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"QHP04IvcCV"}],"key":"t2NlE45WTi"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"strong","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Code review agent","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"WgFcje5GOY"}],"key":"CVnlZPrt1k"},{"type":"text","value":": Reviews pull requests, suggests improvements","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"d8JylJPped"}],"key":"q3o3LhHC81"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"strong","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Data analysis agent","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"KmAASlnkvI"}],"key":"H7r2gFDRLD"},{"type":"text","value":": Answers questions about datasets using pandas","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"DuqHMEYZQJ"}],"key":"rBFG9pXTH3"}],"key":"tsljekTR9K"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"For your chosen scenario:","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"UFticsv6S0"}],"key":"SQ8JNWzZkY"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":11,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Design an evaluation strategy:","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"QuOIsK1Neb"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":12,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"What’s in your test dataset? (10+ cases)","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"VXte5yPoba"}],"key":"FOi3Fl0H9x"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"What evaluators would you use?","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"qijVt1mZtQ"}],"key":"Ney2wE4w4n"},{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"How would you measure success?","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"ZVtMeCpS7u"}],"key":"wWGilWx2kN"}],"key":"YKr0m0CcME"}],"key":"m3tjgoCuf7"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Describe your development workflow:","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"sFmw3VhCgh"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":16,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"When do you run evals?","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"H7rordcZVt"}],"key":"Y738oM0yk9"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"What metrics do you track?","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"fH3eVuNdVC"}],"key":"ZO9RQtrJe6"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"How do you decide when to deploy?","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"sCXZcst0k3"}],"key":"mpVgAfjoGD"}],"key":"rrkqpv71fO"}],"key":"M1XcMP65aA"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Plan for production:","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"D6AMPFAgz3"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":20,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"How do you handle failures?","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"epU9dcDo7B"}],"key":"s17TZjhqon"},{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"When do you update your dataset?","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"UOEHIH89yO"}],"key":"YrdrSOUj8G"},{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"What triggers re-evaluation?","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"Vo4syYusxE"}],"key":"BRnUPuGPoc"}],"key":"r2IJMe60wp"}],"key":"poAQtvobCd"}],"key":"MtM1XV61x5"}],"key":"yCg6WtPxoS"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Connections to Course Themes","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"wtnFiHzPyc"}],"identifier":"connections-to-course-themes","label":"Connections to Course Themes","html_id":"connections-to-course-themes","implicit":true,"key":"vsRTwvhnow"}],"key":"XhcnKxK9cu"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Game Theory and Evaluation","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"VSdjXiFvbK"}],"identifier":"game-theory-and-evaluation","label":"Game Theory and Evaluation","html_id":"game-theory-and-evaluation","implicit":true,"key":"p9OkbCQXWJ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Agent alignment","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"u8sBHB8xKv"}],"key":"CCtKiBQTPA"},{"type":"text","value":": Evaluation as mechanism design","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Scs8jfTdK1"}],"key":"p3zeONCEet"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"You design rubrics (rules) to incentivize desired behaviors","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"N9cmTx6A7T"}],"key":"Nmjh0oO7sC"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"LLM as Judge is like a referee in a game","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Rh7eJHCZDe"}],"key":"XiwXDNIDWY"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Pass/fail thresholds create strategic constraints","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"atQOS95mrY"}],"key":"g4CB9GYz6t"}],"key":"IwARlkziGy"}],"key":"nZvNea7uZu"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"strong","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Adversarial evaluation","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"xyHRALrZ8F"}],"key":"aQRNEHtmJm"},{"type":"text","value":": Red team vs Blue team","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"RyOOzHp9im"}],"key":"KFMZ118gx4"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":9,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Attackers try to make agent fail (jailbreaking, prompt injection)","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"MQRmvslQvD"}],"key":"HppIXWPug5"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Defenders build evals that catch these attacks","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"FcXPTDNcW9"}],"key":"DPuCURvWRP"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Nash equilibrium between robustness and capability","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"HyarW3ZjXl"}],"key":"sOyGpMjXMn"}],"key":"pXtzf1J1BZ"}],"key":"JEEehsOEBy"}],"key":"Uj5Wlcbm9B"},{"type":"heading","depth":3,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Network Effects in AI Systems","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"elvkg6IhmT"}],"identifier":"network-effects-in-ai-systems","label":"Network Effects in AI Systems","html_id":"network-effects-in-ai-systems","implicit":true,"key":"r9V6zRfdUd"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":15,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"strong","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Evaluation datasets as networks","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"M8kQLm5Grr"}],"key":"hZQFo5gXyf"},{"type":"text","value":":","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"DWtKed30eq"}],"key":"Tt50Dig1bF"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":16,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Cases can have dependencies (one builds on another)","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"AhCKVnqAsR"}],"key":"zx2DsDhIhl"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Failures can cascade (if base functionality breaks, many cases fail)","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"fAt9Ri3ivg"}],"key":"nt4UGggP1R"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"Coverage metrics: are there “clusters” of untested scenarios?","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"AAxDxj2Fxz"}],"key":"cnhTFssDub"}],"key":"ZjSlImZj2y"}],"key":"P2aA9bRBTC"},{"type":"listItem","spread":true,"position":{"start":{"line":20,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"strong","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"Agent-to-agent evaluation","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"yxjqfmgbUH"}],"key":"BRydJXNBgW"},{"type":"text","value":":","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"RrYXbYcS53"}],"key":"WmiMsRfWWT"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":21,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Multi-agent systems need coordinated evaluation","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"RTNVayOiIy"}],"key":"z4NhPJUxei"},{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Agent A’s outputs become Agent B’s inputs","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"hI2h5UixYf"}],"key":"MdEFD4VwVG"},{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"Network of evals reflects agent interaction topology","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"Wm23fkBmvG"}],"key":"wk4YXSKXCG"}],"key":"ju4Lq4ZK6j"}],"key":"BMUfApsZWl"}],"key":"rvfVVmIAUn"},{"type":"heading","depth":3,"position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"Emergence in Complex AI Systems","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"xDluwNQeOh"}],"identifier":"emergence-in-complex-ai-systems","label":"Emergence in Complex AI Systems","html_id":"emergence-in-complex-ai-systems","implicit":true,"key":"s9znmVqYCL"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":27,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":27,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"strong","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"Emergent behaviors","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"Aexhzf1EM3"}],"key":"h4oQQnftbG"},{"type":"text","value":" in multi-step agents:","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"mN2bxActLR"}],"key":"jHpq4NujUx"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":28,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"Simple agent + simple tools → complex behaviors","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"t3mBr9s5US"}],"key":"ISFFhoX5O7"},{"type":"listItem","spread":true,"position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"Can’t predict all outcomes from components","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"lhBw63QGrn"}],"key":"EfSo2KRSVm"},{"type":"listItem","spread":true,"position":{"start":{"line":30,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"Evaluation discovers emergent capabilities (and failures)","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"iAIwzEV4Q9"}],"key":"wSrBD84TnG"}],"key":"iHO1zqWSc7"}],"key":"FQWQQjLYdY"},{"type":"listItem","spread":true,"position":{"start":{"line":32,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"strong","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"text","value":"Evaluation as an ABM simulation","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"hpsAs4yHMq"}],"key":"DXekgkbxGe"},{"type":"text","value":":","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"GnAB9hnnvr"}],"key":"nPCiF9z9L1"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":33,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"text","value":"Each test case is like running the simulation once","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"mm9Eic2wgx"}],"key":"nMsjCh86Px"},{"type":"listItem","spread":true,"position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"text","value":"Aggregate results reveal patterns","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"P6rzS0eNaC"}],"key":"K1VbpbeRWX"},{"type":"listItem","spread":true,"position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"text","value":"Edge cases show boundary conditions of agent “behavior space”","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"ocOMRCFdFb"}],"key":"y6jEwKsy7t"}],"key":"j54mr7oW4G"}],"key":"pVXBNMdxMY"}],"key":"YoED5KuwBR"}],"key":"MDs0j9UVoq"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Summary and Key Takeaways","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bC6ewTqyZa"}],"identifier":"summary-and-key-takeaways","label":"Summary and Key Takeaways","html_id":"summary-and-key-takeaways","implicit":true,"key":"leWZoGI3RR"}],"key":"AoLV3Yc7ra"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"What We Learned","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bJEex9tkIw"}],"identifier":"what-we-learned","label":"What We Learned","html_id":"what-we-learned","implicit":true,"key":"esdADrASfh"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Why Evals Matter","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"mRP0ohMJV0"}],"key":"kJxN9ePgrO"}],"key":"dqmWoR05Zy"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"AI systems are non-deterministic","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"Qc8CWMMMT6"}],"key":"mnPLl2FXxJ"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Systematic testing catches issues before production","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"tKlI5AJ3ye"}],"key":"sCpkIwfXXf"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Evals enable confident iteration and deployment","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"QFZLVOJnVf"}],"key":"rqI90u3kXn"}],"key":"RshHPZAsiQ"}],"key":"vpEGUEnAm3"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"strong","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Core Framework: Pydantic Evals","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"CuWiHZTX39"}],"key":"E8YSJLwen5"}],"key":"dC1Z5AwJMc"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":9,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Cases: individual test scenarios","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"URhrMt9Urf"}],"key":"bNiNdK7eKz"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Datasets: collections of cases","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"Ln308llzjH"}],"key":"H0p3Bmstlo"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Evaluators: scoring mechanisms (deterministic, LLM, custom)","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"i2Dlr75suc"}],"key":"FUxwpFS4w2"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Experiments: runs that generate reports","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"qvkz5MHMqz"}],"key":"AB2YbCg3gu"}],"key":"joIQFG4o8f"}],"key":"jhjo2rHq2j"},{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"strong","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Evaluation Strategies","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"unvqjax5A7"}],"key":"lIRxm2Ui9E"}],"key":"JfblLtH3DL"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":15,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Deterministic checks for clear criteria","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"F63AKFHESS"}],"key":"J5Qu5YaJUt"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"LLM as Judge for subjective quality","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"UoA5KOagvQ"}],"key":"HK84qveFWF"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Span-based evaluation for process correctness","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"CJZHEUF6g6"}],"key":"b2nj2neTQg"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Custom evaluators for domain-specific needs","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"JBDnR8A8VU"}],"key":"qujhA0tLIm"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"RAG-specific metrics for retrieval + generation","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"VW4wVUSk3i"}],"key":"CU3IDyrldP"}],"key":"Utpyxb4KNZ"}],"key":"wGsDR8y7rb"},{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"strong","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Best Practices","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"MAnnPzMC4B"}],"key":"bp1G30WrcJ"}],"key":"XKimGQbIfE"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":22,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Start small, iterate based on failures","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"PQ0UK5fsuV"}],"key":"tlQUP1Rpfd"},{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"Balance coverage with maintainability","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"UZle77Pp3a"}],"key":"xOHnkXOLYj"},{"type":"listItem","spread":true,"position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"Version control datasets and track metrics","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"EFkRGDzKqt"}],"key":"hC9tfgpMc0"},{"type":"listItem","spread":true,"position":{"start":{"line":25,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"Integrate into development and deployment workflows","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"FAJ42xz6Bp"}],"key":"R2YUVgZSEJ"}],"key":"pYnVeZIXdT"}],"key":"j856srPKmA"}],"key":"lmajq3XrWG"},{"type":"heading","depth":3,"position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"Looking Forward","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"zV57v8xTOc"}],"identifier":"looking-forward","label":"Looking Forward","html_id":"looking-forward","implicit":true,"key":"FKsLDLroBq"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":29,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"Evaluations are “an emerging art/science”","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"RUheRpmgAj"}],"key":"csGwvvYZxJ"},{"type":"listItem","spread":true,"position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"text","value":"No single “right” approach exists","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"kWrWjAz1Pe"}],"key":"KuBnsFL7Zj"},{"type":"listItem","spread":true,"position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"Adapt techniques to your domain and constraints","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"wi16EP2nRT"}],"key":"jeUOqusf8u"},{"type":"listItem","spread":true,"position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"text","value":"Key principle: ","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"jLQNc678hC"},{"type":"strong","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"text","value":"Test systematically, deploy confidently","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"qEVW2ovwqr"}],"key":"sqjiEDicxd"}],"key":"cYu76SNGiU"}],"key":"FCnVZZjGCf"}],"key":"rUtr7ZAMaz"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Final Exercise: Reflection","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"vIR7KTCfsU"}],"identifier":"final-exercise-reflection","label":"Final Exercise: Reflection","html_id":"final-exercise-reflection","implicit":true,"key":"sYIK0V4K1p"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Think about an AI agent you might build:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"NntUnz7WaV"}],"key":"FoJq5dwAXN"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"What are the top 3 risks or failure modes?","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"pmtaXxgnMk"}],"key":"B2h2VdRqWX"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"How would you design evals to catch those?","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"f8n7IDi1ma"}],"key":"VVaandflf4"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"What would “success” look like quantitatively?","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"jQupPK5Zte"}],"key":"zxJShp53kb"}],"key":"M2o8Dtbdnm"}],"key":"JLjx1ydc3o"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Additional Resources","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"NdMhKGtyBB"}],"identifier":"additional-resources","label":"Additional Resources","html_id":"additional-resources","implicit":true,"key":"zc9oyp4ttt"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"link","url":"https://ai.pydantic.dev/evals/index.md","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Pydantic AI Evals Documentation","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"VfaXuFlkdP"}],"urlSource":"https://ai.pydantic.dev/evals/index.md","key":"v5cSdN7Hbi"}],"key":"C9GULbi9eo"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"link","url":"https://ai.pydantic.dev/api/pydantic_evals/dataset/index.md","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Dataset API Reference","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"II77W9lxdp"}],"urlSource":"https://ai.pydantic.dev/api/pydantic_evals/dataset/index.md","key":"jd8M5WyK1u"}],"key":"lyjGivFq4V"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"link","url":"https://ai.pydantic.dev/api/pydantic_evals/evaluators/index.md","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Evaluators API Reference","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ULoXAAshFf"}],"urlSource":"https://ai.pydantic.dev/api/pydantic_evals/evaluators/index.md","key":"G5XsyoiJfs"}],"key":"vhRuJ7maNA"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"link","url":"https://ai.pydantic.dev/logfire/index.md","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Pydantic Logfire for Visualization","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"hqHxYbV2rA"}],"urlSource":"https://ai.pydantic.dev/logfire/index.md","key":"BSfrQsMMNS"}],"key":"agK8E7AdNl"}],"key":"i3sizEX6Bn"}],"key":"QOxSGGQtZD"}],"key":"tuUSsegda8"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Type-Safe Agent Development with PydanticAI Patterns","url":"/l-a2-02-type-safe-agents-pydantic-patterns","group":"Agents 2"},"next":{"title":"Building Agent Tools with FastMCP","url":"/l-a03-01-mcp-with-fastmcp","group":"Agents 3"}}},"domain":"http://localhost:3000"}