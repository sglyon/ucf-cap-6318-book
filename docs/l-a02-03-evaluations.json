{"version":2,"kind":"Notebook","sha256":"e8ddc6dc6672c292683de6507bdc2f034ffde740f5c146915a8dc2bffdd6de4a","slug":"l-a02-03-evaluations","location":"/weekA02/L.A02.03_evaluations.ipynb","dependencies":[],"frontmatter":{"title":"Evaluating AI Systems: Testing Agents at Scale","content_includes_title":false,"kernelspec":{"name":"python3","display_name":".venv","language":"python"},"authors":[{"nameParsed":{"literal":"Spencer Lyon","given":"Spencer","family":"Lyon"},"name":"Spencer Lyon","orcid":"0009-0001-6461-885X","email":"spencer.lyon@ucf.edu","affiliations":["University of Central Florida","Valorum Data"],"id":"contributors-myst-generated-uid-0","corresponding":true}],"affiliations":[{"id":"University of Central Florida","name":"University of Central Florida"},{"id":"Valorum Data","name":"Valorum Data"}],"numbering":{"title":{"offset":1}},"exports":[{"format":"ipynb","filename":"L.A02.03_evaluations.ipynb","url":"/build/L.A02.03_evaluations-7d53ba206c489493f9231b31e243c576.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"blockquote","position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Computational Analysis of Social Complexity","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"N7mV5uXUU3"}],"key":"XmzQDEHgpD"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Fall 2025, Spencer Lyon","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"jxeOnfuWna"}],"key":"cltrJWBeg5"}],"key":"MYw2GKNixO"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"strong","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Prerequisites","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"vo1ueLNtCq"}],"key":"Gpmb7KjAEQ"}],"key":"Fwxsf7V7hW"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":9,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Pydantic AI Agents and Tools","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"YagU9h5VCJ"}],"key":"FqTlKv9YCj"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Python programming fundamentals","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"mSoWcDO3ss"}],"key":"d2DopPvFC5"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Basic understanding of testing concepts","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"wxr5yN8QrB"}],"key":"Y9RyaEcQoz"}],"key":"EPC7Y52HUI"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"strong","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Outcomes","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"P2EWNCVCvh"}],"key":"XNwG5CaXmI"}],"key":"vHZ8Dy1Eth"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":15,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Understand why systematic evaluation is critical for AI systems","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"BS8BA0BX7i"}],"key":"S9zChqq8pj"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Identify when and what to evaluate in AI agents","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"hNl4082Ojt"}],"key":"cGHsNOHmZH"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Implement deterministic and LLM-based evaluators","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"X3TgAWUgCd"}],"key":"ZYVaBBzUzX"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Design evaluation datasets using code-first approaches","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"AlZOH06zeQ"}],"key":"Ny4gPxEBGt"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"Analyze and compare evaluation results across experiments","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"HGuSKDjzkm"}],"key":"OWgecFKmHn"},{"type":"listItem","spread":true,"position":{"start":{"line":20,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Connect evaluation practices to production deployment concerns","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"aMuisjcuC8"}],"key":"lMTaTXfXON"}],"key":"UOmzD5YcaO"},{"type":"paragraph","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"strong","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"References","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"qErLRETd6T"}],"key":"ONeQDRA1qF"}],"key":"bKQIUhj08x"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":24,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"link","url":"https://ai.pydantic.dev/evals/index.md","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"Pydantic AI Evals Documentation","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"Fcp7GEggYV"}],"urlSource":"https://ai.pydantic.dev/evals/index.md","key":"vwyIlTcVJX"}],"key":"ol2QgwvFfW"},{"type":"listItem","spread":true,"position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"link","url":"https://ai.pydantic.dev/api/pydantic_evals/dataset/index.md","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"Pydantic Evals API Reference","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"x2NvTSjK7F"}],"urlSource":"https://ai.pydantic.dev/api/pydantic_evals/dataset/index.md","key":"LsZCq2CfsI"}],"key":"QFC1UB6qbH"},{"type":"listItem","spread":true,"position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"Testing practices from software engineering","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"C1mYtE7scU"}],"key":"VPD2z0CSaq"}],"key":"q4quD29Lf3"}],"key":"kX9RZQo0oB"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Introduction: The AI Testing Problem","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"yKYO0BJLbE"}],"identifier":"introduction-the-ai-testing-problem","label":"Introduction: The AI Testing Problem","html_id":"introduction-the-ai-testing-problem","implicit":true,"key":"sy6MFKx5CH"}],"key":"tlHD42Ewyr"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Why Testing AI is Different","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xXcj3CXwlo"}],"identifier":"why-testing-ai-is-different","label":"Why Testing AI is Different","html_id":"why-testing-ai-is-different","implicit":true,"key":"erZ7I8TTOa"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Traditional software testing: deterministic inputs → deterministic outputs","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"AgTJo3Xdtm"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"If ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"BCy53t5nAd"},{"type":"inlineCode","value":"add(2, 3)","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"EN5GFNjPsU"},{"type":"text","value":" returns ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"jNguvyGgHv"},{"type":"inlineCode","value":"5","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"NrraoVE31o"},{"type":"text","value":" once, it always will","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"sLNrAKmQlY"}],"key":"Fwb7IOVI3w"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Clear pass/fail criteria","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"fL1kn2WjLU"}],"key":"nLwUr7KmF2"}],"key":"MI0mZzsiIq"}],"key":"Cs5NrdSGEe"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"AI systems: same input → potentially different outputs","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"oTUJIag9y2"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":7,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Ask an agent “What’s the capital of France?” twice, might get:","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"NhiqEvTqcI"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":8,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"“The capital of France is Paris.”","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"Lzwct6XNgh"}],"key":"DpHfw2Dqpk"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"“Paris is France’s capital city.”","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"HHJ6afYCTf"}],"key":"Y7c0tkRAqs"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"“France’s capital is Paris, known for the Eiffel Tower.”","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"EGBjn751ur"}],"key":"XnHFJ6Ro33"}],"key":"qed8SGN9O4"}],"key":"b7JPJ3jxMj"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"All correct, but different!","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"deOa1AXwBe"}],"key":"rpzqr5cLna"}],"key":"jKYqtPk3MM"}],"key":"AMa2NRLnvM"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"strong","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Key challenge","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"c0e0jk0pna"}],"key":"gEUCL2O5Ty"},{"type":"text","value":": How do we test something that’s non-deterministic?","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"QeKx3MDmTs"}],"key":"S3705OUPS0"}],"key":"DWkb2RcJhc"},{"type":"heading","depth":3,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Motivating Scenario: The Support Bot Problem","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"SVeSuTCf7l"}],"identifier":"motivating-scenario-the-support-bot-problem","label":"Motivating Scenario: The Support Bot Problem","html_id":"motivating-scenario-the-support-bot-problem","implicit":true,"key":"XAOHzvvqVF"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":16,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"You’ve built a customer support agent using Pydantic AI","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"U4O04MUkpg"}],"key":"MIqgUyoV6O"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"It handles questions about product returns, shipping, and account issues","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"fGtOZTnmFM"}],"key":"b8qYUTYAN7"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"In development, it seems to work great on the examples you tried","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"hv3VKqL14u"}],"key":"kneIzH1kyo"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"You deploy to production and...","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"OhUxKl1Eyq"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":20,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"Sometimes gives outdated return policy information","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"y53YcvRGJA"}],"key":"Z2mYhg4srm"},{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Occasionally “hallucinates” shipping partners that don’t exist","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"b1AV7KLLLq"}],"key":"x0xyIO1Y6M"},{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Has trouble with edge cases you didn’t think to test","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"AatnQEbBXX"}],"key":"I2GoNSXCAC"}],"key":"ygxadNi0kj"}],"key":"iBNGfBsOl4"},{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"strong","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"Question","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"Xp0mnTTLtR"}],"key":"vMCXetkXdp"},{"type":"text","value":": How could systematic evaluation have caught these issues?","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"C1PjqSKb97"}],"key":"L6uyCwe4BT"}],"key":"brRRJPLBRk"},{"type":"heading","depth":3,"position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"What We’ll Learn","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"PRyeeDnLl2"}],"identifier":"what-well-learn","label":"What We’ll Learn","html_id":"what-well-learn","implicit":true,"key":"voBFy74YWU"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":27,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"We’ll explore ","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"gEAmXAlPIz"},{"type":"strong","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"Pydantic Evals","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"pTye1n0W6K"}],"key":"fq7hiaryDA"},{"type":"text","value":", a framework for testing AI systems","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"qUewxJLQI3"}],"key":"eTNWDtywug"},{"type":"listItem","spread":true,"position":{"start":{"line":28,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"Three main components:","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"nzftFW2OL9"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":29,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"strong","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"Datasets","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"rypEaQtCtE"}],"key":"G1RFC7JFTF"},{"type":"text","value":": Collections of test scenarios","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"L5MrLY2p98"}],"key":"VIAP4NYukz"},{"type":"listItem","spread":true,"position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"strong","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"text","value":"Evaluators","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"s3g3e7o7Mm"}],"key":"RRJODbOQx7"},{"type":"text","value":": Scoring mechanisms to check outputs","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"maX5AbnDMU"}],"key":"RDCy3dJA9u"},{"type":"listItem","spread":true,"position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"strong","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"Experiments","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"ehNbgL9xzW"}],"key":"bN9yHYaBRW"},{"type":"text","value":": Runs that combine datasets and evaluators","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"Sn0Fx8HR65"}],"key":"zRXXvVwfhJ"}],"key":"e6bhX5IIEH"}],"key":"Hx0kA4PRxA"},{"type":"listItem","spread":true,"position":{"start":{"line":32,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"text","value":"Think of it like unit testing for AI:","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"d7wrGwp1Za"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":33,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"text","value":"Cases + Evaluators = individual unit tests","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"yY8dNVtZNA"}],"key":"o0iYe0MyCC"},{"type":"listItem","spread":true,"position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"text","value":"Datasets = test suites","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"u4Hmg4zX19"}],"key":"OV1TTSCc95"},{"type":"listItem","spread":true,"position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"text","value":"Experiments = running your entire test suite","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"Ha7cN0hWxw"}],"key":"TVOTJWs4yK"}],"key":"GU9j6bz2Bd"}],"key":"LYzYZFPQ2A"}],"key":"KFgCCgEiiD"}],"key":"LEwSgr8G1e"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Setup","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"VZz6IY0END"}],"identifier":"setup","label":"Setup","html_id":"setup","implicit":true,"key":"z0UzRTns4k"}],"key":"paKZpchdbo"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Install and Import Dependencies","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"EIgnIwD7c0"}],"identifier":"install-and-import-dependencies","label":"Install and Import Dependencies","html_id":"install-and-import-dependencies","implicit":true,"key":"HByGPhhyme"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"We’ll need Pydantic AI and the evals module:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"UPvzdAHTj1"}],"key":"BoAyq3OnyS"}],"key":"CvbV5KKKJB"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Install pydantic-ai if needed\n# %pip install pydantic-ai[anthropic,evals] pydantic-evals","key":"TmlucxJLGp"},{"type":"output","id":"sSxiceAtuHpRsog1kbH16","data":[],"key":"TAc6rmPHjI"}],"key":"K7NPONSGWf"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from pydantic_ai import Agent\nfrom pydantic_evals import Dataset, Case\nfrom pydantic_evals.evaluators import (\n    Evaluator,\n    EvaluatorContext,\n    EvaluationReason,\n    EqualsExpected,\n    Contains,\n    IsInstance,\n    MaxDuration,\n    LLMJudge,\n    HasMatchingSpan,\n)\nfrom pydantic import BaseModel\nimport os","key":"l64GsVHp9O"},{"type":"output","id":"VIDSJTxCZFMASMG9tuDUH","data":[],"key":"yLjbceEyUE"}],"key":"xLFbqWG1wp"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Configure API Keys","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"g17GNHVU3l"}],"identifier":"configure-api-keys","label":"Configure API Keys","html_id":"configure-api-keys","implicit":true,"key":"lM4AgKqgXW"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Make sure you have your Anthropic API key set:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ZrpD5liZL2"}],"key":"XTxG7pUmqh"}],"key":"fHAqlkj8IF"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from dotenv import load_dotenv\nimport nest_asyncio\n\nload_dotenv()\nnest_asyncio.apply()","key":"fWknmCtkOm"},{"type":"output","id":"lrkWiqItxBJZlNS_ty2Qq","data":[],"key":"ee6Dnxnr2F"}],"key":"LIulsnBzg7"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Your API key should be set in environment\n# os.environ[\"ANTHROPIC_API_KEY\"] = \"your-key-here\"\n\n# Verify it's set\nassert \"ANTHROPIC_API_KEY\" in os.environ, \"Please set ANTHROPIC_API_KEY environment variable\"","key":"cIzs6MMl7K"},{"type":"output","id":"P982FYpaMivHEMk_AiipL","data":[],"key":"MbRn174lpO"}],"key":"t4hqE3AMj5"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Core Concepts: The Evaluation Framework","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"iRMWD9I10w"}],"identifier":"core-concepts-the-evaluation-framework","label":"Core Concepts: The Evaluation Framework","html_id":"core-concepts-the-evaluation-framework","implicit":true,"key":"C4IZFydzXy"}],"key":"V9hULjFHby"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Structure: Cases, Datasets, and Experiments","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"D3YHnUZ9pq"}],"identifier":"structure-cases-datasets-and-experiments","label":"Structure: Cases, Datasets, and Experiments","html_id":"structure-cases-datasets-and-experiments","implicit":true,"key":"rlIuFpBYXO"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Cases","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"gJkdlTdRrq"}],"key":"v1WR1WOSdM"},{"type":"text","value":": Individual test scenarios","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"aebtDblgJB"}],"key":"EgxM9zcN8D"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Like a single unit test","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"YMcORYNEsD"}],"key":"uDbcL4GTRh"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Contains:","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"G8lfQttcna"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":7,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"inlineCode","value":"inputs","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"pAzi8EPJUe"},{"type":"text","value":": Data you pass to the agent","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"W7FtSSf4SB"}],"key":"QqaCx2dvh7"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"inlineCode","value":"expected_output","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"yyUcFE0TMO"},{"type":"text","value":": (Optional) What you expect back","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"DJ8e80QIJh"}],"key":"IIUO9rp1AU"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"inlineCode","value":"metadata","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"AasECLNzuH"},{"type":"text","value":": (Optional) Context about this test","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"V7fyprjPbE"}],"key":"OdiE8mamj1"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"inlineCode","value":"evaluators","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"VXrR5s7Hhl"},{"type":"text","value":": (Optional) Case-specific checks","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"A65wrBEO4S"}],"key":"egVwPTTNhW"}],"key":"dE2pKsZb6z"}],"key":"XZ7tMB2Kz8"}],"key":"Ycd7090D6J"},{"type":"paragraph","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"strong","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Datasets","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"qJ0W6M57ZW"}],"key":"kZRpvuxdCR"},{"type":"text","value":": Collections of cases","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"P3nXcd5HyW"}],"key":"XhYHbbgRsa"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":14,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Like a test suite","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"LtpCYJKmSm"}],"key":"uLNm34upVp"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Groups related test scenarios","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"WmiIFJk3sw"}],"key":"beOLyHjYTW"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Can have dataset-level evaluators that apply to all cases","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"jSItQ9d3b9"}],"key":"TV5TrXSnz5"}],"key":"aZSIUF71Gm"},{"type":"paragraph","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"strong","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Experiments","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"cnPeq4MmMj"}],"key":"X8FJkNrlDW"},{"type":"text","value":": Evaluation runs","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"tJYrDFTzuC"}],"key":"DzhQO0PdJN"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":20,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"Like running ","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"CcoTJFqJBF"},{"type":"inlineCode","value":"pytest","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"SvOdytnT8n"},{"type":"text","value":" or ","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"MksktbYWSN"},{"type":"inlineCode","value":"julia test","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"fT9efmikhT"}],"key":"L0GxytMhqS"},{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Executes your task function on all cases","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"ddCmpaVm5z"}],"key":"HeYS6QJNwg"},{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Applies evaluators to score outputs","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"c3KUCwz2UB"}],"key":"cqVwTKfs9J"},{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"Generates reports with results","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"usAIBfMcAB"}],"key":"aICCg1FUeW"}],"key":"iIqJxqickO"}],"key":"W79ea4pNkr"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Example: Simple Support Bot Dataset","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"s9qmXXHBJb"}],"identifier":"example-simple-support-bot-dataset","label":"Example: Simple Support Bot Dataset","html_id":"example-simple-support-bot-dataset","implicit":true,"key":"EQHzipFizJ"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Let’s build intuition with a concrete example.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"QWXyQfMfzx"}],"key":"f7tcFyoFlh"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Suppose we want to test our support bot’s ability to identify the user’s intent:","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"dVAf00P3YR"}],"key":"XeI6sLfBT5"}],"key":"Hp5aWm4wiv"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Define test cases\nintent_dataset = Dataset[str, str](\n    name=\"Intent Classification Tests\",\n    cases=[\n        Case(\n            name=\"return_request\",\n            inputs=\"I want to return my order\",\n            expected_output=\"return\"\n        ),\n        Case(\n            name=\"shipping_status\",\n            inputs=\"Where is my package?\",\n            expected_output=\"shipping\"\n        ),\n        Case(\n            name=\"account_question\",\n            inputs=\"How do I reset my password?\",\n            expected_output=\"account\"\n        )\n    ]\n)\n\nprint(f\"Dataset: {intent_dataset.name}\")\nprint(f\"Number of cases: {len(intent_dataset.cases)}\")","key":"GKIeR6G6k2"},{"type":"output","id":"oXpG7lbu7bg8ZoAhe40Xs","data":[{"name":"stdout","output_type":"stream","text":"Dataset: Intent Classification Tests\nNumber of cases: 3\n"}],"key":"gSnhPUCENU"}],"key":"GwOAz4sP0V"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Note the pattern","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"PxI5RULg5A"}],"key":"iTd0u5ERPL"},{"type":"text","value":":","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zXlQO6F1cm"}],"key":"MCkoV1hu5w"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Each case tests one scenario","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"QMsRn6e2vZ"}],"key":"XcANwnuJfu"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"We specify what we expect","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"yYl6PLzv6G"}],"key":"fIpgmstXXG"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Cases are typed: ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"z3HrIsYeVa"},{"type":"inlineCode","value":"Dataset[str, str]","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"A3haZW0iRI"},{"type":"text","value":" means string inputs → string outputs","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"lRwhtewsiw"}],"key":"ki45UyXomF"}],"key":"egAfowahwv"}],"key":"KzIP9Bk08E"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Exercise 1: Design Your Own Cases","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cp2FS6hNSO"}],"identifier":"exercise-1-design-your-own-cases","label":"Exercise 1: Design Your Own Cases","html_id":"exercise-1-design-your-own-cases","implicit":true,"key":"nTDiv5yut5"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Scenario","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"nLNgt0aZJK"}],"key":"DBSNCsEhOa"},{"type":"text","value":": You’re building a sentiment analysis agent for product reviews.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"mYaXFRvT8t"}],"key":"j35UB73iDU"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Task","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ukgSLVMEZS"}],"key":"pEAb0Ur0jO"},{"type":"text","value":": Following the pattern above, create a ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"mXUwOiu6sT"},{"type":"inlineCode","value":"Dataset[str, str]","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"SPpvJKecJl"},{"type":"text","value":" with 3-5 test cases for an agent that should classify product reviews as:","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"jokxIPeEtg"}],"key":"WvqbadhL3F"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"“positive”","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"qpKTwnwG8U"}],"key":"Z0ZrsIqFyZ"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"“negative”","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"S83k6GeGRF"}],"key":"YRLcofkZTo"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"“neutral”","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"HyVrhqQuJa"}],"key":"ofLEyfJuW5"}],"key":"Y5Yk6vSayR"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Think about:","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"QtAJBnFphf"}],"key":"rjN2WtOhEr"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":12,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"What review texts represent typical positive/negative/neutral cases?","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"oHEnF0rSZ7"}],"key":"kNSVOtueJM"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"What are edge cases? (e.g., mixed sentiments, sarcasm)","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"Xb5BabPFW8"}],"key":"EMxqv2kqOG"},{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Make sure each Case has:","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"HICbC9Du00"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":15,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"A descriptive ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"ghIKZszCMz"},{"type":"inlineCode","value":"name","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"JALgwnCy3w"}],"key":"t7RICeji8g"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"inlineCode","value":"inputs","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"WbPFwHbwG6"},{"type":"text","value":" (the review text)","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"Mnz3CNtg67"}],"key":"uQAe2gcyDB"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"inlineCode","value":"expected_output","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"g0aRWXoqd4"},{"type":"text","value":" (the sentiment label)","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"rw8e4Fgz1s"}],"key":"qFaaRDkKuK"}],"key":"AD97FRA1Bb"}],"key":"Ii0Bv0vnq2"}],"key":"jj34oPIzA4"}],"key":"wLt766w6aa"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# TODO: Your code here\n# Create a sentiment analysis dataset following the pattern above\n\nsentiment_dataset = Dataset[str, str](\n    name=\"Product Sentiment Analysis\",\n    cases=[\n        # TODO: Add your test cases here\n        # Case(\n        #     name=\"clearly_positive\",\n        #     inputs=\"This product exceeded my expectations! ...\",\n        #     expected_output=\"positive\"\n        # ),\n    ]\n)\n\nprint(f\"Created dataset with {len(sentiment_dataset.cases)} cases\")","key":"LzjPZX7NYi"},{"type":"output","id":"65Ba2pvARZUwdSyITJCDT","data":[{"name":"stdout","output_type":"stream","text":"Created dataset with 0 cases\n"}],"key":"iEijTbi7ak"}],"key":"wFlVFSdjS4"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Evaluators: How to Score Outputs","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"VPIVWpo8E3"}],"identifier":"evaluators-how-to-score-outputs","label":"Evaluators: How to Score Outputs","html_id":"evaluators-how-to-score-outputs","implicit":true,"key":"mYSFBHywtB"}],"key":"yT1U9ZAj1s"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Two Types of Evaluation","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zVL9tHmlJv"}],"identifier":"two-types-of-evaluation","label":"Two Types of Evaluation","html_id":"two-types-of-evaluation","implicit":true,"key":"jjvBJ3GNaX"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Deterministic Evaluators","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"crDFTQ5btu"}],"key":"m7Dyz07di8"},{"type":"text","value":": Code-based checks","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"uPGnhNB65G"}],"key":"Kmc2zVTxb1"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Exact matches","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"U9Az7Qw4PE"}],"key":"YoExGS8fOg"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Type checking","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"RdOh8TPusI"}],"key":"X63SfCL2Jz"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Format validation (email, phone number, URL)","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"obWnVOQ9LU"}],"key":"aFBNJGNnvd"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"PII detection","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"WeMJiaRQFh"}],"key":"grXMDN94Dw"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Regular expression matching","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"pmEUun0ozv"}],"key":"ANkf7fMzgd"}],"key":"JkW7nEnfyS"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"strong","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Non-Deterministic Evaluators","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"YBi032qhLc"}],"key":"RBv3YITVoh"},{"type":"text","value":": Subjective assessment","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"onIwnK8Ufz"}],"key":"ZWZUAjVzBt"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":13,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"LLM as judge","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"Df5PZuakTL"}],"key":"h7Q0ajUeWl"},{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Human evaluation","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"xX2Dx0dA1a"}],"key":"vuKmsb4pER"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Quality metrics (accuracy, relevance, helpfulness)","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"UkRAI82IzB"}],"key":"AnLQW5bpq5"}],"key":"hbSfJGCy2J"}],"key":"IF3Igq14Dx"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Built-in Evaluators","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"lYNYTYuh6U"}],"identifier":"built-in-evaluators","label":"Built-in Evaluators","html_id":"built-in-evaluators","implicit":true,"key":"jEVJyKcSMP"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Pydantic Evals provides several ready-made evaluators:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"cq7OdAzkk0"}],"key":"ZJyGNrnPcT"},{"type":"heading","depth":4,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"1. Exact Matching","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Qnl40Lojde"}],"identifier":"id-1-exact-matching","label":"1. Exact Matching","html_id":"id-1-exact-matching","implicit":true,"key":"LH8hNlIFCF"}],"key":"fOT3MZ6I78"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Check if output equals expected value\nevaluator = EqualsExpected()\n\nprint(f\"Evaluator: {evaluator}\")","key":"VxwverP7va"},{"type":"output","id":"CC9oxAeqYROr4GfkjXAl1","data":[{"name":"stdout","output_type":"stream","text":"Evaluator: EqualsExpected()\n"}],"key":"snpprhpY1e"}],"key":"v3jpJ7pxEI"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"2. Type Checking","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KCOzBDV5mZ"}],"identifier":"id-2-type-checking","label":"2. Type Checking","html_id":"id-2-type-checking","implicit":true,"key":"T276Lrxwoj"}],"key":"Ekf2LLZSNW"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Ensure output is correct type\nevaluator = IsInstance('str')\n\nprint(f\"Evaluator: {evaluator}\")","key":"O06bJG7fLh"},{"type":"output","id":"wmAn3fBxEzXPNiT-uA3-R","data":[{"name":"stdout","output_type":"stream","text":"Evaluator: IsInstance(type_name='str')\n"}],"key":"xHlHg06f1r"}],"key":"eBKYouamRH"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"3. Membership/Contains","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cRyUJBr0Js"}],"identifier":"id-3-membership-contains","label":"3. Membership/Contains","html_id":"id-3-membership-contains","implicit":true,"key":"tZKTePU2gc"}],"key":"RPZHdAUlK9"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Check if key phrase appears in output\nevaluator = Contains('return policy')\n\nprint(f\"Evaluator: {evaluator}\")","key":"XkdKjeFwl0"},{"type":"output","id":"dkwlQLbDuRik-W3BXlCQp","data":[{"name":"stdout","output_type":"stream","text":"Evaluator: Contains(value='return policy')\n"}],"key":"dRUtv4ayAe"}],"key":"KdBy2szTFo"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"4. Performance Constraints","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"FL6bfeyc4F"}],"identifier":"id-4-performance-constraints","label":"4. Performance Constraints","html_id":"id-4-performance-constraints","implicit":true,"key":"TLcP70wQ7i"}],"key":"mckKyEudtc"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Ensure agent responds quickly enough\nevaluator = MaxDuration(seconds=2.0)  # 2 seconds max\n\nprint(f\"Evaluator: {evaluator}\")","key":"Oe2a2ukaZK"},{"type":"output","id":"kFDYYNmQ1vWTdLMUaLvf_","data":[{"name":"stdout","output_type":"stream","text":"Evaluator: MaxDuration(seconds=2.0)\n"}],"key":"uqz9p42H7q"}],"key":"qjRyU8pv0E"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Example: Adding Evaluators to Dataset","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"l9T1eIy2g3"}],"identifier":"example-adding-evaluators-to-dataset","label":"Example: Adding Evaluators to Dataset","html_id":"example-adding-evaluators-to-dataset","implicit":true,"key":"PntF2LIiFn"}],"key":"e5XLjB0SSZ"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"intent_dataset_with_evals = Dataset[str, str](\n    name=\"Intent Classification Tests\",\n    cases=[\n        Case(\n            name=\"return_request\",\n            inputs=\"I want to return my order\",\n            expected_output=\"return\"\n        ),\n        Case(\n            name=\"shipping_status\",\n            inputs=\"Where is my package?\",\n            expected_output=\"shipping\"\n        ),\n        Case(\n            name=\"account_question\",\n            inputs=\"How do I reset my password?\",\n            expected_output=\"account\"\n        ),\n    ],\n    evaluators=[\n        EqualsExpected(),  # Applied to all cases\n        MaxDuration(seconds=2.0)  # Response time check\n    ]\n)\n\nprint(f\"Dataset has {len(intent_dataset_with_evals.evaluators)} evaluators\")\nprint(f\"Dataset has {len(intent_dataset_with_evals.cases)} cases\")","key":"wjiTBRJ7xP"},{"type":"output","id":"YcmvH8yyhWEmf1CSlqo1K","data":[{"name":"stdout","output_type":"stream","text":"Dataset has 2 evaluators\nDataset has 3 cases\n"}],"key":"w0oE6XGCnf"}],"key":"rFMeEXcRaD"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"LLM as Judge: When Correctness is Subjective","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"OsbxocF6F9"}],"identifier":"llm-as-judge-when-correctness-is-subjective","label":"LLM as Judge: When Correctness is Subjective","html_id":"llm-as-judge-when-correctness-is-subjective","implicit":true,"key":"CtrdfFP4bF"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Sometimes there’s no single “correct” answer","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"KLjuQEnIF9"}],"key":"g2zqlWtU9d"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Example: “Write a friendly response to this complaint”","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"NHU1NS622o"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Many valid responses exist","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"xXuijteKs7"}],"key":"PiYhzubIs4"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Hard to check with deterministic rules","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"fCWuL3YryU"}],"key":"Rp3rNw2dMn"}],"key":"eais0eOciy"}],"key":"wubfgLcpKW"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Solution: Use another LLM to evaluate","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"LSjWpRbHO3"}],"key":"JfzqxmTeLY"}],"key":"DU5zjNLWOn"},{"type":"heading","depth":4,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"LLMJudge Evaluator:","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"CwR6S5pK6a"}],"identifier":"llmjudge-evaluator","label":"LLMJudge Evaluator:","html_id":"llmjudge-evaluator","implicit":true,"key":"brJwa393Sk"}],"key":"fdug3LVR5p"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"judge = LLMJudge(\n    rubric=(\n        \"Score from 0-10 on friendliness and helpfulness. \"\n        \"Friendly responses should acknowledge the customer's frustration. \"\n        \"Helpful responses should offer concrete next steps.\"\n    ),\n    model='anthropic:claude-haiku-4-5'\n)\n\nprint(\"Created LLMJudge evaluator\")","key":"rfcAF6Mxaf"},{"type":"output","id":"W6eZ8R3gq_wyxE0_Q8cYn","data":[{"name":"stdout","output_type":"stream","text":"Created LLMJudge evaluator\n"}],"key":"SrsDeRXvIm"}],"key":"eimZrldG7a"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"How it works","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KCkwjrvSq8"}],"key":"b1u0rOHstD"},{"type":"text","value":":","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"W7gt7lHEyT"}],"key":"yOhEumklpw"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Your agent generates an output","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"uaou0PfASL"}],"key":"UldrPheVlw"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"LLMJudge sends that output + rubric to an LLM","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"zdAjHbSNrl"}],"key":"J15sUoW5JN"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"LLM scores the output based on the rubric","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"fLarBkENgR"}],"key":"deFQ55kkjz"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Score is recorded in the evaluation report","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"v0QBaleygS"}],"key":"xHosg2pqjD"}],"key":"DpHaKHrrMf"}],"key":"pwZcqcaMCl"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Custom Evaluators: Domain-Specific Checks","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TYd3IetCce"}],"identifier":"custom-evaluators-domain-specific-checks","label":"Custom Evaluators: Domain-Specific Checks","html_id":"custom-evaluators-domain-specific-checks","implicit":true,"key":"CIjgjrlCnu"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"You can create custom evaluators by subclassing ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"UQw9b9EyqD"},{"type":"inlineCode","value":"Evaluator","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"p8cyxwQqYC"},{"type":"text","value":":","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"lChFoaUl2n"}],"key":"DnQB3OMVgO"}],"key":"VR5LElnOFz"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"class ContainsURL(Evaluator):\n    \"\"\"Check if output contains a valid URL.\"\"\"\n\n    def evaluate(self, ctx: EvaluatorContext) -> EvaluationReason:\n        output = ctx.output\n        # Simple URL detection\n        has_url = 'http://' in str(output) or 'https://' in str(output)\n\n        return EvaluationReason(\n            value=has_url,\n            explanation=\"URL found\" if has_url else \"No URL found\"\n        )\n\n# Test it\nurl_checker = ContainsURL()\nprint(\"Created custom ContainsURL evaluator\")","key":"onDkMAgCeT"},{"type":"output","id":"BHAhguDrQuK-HYgSdQFjc","data":[{"name":"stdout","output_type":"stream","text":"Created custom ContainsURL evaluator\n"}],"key":"aceSzAdurJ"}],"key":"GEzlBODfLe"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Key points","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"c02pLYOwAm"}],"key":"KOKhPmLMGo"},{"type":"text","value":":","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"aXRpNdeS5Y"}],"key":"JMKiQwykkW"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Implement ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"J0MGAcMndm"},{"type":"inlineCode","value":"evaluate","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"pb9fUONMnp"},{"type":"text","value":" method (can be sync or async)","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"A2bkggJlib"}],"key":"BQ4EmBAFPL"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Access inputs/outputs through ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"Z0hGcyuUMj"},{"type":"inlineCode","value":"EvaluatorContext","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"JxqJXQ8BmF"}],"key":"AK0ed8wCvI"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Return ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"mUyMnCXz4U"},{"type":"inlineCode","value":"EvaluationReason","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ecRHEgxdXw"},{"type":"text","value":" with value and explanation","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"VeCyRcFL8L"}],"key":"ZjjOgtwkVF"}],"key":"ZQoWRFQJ5Q"}],"key":"zhOuCnmywZ"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Exercise 2: Design Evaluators","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DPQj5wLhNq"}],"identifier":"exercise-2-design-evaluators","label":"Exercise 2: Design Evaluators","html_id":"exercise-2-design-evaluators","implicit":true,"key":"eh59dc2rYZ"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"For the sentiment analysis agent from Exercise 1:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"hB5kF27u02"}],"key":"gN6GgT8oFz"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"What ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"NvDhrOxe2f"},{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"deterministic","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"FBYTlnFhYu"}],"key":"mP1ooej7VY"},{"type":"text","value":" evaluators would you use?","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"hKhYS6trI8"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Think about checking exact label matches, valid sentiment values","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"IAC39KU3Yu"}],"key":"G1YZBJWorg"}],"key":"YZiP2BqSYx"}],"key":"yZ1y2m1Brb"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"What ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"E9pSg695JO"},{"type":"strong","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"subjective","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"dMzTwC7Lb2"}],"key":"ktTdkQQ4Hf"},{"type":"text","value":" aspects might need LLM evaluation?","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"rzQaMHZQtS"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":8,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Example: When a review has mixed sentiment, is the chosen label reasonable?","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"XdlH3e2GCX"}],"key":"dSuWSclKUx"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"What would your LLMJudge rubric say?","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"OhyIFa10UT"}],"key":"F05KjeD1mc"}],"key":"ueULH9Jkif"}],"key":"hoSQlaO5ON"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Design one ","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"RjaL5AmYno"},{"type":"strong","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"custom evaluator","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"tHKQEIFV8x"}],"key":"Sp1162fQLZ"},{"type":"text","value":" for a domain-specific check","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"ZE5SHo2Mba"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Example: “Output should be all lowercase” or “Response time should be fast”","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"UtUc50r7Tg"}],"key":"W4aGOKQqLC"}],"key":"HC0tGncmaW"}],"key":"Q5MzaB39gA"}],"key":"fnmISE7Uge"}],"key":"ZcLzSA9Xik"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# TODO: Your code here\n# Create evaluators for sentiment analysis\n\n# Example deterministic evaluator\n# sentiment_dataset.evaluators.append(EqualsExpected())\n\n# Example custom evaluator\n# class ValidSentiment(Evaluator):\n#     \"\"\"Check if output is a valid sentiment label.\"\"\"\n#     def evaluate(self, ctx: EvaluatorContext) -> EvaluationReason:\n#         valid_sentiments = {\"positive\", \"negative\", \"neutral\"}\n#         is_valid = ctx.output.lower() in valid_sentiments\n#         return EvaluationReason(\n#             value=is_valid,\n#             explanation=f\"Output is {'valid' if is_valid else 'invalid'} sentiment\"\n#         )","key":"jCAHjqg7eG"},{"type":"output","id":"F-za6CjUUgaS0nYkBKcfk","data":[],"key":"xt1f4DRgiT"}],"key":"Zrcl52rrOF"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Running Evaluations: From Code to Reports","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"fXHMSuQo24"}],"identifier":"running-evaluations-from-code-to-reports","label":"Running Evaluations: From Code to Reports","html_id":"running-evaluations-from-code-to-reports","implicit":true,"key":"l2k8TOSvQg"}],"key":"HKXPIfrFrN"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The Evaluation Loop","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"eyDcflnXyG"}],"identifier":"the-evaluation-loop","label":"The Evaluation Loop","html_id":"the-evaluation-loop","implicit":true,"key":"Q0FSFI3IBV"},{"type":"heading","depth":4,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Step 1: Define your task function","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"mALpOZatAG"}],"identifier":"step-1-define-your-task-function","label":"Step 1: Define your task function","html_id":"step-1-define-your-task-function","implicit":true,"key":"kZMlEz2joz"}],"key":"rWucOGKIQR"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Create a simple intent classifier agent\nsupport_agent = Agent(\n    'anthropic:claude-haiku-4-5',\n    system_prompt=(\n        \"You are a customer support intent classifier. \"\n        \"Classify user messages into one of: return, shipping, account. \"\n        \"Respond with ONLY the classification label, nothing else.\"\n    )\n)\n\nasync def classify_intent(inputs: str) -> str:\n    \"\"\"Our task: classify customer message intent.\"\"\"\n    result = await support_agent.run(inputs)\n    return result.output.lower().strip()\n\nprint(\"Created intent classification agent\")","key":"h7AgObk3Lp"},{"type":"output","id":"QazqNq30dahN94i8At-82","data":[{"name":"stdout","output_type":"stream","text":"Created intent classification agent\n"}],"key":"lBGHNsRIy2"}],"key":"C2Sy9aTje4"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 2: Run evaluation","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mwOdZt8ucZ"}],"identifier":"step-2-run-evaluation","label":"Step 2: Run evaluation","html_id":"step-2-run-evaluation","implicit":true,"key":"mhveInrAZZ"}],"key":"h0vdiPoTje"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Run experiment\nreport = await intent_dataset_with_evals.evaluate(\n    task=classify_intent,\n    max_concurrency=3,  # Run 3 cases in parallel\n    progress=True  # Show progress bar\n)\n\nprint(\"\\nEvaluation complete!\")\nprint(f\"Evaluated {len(report.cases)} cases\")","key":"u8jgAhRYls"},{"type":"output","id":"D3WEho9hkDcJlaNmgMdyK","data":[{"output_type":"display_data","metadata":{},"data":{"application/vnd.jupyter.widget-view+json":{"content":"{\"model_id\":\"44401b2bb3fe409ca4fb6977fc1fbc07\",\"version_major\":2,\"version_minor\":0}","content_type":"application/vnd.jupyter.widget-view+json"},"text/plain":{"content":"Output()","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"text/html":{"content":"<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\"></pre>\n","content_type":"text/html"},"text/plain":{"content":"","content_type":"text/plain"}}},{"name":"stdout","output_type":"stream","text":"\nEvaluation complete!\nEvaluated 3 cases\n"}],"key":"EJ48RhjPdE"}],"key":"JTZTBc72Qu"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 3: Analyze results","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"OrNDzhtar7"}],"identifier":"step-3-analyze-results","label":"Step 3: Analyze results","html_id":"step-3-analyze-results","implicit":true,"key":"xXkcmsPhTM"}],"key":"JBDXYH2BPk"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Print formatted report\nreport.print()\n\nprint(\"\\n\" + \"=\"*50)\nprint(\"Detailed results:\")\nprint(\"=\"*50)\n\n# Or get the data programmatically\nfor case in report.cases:\n    print(f\"\\nCase: {case.name}\")\n    print(f\"  Input: {case.inputs}\")\n    print(f\"  Output: {case.output}\")\n    print(f\"  Expected: {case.expected_output}\")\n    print(f\"  Assertions: {case.assertions}\")\n    print(f\"  All passed: {all(case.assertions.values())}\")","key":"vmrgQal5ls"},{"type":"output","id":"dOzJE-Nx_JdHY3dw1evQ7","data":[{"output_type":"display_data","metadata":{},"data":{"text/html":{"content":"<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\"><span style=\"font-style: italic\">    Evaluation Summary: classify_intent     </span>\n┏━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━┳━━━━━━━━━━┓\n┃<span style=\"font-weight: bold\"> Case ID          </span>┃<span style=\"font-weight: bold\"> Assertions </span>┃<span style=\"font-weight: bold\"> Duration </span>┃\n┡━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━╇━━━━━━━━━━┩\n│<span style=\"font-weight: bold\"> return_request   </span>│ <span style=\"color: #008000; text-decoration-color: #008000\">✔✔</span>         │  891.6ms │\n├──────────────────┼────────────┼──────────┤\n│<span style=\"font-weight: bold\"> shipping_status  </span>│ <span style=\"color: #008000; text-decoration-color: #008000\">✔✔</span>         │     1.1s │\n├──────────────────┼────────────┼──────────┤\n│<span style=\"font-weight: bold\"> account_question </span>│ <span style=\"color: #008000; text-decoration-color: #008000\">✔✔</span>         │     1.5s │\n├──────────────────┼────────────┼──────────┤\n│<span style=\"font-weight: bold\"> </span><span style=\"font-weight: bold; font-style: italic\">Averages</span><span style=\"font-weight: bold\">         </span>│ 100.0% <span style=\"color: #008000; text-decoration-color: #008000\">✔</span>   │     1.1s │\n└──────────────────┴────────────┴──────────┘\n</pre>\n","content_type":"text/html"},"text/plain":{"content":"\u001b[3m    Evaluation Summary: classify_intent     \u001b[0m\n┏━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━┳━━━━━━━━━━┓\n┃\u001b[1m \u001b[0m\u001b[1mCase ID         \u001b[0m\u001b[1m \u001b[0m┃\u001b[1m \u001b[0m\u001b[1mAssertions\u001b[0m\u001b[1m \u001b[0m┃\u001b[1m \u001b[0m\u001b[1mDuration\u001b[0m\u001b[1m \u001b[0m┃\n┡━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━╇━━━━━━━━━━┩\n│\u001b[1m \u001b[0m\u001b[1mreturn_request  \u001b[0m\u001b[1m \u001b[0m│ \u001b[32m✔\u001b[0m\u001b[32m✔\u001b[0m         │  891.6ms │\n├──────────────────┼────────────┼──────────┤\n│\u001b[1m \u001b[0m\u001b[1mshipping_status \u001b[0m\u001b[1m \u001b[0m│ \u001b[32m✔\u001b[0m\u001b[32m✔\u001b[0m         │     1.1s │\n├──────────────────┼────────────┼──────────┤\n│\u001b[1m \u001b[0m\u001b[1maccount_question\u001b[0m\u001b[1m \u001b[0m│ \u001b[32m✔\u001b[0m\u001b[32m✔\u001b[0m         │     1.5s │\n├──────────────────┼────────────┼──────────┤\n│\u001b[1m \u001b[0m\u001b[1;3mAverages\u001b[0m\u001b[1m        \u001b[0m\u001b[1m \u001b[0m│ 100.0% \u001b[32m✔\u001b[0m   │     1.1s │\n└──────────────────┴────────────┴──────────┘\n","content_type":"text/plain"}}},{"name":"stdout","output_type":"stream","text":"\n==================================================\nDetailed results:\n==================================================\n\nCase: return_request\n  Input: I want to return my order\n  Output: return\n  Expected: return\n  Assertions: {'EqualsExpected': EvaluationResult(name='EqualsExpected', value=True, reason=None, source=EvaluatorSpec(name='EqualsExpected', arguments=None)), 'MaxDuration': EvaluationResult(name='MaxDuration', value=True, reason=None, source=EvaluatorSpec(name='MaxDuration', arguments=(2.0,)))}\n  All passed: True\n\nCase: shipping_status\n  Input: Where is my package?\n  Output: shipping\n  Expected: shipping\n  Assertions: {'EqualsExpected': EvaluationResult(name='EqualsExpected', value=True, reason=None, source=EvaluatorSpec(name='EqualsExpected', arguments=None)), 'MaxDuration': EvaluationResult(name='MaxDuration', value=True, reason=None, source=EvaluatorSpec(name='MaxDuration', arguments=(2.0,)))}\n  All passed: True\n\nCase: account_question\n  Input: How do I reset my password?\n  Output: account\n  Expected: account\n  Assertions: {'EqualsExpected': EvaluationResult(name='EqualsExpected', value=True, reason=None, source=EvaluatorSpec(name='EqualsExpected', arguments=None)), 'MaxDuration': EvaluationResult(name='MaxDuration', value=True, reason=None, source=EvaluatorSpec(name='MaxDuration', arguments=(2.0,)))}\n  All passed: True\n"}],"key":"yIiu2qeqcS"}],"key":"IXdSfTYmOG"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Visualizing Results with Logfire","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mN4h9fwaSh"}],"identifier":"visualizing-results-with-logfire","label":"Visualizing Results with Logfire","html_id":"visualizing-results-with-logfire","implicit":true,"key":"LXbVL5PasL"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"While the printed reports are useful, ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"J8GZcddS2s"},{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Pydantic Logfire","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"InFncLuBZI"}],"key":"XBbsDOf20o"},{"type":"text","value":" provides a web UI for visualizing and analyzing evaluation results over time.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Jvh0uTN4rS"}],"key":"Hrhb5caMsg"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Why use Logfire?","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"sOYU9oIXir"}],"key":"Rfhde4jkLj"}],"key":"DlQPyqbxCi"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Interactive dashboards for evaluation metrics","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"jhZRey396e"}],"key":"FOGLU3R4dW"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Trace exploration for debugging failed cases","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"ukzVgDAPGi"}],"key":"J60PPCqF20"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Track trends across multiple evaluation runs","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"FrlqmofiIu"}],"key":"e8K7YfNxYz"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Team collaboration and sharing results","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"DebHrUAJ2z"}],"key":"BZsu9LkN9Q"}],"key":"LegLFCOI91"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Let’s configure Logfire integration:","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"hf0yiRAeIa"}],"key":"PiMb8oQ0XW"}],"key":"dDiKkOPyeo"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Note","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"RxiLxFTmyf"}],"key":"VsXxDAcQxB"},{"type":"text","value":": With Logfire configured, all subsequent evaluations will automatically send their results to the Logfire web UI. You can then:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"pNsSQswPRX"}],"key":"tofauDKcwI"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":2,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"View evaluation reports in an interactive dashboard","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"ZLkHkxSi3L"}],"key":"mldlRr1rPi"},{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Explore individual traces and spans","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"U1oARGaob5"}],"key":"HT5KpYFtWG"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Compare results across multiple runs","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"AZzdDPAjUm"}],"key":"HGNqMdaBo5"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Set up alerts for failing evaluations","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"KX9FppuJHi"}],"key":"VPN4jR82o2"}],"key":"J8KNg4hsdM"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Visit ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"Zz057l4p3E"},{"type":"link","url":"https://logfire.pydantic.dev","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"logfire​.pydantic​.dev","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"YNTpZHNCDX"}],"urlSource":"https://logfire.pydantic.dev","key":"aXC3deyJUB"},{"type":"text","value":" to view your evaluation results.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"rbPjaG8B0g"}],"key":"UBilnON91L"},{"type":"heading","depth":3,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Understanding Evaluation Results","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"Gipk9qq6A7"}],"identifier":"understanding-evaluation-results","label":"Understanding Evaluation Results","html_id":"understanding-evaluation-results","implicit":true,"key":"Rr8fJlCGq0"}],"key":"l6oClj2f3G"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import logfire\n\n# Configure Logfire\n# This will automatically send evaluation results to Logfire if token is present\nlogfire.configure(\n    send_to_logfire='if-token-present',\n\n)\n\nprint(\"Logfire configured!\")\nprint(\"Future evaluations will automatically appear in Logfire web UI\")","key":"f6W20S4Ft2"},{"type":"output","id":"8Qs0UjcmYjJUJE9zIIsfG","data":[{"name":"stdout","output_type":"stream","text":"Logfire configured!\nFuture evaluations will automatically appear in Logfire web UI\n"}],"key":"XD2EsD79Af"}],"key":"zS4dEXhcXU"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Comparing Experiments: Tracking Improvements","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"fBnV4o6D1Z"}],"identifier":"comparing-experiments-tracking-improvements","label":"Comparing Experiments: Tracking Improvements","html_id":"comparing-experiments-tracking-improvements","implicit":true,"key":"D16K5LkzRr"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Let’s modify our agent and compare results:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"GlQhwgfrRC"}],"key":"yeP4eOBWs6"}],"key":"WfYO3TCweT"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Create an improved agent with better prompt\nimproved_agent = Agent(\n    'anthropic:claude-haiku-4-5',\n    system_prompt=(\n        \"You are a customer support intent classifier. \"\n        \"Classify user messages into exactly one of these categories:\\n\"\n        \"- return: for return/refund requests\\n\"\n        \"- shipping: for delivery/tracking questions\\n\"\n        \"- account: for login/password/profile issues\\n\\n\"\n        \"Respond with ONLY the classification label in lowercase, nothing else.\"\n    )\n)\n\nasync def improved_classify_intent(inputs: str) -> str:\n    \"\"\"Improved task function.\"\"\"\n    result = await improved_agent.run(inputs)\n    return result.output.lower().strip()\n\n# Run evaluation with improved agent\nimproved_report = await intent_dataset_with_evals.evaluate(\n    task=improved_classify_intent,\n    max_concurrency=3,\n    progress=True\n)","key":"IZnTsca1By"},{"type":"output","id":"169Exi3t00y4MsT9id80a","data":[{"output_type":"display_data","metadata":{},"data":{"application/vnd.jupyter.widget-view+json":{"content":"{\"model_id\":\"41fef5deced9494c878ad1fc2a3eb132\",\"version_major\":2,\"version_minor\":0}","content_type":"application/vnd.jupyter.widget-view+json"},"text/plain":{"content":"Output()","content_type":"text/plain"}}},{"name":"stdout","output_type":"stream","text":"13:08:20.037 evaluate improved_classify_intent\n13:08:20.040   case: return_request\n13:08:20.040     execute improved_classify_intent\n13:08:20.042   case: shipping_status\n13:08:20.042     execute improved_classify_intent\n13:08:20.042   case: account_question\n13:08:20.042     execute improved_classify_intent\n"},{"output_type":"display_data","metadata":{},"data":{"text/html":{"content":"<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\"><span style=\"font-weight: bold\">Logfire</span> project URL: <a href=\"https://logfire-us.pydantic.dev/sglyon/sglagents\" target=\"_blank\"><span style=\"color: #008080; text-decoration-color: #008080; text-decoration: underline\">https://logfire-us.pydantic.dev/sglyon/sglagents</span></a>\n</pre>\n","content_type":"text/html"},"text/plain":{"content":"\u001b[1mLogfire\u001b[0m project URL: \u001b]8;id=388945;https://logfire-us.pydantic.dev/sglyon/sglagents\u001b\\\u001b[4;36mhttps://logfire-us.pydantic.dev/sglyon/sglagents\u001b[0m\u001b]8;;\u001b\\\n","content_type":"text/plain"}}},{"name":"stdout","output_type":"stream","text":"13:08:20.793     evaluator: EqualsExpected\n13:08:20.793     evaluator: MaxDuration\n               case: shipping_status\n13:08:20.849     evaluator: EqualsExpected\n13:08:20.850     evaluator: MaxDuration\n"},{"name":"stdout","output_type":"stream","text":"               case: return_request\n13:08:21.782     evaluator: EqualsExpected\n13:08:21.782     evaluator: MaxDuration\n"},{"output_type":"display_data","metadata":{},"data":{"text/html":{"content":"<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\"></pre>\n","content_type":"text/html"},"text/plain":{"content":"","content_type":"text/plain"}}}],"key":"B6u6vVbpGK"}],"key":"ZXLGRkHLq7"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Compare against baseline\nimproved_report.print(baseline=report)","key":"y3bBe8sK6t"},{"type":"output","id":"JDawWdcZ5tceIATPhWLsy","data":[{"output_type":"display_data","metadata":{},"data":{"text/html":{"content":"<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\"><span style=\"font-style: italic\">     Evaluation Diff: classify_intent → improved_classify_intent      </span>\n┏━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃<span style=\"font-weight: bold\"> Case ID          </span>┃<span style=\"font-weight: bold\"> Assertions </span>┃<span style=\"font-weight: bold\">                           Duration </span>┃\n┡━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩\n│<span style=\"font-weight: bold\"> account_question </span>│ <span style=\"color: #008000; text-decoration-color: #008000\">✔✔</span>         │ <span style=\"color: #008000; text-decoration-color: #008000\">1.5s → 749.9ms (-755.2ms / -50.2%)</span> │\n├──────────────────┼────────────┼────────────────────────────────────┤\n│<span style=\"font-weight: bold\"> return_request   </span>│ <span style=\"color: #008000; text-decoration-color: #008000\">✔✔</span>         │ <span style=\"color: #800000; text-decoration-color: #800000\">891.6ms → 1.7s (+849.4ms / +95.3%)</span> │\n├──────────────────┼────────────┼────────────────────────────────────┤\n│<span style=\"font-weight: bold\"> shipping_status  </span>│ <span style=\"color: #008000; text-decoration-color: #008000\">✔✔</span>         │ <span style=\"color: #008000; text-decoration-color: #008000\">1.1s → 807.5ms (-245.6ms / -23.3%)</span> │\n├──────────────────┼────────────┼────────────────────────────────────┤\n│<span style=\"font-weight: bold\"> </span><span style=\"font-weight: bold; font-style: italic\">Averages</span><span style=\"font-weight: bold\">         </span>│ 100.0% <span style=\"color: #008000; text-decoration-color: #008000\">✔</span>   │                               1.1s │\n└──────────────────┴────────────┴────────────────────────────────────┘\n</pre>\n","content_type":"text/html"},"text/plain":{"content":"\u001b[3m     Evaluation Diff: classify_intent → improved_classify_intent      \u001b[0m\n┏━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃\u001b[1m \u001b[0m\u001b[1mCase ID         \u001b[0m\u001b[1m \u001b[0m┃\u001b[1m \u001b[0m\u001b[1mAssertions\u001b[0m\u001b[1m \u001b[0m┃\u001b[1m \u001b[0m\u001b[1m                          Duration\u001b[0m\u001b[1m \u001b[0m┃\n┡━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩\n│\u001b[1m \u001b[0m\u001b[1maccount_question\u001b[0m\u001b[1m \u001b[0m│ \u001b[32m✔\u001b[0m\u001b[32m✔\u001b[0m         │ \u001b[32m1.5s → 749.9ms (-755.2ms / -50.2%)\u001b[0m │\n├──────────────────┼────────────┼────────────────────────────────────┤\n│\u001b[1m \u001b[0m\u001b[1mreturn_request  \u001b[0m\u001b[1m \u001b[0m│ \u001b[32m✔\u001b[0m\u001b[32m✔\u001b[0m         │ \u001b[31m891.6ms → 1.7s (+849.4ms / +95.3%)\u001b[0m │\n├──────────────────┼────────────┼────────────────────────────────────┤\n│\u001b[1m \u001b[0m\u001b[1mshipping_status \u001b[0m\u001b[1m \u001b[0m│ \u001b[32m✔\u001b[0m\u001b[32m✔\u001b[0m         │ \u001b[32m1.1s → 807.5ms (-245.6ms / -23.3%)\u001b[0m │\n├──────────────────┼────────────┼────────────────────────────────────┤\n│\u001b[1m \u001b[0m\u001b[1;3mAverages\u001b[0m\u001b[1m        \u001b[0m\u001b[1m \u001b[0m│ 100.0% \u001b[32m✔\u001b[0m   │                               1.1s │\n└──────────────────┴────────────┴────────────────────────────────────┘\n","content_type":"text/plain"}}}],"key":"DPO4jER6bV"}],"key":"etDmhuPne6"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Exercise 3: Run Your First Evaluation","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cNWfNxy6ja"}],"identifier":"exercise-3-run-your-first-evaluation","label":"Exercise 3: Run Your First Evaluation","html_id":"exercise-3-run-your-first-evaluation","implicit":true,"key":"ktEdMA1D9Z"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Using the sentiment analysis agent you designed in Exercise 1:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"yu2MO8jnEu"}],"key":"RMsHsOQuyr"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Create an agent that performs sentiment classification","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"gqVShLAoTP"}],"key":"AiisaKI8Yl"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Use your dataset from Exercise 1 (add more cases if needed)","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"qy7hgFqvrs"}],"key":"sr7paoL9Xs"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Add 2-3 evaluators (mix of built-in and custom from Exercise 2)","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"vi3xIqrpD6"}],"key":"XUJKOYTADn"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Run the evaluation using ","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"qJOujuBdgj"},{"type":"inlineCode","value":"await dataset.evaluate(task=your_function)","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"UMpnXJ45Ub"}],"key":"rHybmXfR7u"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Interpret the results:","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"ccbgjV2Afa"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":10,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Which cases passed/failed?","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"GVxLqHQ7aN"}],"key":"YPM06BT4RC"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"What patterns do you notice?","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"iScJfj5K0v"}],"key":"yApyv8vKHy"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"What would you improve about the agent or the test cases?","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"AxxUDSDBUc"}],"key":"oxbjYi8vUq"}],"key":"ouHE2DD7p6"}],"key":"jfSmVWRado"}],"key":"j2mmQq1rum"}],"key":"L5G4wNkmFp"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# TODO: Your code here","key":"uo2xz1xddP"},{"type":"output","id":"dtmx8xS-lP_UNcUPidmnp","data":[],"key":"SXZDOYOjtG"}],"key":"hqwa1gpJ0r"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Advanced Topics: Span-Based Evaluation and Dataset Generation","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ELrl6V6SBa"}],"identifier":"advanced-topics-span-based-evaluation-and-dataset-generation","label":"Advanced Topics: Span-Based Evaluation and Dataset Generation","html_id":"advanced-topics-span-based-evaluation-and-dataset-generation","implicit":true,"key":"gcDIymyrnC"}],"key":"OzBJCTNMO3"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Span-Based Evaluation: Evaluating the Process, Not Just the Output","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jgTxw1EpbO"}],"identifier":"span-based-evaluation-evaluating-the-process-not-just-the-output","label":"Span-Based Evaluation: Evaluating the Process, Not Just the Output","html_id":"span-based-evaluation-evaluating-the-process-not-just-the-output","implicit":true,"key":"vxc4DDuHme"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The Problem","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"QY5rz9fM3J"}],"key":"zcmFHwHOvi"},{"type":"text","value":": Sometimes the final answer is correct, but the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"tYBxQFQQRU"},{"type":"emphasis","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"how","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"rDNkmltCMW"}],"key":"zl0PAh4KYs"},{"type":"text","value":" matters","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"UuchKQfQug"}],"key":"D7qzPnacbN"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Example: Math problem solving","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"t1QfDKKMOY"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Output: “42” ✓ Correct!","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"av81oU6ukr"}],"key":"b8zS3eyuHJ"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"But did the agent:","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"z0GSOxPmrV"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":8,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Use the right formula?","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"yXIM2cRRZd"}],"key":"uA00rpTXYa"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Show its work?","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"HtUo0y5yuX"}],"key":"oqkxUo0TnT"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Make calculation errors that happened to cancel out?","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"uF7dQVG0Px"}],"key":"qruQTLkA8E"}],"key":"QObqula0Rp"}],"key":"hOe6b8kDfa"}],"key":"QHyNBVbLJt"}],"key":"wB7oD40xBR"}],"key":"v1o7wk7her"},{"type":"paragraph","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"strong","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Spans","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"kwYRR2bJde"}],"key":"LXBK5ZLSWz"},{"type":"text","value":": Execution traces from OpenTelemetry","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"idnvFNEGog"}],"key":"QLgk4E1E3C"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":14,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Capture what the agent did internally","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"LA1LB9gp9r"}],"key":"jN3MoCFmQn"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Tool calls made","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"f2pHNPc3op"}],"key":"rKqqi8d70h"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"LLM requests and responses","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"Bigfn3jKb4"}],"key":"jKHV1iNh1J"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Intermediate reasoning steps","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"MWXuyO8mre"}],"key":"jRDco2DQQx"}],"key":"ZwI9dds5iI"},{"type":"heading","depth":4,"position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"HasMatchingSpan Evaluator:","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"febpusILWR"}],"identifier":"hasmatchingspan-evaluator","label":"HasMatchingSpan Evaluator:","html_id":"hasmatchingspan-evaluator","implicit":true,"key":"m6F8NupjBH"}],"key":"G4P2bLTOoJ"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Ensure agent called a specific tool\nspan_evaluator = HasMatchingSpan(\n    query={'name_contains': 'calculator_tool'},\n    evaluation_name='used_calculator'\n)\n\nprint(\"Created span-based evaluator\")\nprint(\"This evaluator checks that a span named 'calculator_tool' was called\")","key":"p18XCYcFsF"},{"type":"output","id":"5Hvg2MBft45eQp0CBsAha","data":[{"name":"stdout","output_type":"stream","text":"Created span-based evaluator\nThis evaluator checks that a span named 'calculator_tool' was called\n"}],"key":"CIojcTt3Sj"}],"key":"mRmSbYoCEE"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Why this matters","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZspOT5qsgi"}],"key":"gZZLytWWUb"},{"type":"text","value":":","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mKRHBEB5Nb"}],"key":"ThUnDnVIos"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Catches “lucky guesses” where agent gets answer right for wrong reasons","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"iruqfEgLoE"}],"key":"J0G9rLM8DI"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Validates agent is following intended reasoning process","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"fgva2lcm6e"}],"key":"HYF7F9zLt5"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Useful for multi-step tasks where process correctness matters","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ltujSVuzu2"}],"key":"U3HxxeCVq0"}],"key":"c7bTT0jL9t"}],"key":"Ah2BA68Ton"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Generating Datasets with LLMs","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"FAljCvF0El"}],"identifier":"generating-datasets-with-llms","label":"Generating Datasets with LLMs","html_id":"generating-datasets-with-llms","implicit":true,"key":"TkPsw9d7K0"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The Challenge","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"X08acifeWW"}],"key":"IImhVgMiiD"},{"type":"text","value":": Creating comprehensive test datasets is tedious","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"UcXI2GWnZG"}],"key":"M9abNapSHw"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Need diverse inputs covering edge cases","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"NYi8MooNHg"}],"key":"OD2Bdai49E"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Need correct expected outputs","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"ANhinuUIzm"}],"key":"J0JzQlgB38"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Manual creation doesn’t scale","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"pG4wsLklDa"}],"key":"WIv1kikL5G"}],"key":"q59BkuouWb"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"strong","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Solution","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"zqNsZWxbiS"}],"key":"EcNlv4i8zT"},{"type":"text","value":": Use an LLM to generate test cases","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"l5kaZiV3Am"}],"key":"w5xZZcztfY"}],"key":"G7bidBVuLt"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from pydantic_evals.generation import generate_dataset\n\n# Generate dataset for sentiment analysis\ngenerated_dataset = await generate_dataset(\n    dataset_type=Dataset[str, str],  # Input and output types\n    n_examples=5,  # Generate 5 test cases\n    extra_instructions=(\n        \"Create diverse restaurant reviews with clear sentiment. \"\n        \"Input should be a restaurant review. \"\n        \"Output should be the sentiment: positive, negative, or neutral.\"\n    ),\n    model='anthropic:claude-haiku-4-5'\n)\n\nprint(f\"Generated {len(generated_dataset.cases)} test cases\")\nfor i, case in enumerate(generated_dataset.cases[:3]):\n    print(f\"\\nCase {i+1}:\")\n    print(f\"  Input: {case.inputs}\")\n    print(f\"  Expected: {case.expected_output}\")","key":"cEgLghS3kU"},{"type":"output","id":"SxKLpCf6beh5BGWov_XnX","data":[{"name":"stdout","output_type":"stream","text":"Generated 5 test cases\n\nCase 1:\n  Input: The food was absolutely delicious and the service was impeccable. Our waiter was attentive without being intrusive, and the ambiance was perfect for our anniversary dinner. Highly recommend!\n  Expected: positive\n\nCase 2:\n  Input: Terrible experience from start to finish. The food was cold, the waiter was rude, and we waited 45 minutes just to get our appetizers. Never going back and won't recommend to anyone.\n  Expected: negative\n\nCase 3:\n  Input: The restaurant was okay. Food was fine, nothing special. Prices are reasonable. Service was adequate but a bit slow. It's an average place to grab a meal.\n  Expected: neutral\n"}],"key":"uvVLXgaEoT"}],"key":"GVw9MplRGf"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"How it works","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SSz3H6qLxp"}],"key":"Y7ZARZp3K5"},{"type":"text","value":":","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GKpMlNTF9U"}],"key":"n3kOibwlr1"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"You specify the dataset type with input/output types (e.g., ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"XOdx7hcs0A"},{"type":"inlineCode","value":"Dataset[str, str]","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"MHN9kVThs6"},{"type":"text","value":")","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"HgxkxC7IYg"}],"key":"LUA5tizA8m"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"LLM generates diverse test scenarios based on your instructions","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"g3LzgVjEbl"}],"key":"gXR9pJDxZ0"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Returns properly structured ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"McAyHwba2w"},{"type":"inlineCode","value":"Dataset","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"AOjt5hs2OW"},{"type":"text","value":" object with generated cases","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"rVY1sCPRiw"}],"key":"Ze7y2UwEM3"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Can optionally save to file for version control (using ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"sUWygrzWgx"},{"type":"inlineCode","value":"path","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"a4BZfThn4Y"},{"type":"text","value":" parameter)","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"f32h9ks7ZB"}],"key":"RsLO9M3QcO"}],"key":"KkiMjfDojO"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"strong","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Best practices","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"gOVguZxnVH"}],"key":"BHRqpkVefY"},{"type":"text","value":":","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"ahmuqRFdxD"}],"key":"VXfP1Oa6Sy"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":10,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Review generated cases before using","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"oRuSAfYBn7"}],"key":"c2TxlXd04X"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Mix generated and hand-crafted cases","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"mg455MOveN"}],"key":"eLFh4kI7PG"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Regenerate periodically to expand coverage","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"EleufT3fNx"}],"key":"sudeO2zP6N"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Use ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"erwkuI3IVp"},{"type":"inlineCode","value":"extra_instructions","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"tbHEEkfdGd"},{"type":"text","value":" to guide the LLM toward specific edge cases","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"OPFMFnuCpb"}],"key":"Y5ELyWlolE"}],"key":"sHIex2lXo3"}],"key":"o9YXtwXcNy"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Evaluating RAG Systems: A Two-Stage Challenge","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"fCtiG7dPLu"}],"identifier":"evaluating-rag-systems-a-two-stage-challenge","label":"Evaluating RAG Systems: A Two-Stage Challenge","html_id":"evaluating-rag-systems-a-two-stage-challenge","implicit":true,"key":"PgAGjYTfUQ"}],"key":"wRi2W9KZrN"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"What is RAG?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"IbPuAWOi0V"}],"identifier":"what-is-rag","label":"What is RAG?","html_id":"what-is-rag","implicit":true,"key":"vrsEqFmysE"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"RAG = Retrieval-Augmented Generation","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"yPCBc754Re"}],"key":"JvqR3ga9Ry"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Common pattern for AI agents that need to answer questions about documents/data","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"jTIH1gb50o"}],"key":"zBNo0ho2bf"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Two stages:","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"FBPbuzepll"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"strong","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Retrieval","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"DIis4Hhvvr"}],"key":"NHne9I0ZZ5"},{"type":"text","value":": Find relevant documents/passages from knowledge base","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"lzw8Yn79sz"}],"key":"pq9pIU2vQY"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"strong","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Generation","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"l0Eqbkuqvn"}],"key":"g0VGSFHvQl"},{"type":"text","value":": Use retrieved context to generate answer","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"IrCUg8SY4V"}],"key":"KfytsOcqdP"}],"key":"FAePgRbe5P"}],"key":"Ay80SyRFtk"}],"key":"RmUr7QLigM"},{"type":"heading","depth":4,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Why RAG Evaluation is Different","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"u63Mwiylv9"}],"identifier":"why-rag-evaluation-is-different","label":"Why RAG Evaluation is Different","html_id":"why-rag-evaluation-is-different","implicit":true,"key":"cwlkYSxCBI"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":11,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Traditional evaluation: just check the final answer","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"jc4YXM1A7B"}],"key":"MBL4dhVSrf"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"RAG evaluation: need to check ","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"wtGQAJZf5h"},{"type":"emphasis","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"both","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"iCEkmuefOF"}],"key":"yhWRlKCV7T"},{"type":"text","value":" stages","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"Ljl55mkYhz"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":13,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Is the retrieval finding the right documents?","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"nJRYNpt3Ep"}],"key":"fiTkwCc2Oo"},{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Is the generation using those documents correctly?","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"Eyj2JNDEWs"}],"key":"VTzc4a5NUZ"}],"key":"KqwIBpRMSc"}],"key":"F8sKa8fZAG"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Failure can happen at either stage (or both!)","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"oojgJUubzi"}],"key":"kupSUQOaNp"}],"key":"hSpRQn7Gr4"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"strong","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Example Failure Modes","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"xqc85ese8j"}],"key":"oAJvuvKBHk"},{"type":"text","value":":","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"jfGNzPmF2f"}],"key":"iuwZstae81"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":18,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"✓ Retrieval works, ✗ Generation fails: Found right docs, but hallucinated answer","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"tiWQIZXYy6"}],"key":"eTAKGNMlJN"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"✗ Retrieval fails, ✓ Generation works: Couldn’t find relevant docs, so generated plausible but wrong answer","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"dwt6ykdzWR"}],"key":"GH4sc1OBkx"},{"type":"listItem","spread":true,"position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"✗ Both fail: Retrieved irrelevant docs ","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"vyyPqm0a3P"},{"type":"emphasis","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"and","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"sQ7BhLYJxZ"}],"key":"e80haErMOv"},{"type":"text","value":" made up information","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"rSoICodlFz"}],"key":"gn3vKOEVDG"}],"key":"Xs5CWt7VHw"}],"key":"Z9JoUQTAFV"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"RAG Evaluation Metrics","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"yb1qTQTZyu"}],"identifier":"rag-evaluation-metrics","label":"RAG Evaluation Metrics","html_id":"rag-evaluation-metrics","implicit":true,"key":"zs0b7NFTzv"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Retrieval Metrics","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Sivfe5YD57"}],"key":"jQyH8uJddl"},{"type":"text","value":" (Is the retrieval working?)","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"yYP3uCDgxO"}],"key":"OyTjt8ZTgw"}],"key":"u9xPRr1wo8"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"class PrecisionAtK(Evaluator):\n    \"\"\"Check if retrieved documents are relevant.\"\"\"\n\n    def __init__(self, k: int = 5):\n        self.k = k\n\n    def evaluate(self, ctx: EvaluatorContext) -> EvaluationReason:\n        # Assume ctx.metadata contains retrieved doc IDs and ground truth\n        retrieved_docs = ctx.metadata.get('retrieved_doc_ids', [])[:self.k]\n        relevant_docs = ctx.metadata.get('relevant_doc_ids', [])\n\n        relevant_retrieved = set(retrieved_docs) & set(relevant_docs)\n        precision = len(relevant_retrieved) / self.k if self.k > 0 else 0\n\n        return EvaluationReason(\n            value=precision,\n            explanation=f\"Retrieved {len(relevant_retrieved)}/{self.k} relevant docs\"\n        )\n\nclass RecallAtK(Evaluator):\n    \"\"\"Check if all relevant documents were found.\"\"\"\n\n    def __init__(self, k: int = 5):\n        self.k = k\n\n    def evaluate(self, ctx: EvaluatorContext) -> EvaluationReason:\n        retrieved_docs = ctx.metadata.get('retrieved_doc_ids', [])[:self.k]\n        relevant_docs = ctx.metadata.get('relevant_doc_ids', [])\n\n        relevant_retrieved = set(retrieved_docs) & set(relevant_docs)\n        recall = len(relevant_retrieved) / len(relevant_docs) if len(relevant_docs) > 0 else 0\n\n        return EvaluationReason(\n            value=recall,\n            explanation=f\"Found {len(relevant_retrieved)}/{len(relevant_docs)} relevant docs\"\n        )\n\nprint(\"Created RAG retrieval evaluators\")","key":"zImTWfdzfg"},{"type":"output","id":"iQK8wiUoltuUDYAIF4p5e","data":[{"name":"stdout","output_type":"stream","text":"Created RAG retrieval evaluators\n"}],"key":"wSWySfWM4c"}],"key":"uPVsVBlT5u"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Generation Metrics","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"aQOc0Gh5RH"}],"key":"FOu4K7sPeQ"},{"type":"text","value":" (Is the generation working?)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"wl0gllwsnw"}],"key":"B6xoCFJ0hQ"}],"key":"Qp0RTTT0fV"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"class Faithfulness(Evaluator):\n    \"\"\"Check if answer is grounded in retrieved context.\"\"\"\n\n    async def evaluate(self, ctx: EvaluatorContext) -> EvaluationReason:\n        answer = ctx.output\n        context = ctx.metadata.get('retrieved_context', '')\n\n        # Use LLM to judge faithfulness\n        judge = Agent('anthropic:claude-haiku-4-5')\n        result = await judge.run(\n            f\"Context: {context}\\n\\n\"\n            f\"Answer: {answer}\\n\\n\"\n            f\"Is the answer fully supported by the context? \"\n            f\"Respond with YES, NO, or PARTIAL and explain why.\"\n        )\n\n        assessment = result.data\n        is_faithful = assessment.startswith('YES')\n\n        return EvaluationReason(\n            value=is_faithful,\n            explanation=assessment\n        )\n\nprint(\"Created Faithfulness evaluator\")","key":"h54reCer3w"},{"type":"output","id":"d7m6rDzUmz3wdSk11V1qI","data":[{"name":"stdout","output_type":"stream","text":"Created Faithfulness evaluator\n"}],"key":"b5PyCUpDho"}],"key":"N5XtQJbw88"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Best Practices for RAG Evaluation","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"d9L1DwbeDq"}],"identifier":"best-practices-for-rag-evaluation","label":"Best Practices for RAG Evaluation","html_id":"best-practices-for-rag-evaluation","implicit":true,"key":"Cx6L91GrrZ"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"1. Evaluate Stages Independently","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"OyACJUJLYQ"}],"key":"GEBVAO3O7C"}],"key":"A0xznzPgCX"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Create separate datasets for retrieval and generation to pinpoint where failures occur.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"w8DdJaZ0tv"}],"key":"NmbxHENztp"}],"key":"v5XflUFOfK"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Example: Retrieval evaluation dataset\nretrieval_dataset = Dataset(\n    name=\"Retrieval Quality\",\n    cases=[\n        Case(\n            inputs={\"query\": \"What are the return policies?\"},\n            metadata={\n                \"relevant_doc_ids\": [\"doc_42\", \"doc_87\"],  # Ground truth\n                \"retrieved_doc_ids\": [\"doc_42\", \"doc_87\", \"doc_13\", \"doc_99\", \"doc_5\"],  # Simulated retrieval\n            }\n        ),\n    ],\n    evaluators=[\n        PrecisionAtK(k=5),\n        RecallAtK(k=5),\n    ]\n)\n\nprint(\"Created retrieval evaluation dataset\")","key":"qLApytgRWJ"},{"type":"output","id":"Saq2JAVb4xcfgxWAE6juJ","data":[{"name":"stdout","output_type":"stream","text":"Created retrieval evaluation dataset\n"}],"key":"h7zMwa4mBW"}],"key":"i8J8SlUV34"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Why separate?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"x2ZwXXGYNm"}],"key":"opNXQDi1Kr"}],"key":"fia399wn2n"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":2,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Pinpoints where failures occur","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"UNGWb40Y4x"}],"key":"YBFtbegU9O"},{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Can optimize retrieval and generation independently","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"hDX5h2SRL2"}],"key":"bcY3OINWoX"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Clearer diagnosis: “Our retrieval is great but generation hallucinates” vs “Both need work”","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"QcQFAAvszH"}],"key":"KqOwFKKNOA"}],"key":"Jdhj3L2dSD"}],"key":"nmXEBhZelZ"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Exercise: Design RAG Evaluation","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dsgpYOeKxe"}],"identifier":"exercise-design-rag-evaluation","label":"Exercise: Design RAG Evaluation","html_id":"exercise-design-rag-evaluation","implicit":true,"key":"JLZd0VJwhp"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Scenario","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"lmNc8DtKPT"}],"key":"WENI6k9Y42"},{"type":"text","value":": You’re building a RAG system that answers questions about a company’s internal documentation.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Seo3oqLHN6"}],"key":"IM6uf0Xo6c"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Tasks","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"BEzhkEDQab"}],"key":"iCUbVCcGFH"},{"type":"text","value":":","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"zuW4tC92MX"}],"key":"FPXXyKzPNJ"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":7,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"strong","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Identify failure modes","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"C3LgYKd6Yu"}],"key":"eih3rEctnV"},{"type":"text","value":": What are 3 ways this RAG system could fail?","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"sAhB2VXUmX"}],"key":"LDP8Jiz1uy"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"strong","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Design retrieval tests","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"lLQn6wCHHj"}],"key":"Oktg5DSJ2a"},{"type":"text","value":": What cases would test if retrieval is working?","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"bQVLefxHna"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":9,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"What queries should always retrieve specific documents?","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"YEUOz6ywxS"}],"key":"CbaFCvg5Ky"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"What edge cases might break retrieval?","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"oFziFiBxtk"}],"key":"zJNDHlpASk"}],"key":"FrTK0607Lf"}],"key":"eRvFS01zXq"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"strong","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Design generation tests","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"MtkD8FCA4U"}],"key":"Ui2yuVxeDM"},{"type":"text","value":": Assuming perfect retrieval, how do you test generation?","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"kpxaVv4Iva"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":12,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"What makes a “good” answer?","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"Z7zXxEtNIF"}],"key":"AB1X66lFkb"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"How do you detect hallucinations?","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"OJVGwoqM1K"}],"key":"BZHRIPlf3D"}],"key":"J1JGEPRbUR"}],"key":"qL8m164jRs"},{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"strong","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Create evaluation pipeline","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"pKVajPWFGe"}],"key":"PcGIsYZv5i"},{"type":"text","value":": Sketch code for evaluating both stages","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"s5miKihrOx"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":15,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"What metrics would you track?","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"IJ2Wqr8NOI"}],"key":"Zk7hU3BkIu"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"How would you report results?","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"QfRW5uplyJ"}],"key":"uHjSpkBcQd"}],"key":"YykhA3sCTc"}],"key":"NModepMHIF"}],"key":"njOgynF2YO"}],"key":"ENmCQ85Is3"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# TODO: Your code here","key":"en6u45AEND"},{"type":"output","id":"kAXgAMgQ4gZsNsbn-sUa3","data":[],"key":"x9pI5Gn6f9"}],"key":"JM2HlSVRPB"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Integration and Best Practices","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"HjbQFiPqXB"}],"identifier":"integration-and-best-practices","label":"Integration and Best Practices","html_id":"integration-and-best-practices","implicit":true,"key":"SSCQegH8zh"}],"key":"VloOEzKdZz"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"When to Use Each Evaluation Type","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GpNuhsthoB"}],"identifier":"when-to-use-each-evaluation-type","label":"When to Use Each Evaluation Type","html_id":"when-to-use-each-evaluation-type","implicit":true,"key":"aRbyJItOaj"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Deterministic Evaluators","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"izc0anPH8s"}],"key":"jUHEKp2PrP"},{"type":"text","value":" when:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"gUx9zYGdHB"}],"key":"WHrWdMI61A"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Clear right/wrong answers exist","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"d9FXbmcMFs"}],"key":"hyQKrR3EMs"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Output format matters (structured data)","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"dY3JxYKfNB"}],"key":"whlt6oA0oi"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Security/safety constraints (no PII leakage)","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"C92NjE36xh"}],"key":"jgEJxzgxyd"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Performance requirements (latency, cost)","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"FJAkUzJMhM"}],"key":"w6bzhfnUja"}],"key":"xWiVWR3yKR"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"strong","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"LLM as Judge","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"sLUfL9zVRj"}],"key":"yfKgTYTrIH"},{"type":"text","value":" when:","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"PoqvJSU5wY"}],"key":"Ib7aUTLDHG"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":12,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Multiple valid answers exist","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"vPMsZeSViT"}],"key":"b4fe6dCTxi"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Quality is subjective (helpfulness, tone)","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"Rrhalr22Vx"}],"key":"NG2HFVdq2C"},{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Semantic equivalence matters (“Paris” vs “The capital of France is Paris”)","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"qEvl2jQsKg"}],"key":"RiN4NBTY5i"}],"key":"YFz0ezJoNn"},{"type":"paragraph","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"strong","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Span-Based Evaluation","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"COjbW4nH9g"}],"key":"YwAEDZfaCS"},{"type":"text","value":" when:","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"QS4Mv2Udlg"}],"key":"ptMHCkEEqx"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":18,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Process correctness matters, not just output","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"f3PyO37wXf"}],"key":"csWKOQC5eG"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"Multi-step reasoning needs validation","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"VS9VXRiiGX"}],"key":"HHeyOQRIA3"},{"type":"listItem","spread":true,"position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"Tool usage patterns are important","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"bxpjbunUfy"}],"key":"h9h7VTcwFs"},{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Debugging complex agent behaviors","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"rzzjv93RcR"}],"key":"zGPagBB2am"}],"key":"lYPjUXnj3O"}],"key":"ptEPKcUjVC"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Tips for Effective Evaluation","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"k72GFLdUZd"}],"identifier":"tips-for-effective-evaluation","label":"Tips for Effective Evaluation","html_id":"tips-for-effective-evaluation","implicit":true,"key":"kQmYWBRNO7"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Start Small, Grow Gradually","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"L9o1jmRBXO"}],"key":"B27iXChnEo"},{"type":"text","value":":","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"WFR09rfps9"}],"key":"VsTiVqpEOh"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Begin with 5-10 cases covering main scenarios","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"VVkBHDJAmN"}],"key":"KOw8Z13hRh"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Add cases as you discover failures","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"SSUb5ooHN7"}],"key":"SysLab9QvZ"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Prioritize cases that would impact users most","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"tAVEb3S2zO"}],"key":"MetI2CkIC0"}],"key":"cF4TNeWQZE"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"strong","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Balance Coverage and Maintainability","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"X052LIxaxC"}],"key":"AaKjM8eKWs"},{"type":"text","value":":","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"mnaEtRS4bU"}],"key":"AqLFQUTviL"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":11,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Don’t try to test everything","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"YgE9ecejMN"}],"key":"ZV9aHCLEUG"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Focus on high-risk or high-value scenarios","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"TyhfwQQinl"}],"key":"B5hvejxyq8"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Remove redundant cases","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"lfV2Rvpaw3"}],"key":"Yw1Z86pESL"}],"key":"ELrif3yHZv"},{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"strong","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Make Evaluators Specific and Clear","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"IkjIZgsBnJ"}],"key":"aJJ9nCwT3K"},{"type":"text","value":":","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"IaHiAKBJRe"}],"key":"IH5IK6HQTH"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":17,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Good rubric: “Score 0-10 on factual accuracy. Check claims against provided context.”","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"ZHemZ5Er7u"}],"key":"kSBJdL3cUl"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"Bad rubric: “Score the quality of the response.”","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"KJSspp1n6e"}],"key":"VTMEKxuuWv"}],"key":"fLUunXAWb9"},{"type":"paragraph","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"strong","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"Version Control Your Datasets","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"lHOrnDU35F"}],"key":"tALx9b8aYr"},{"type":"text","value":":","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"cmkJSGJ7Ho"}],"key":"tmQghR21gV"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":22,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Store datasets as YAML/JSON in git","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"xh6HODY53E"}],"key":"gnKKyHXAai"},{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"Track changes over time","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"riEIqgARQv"}],"key":"SBiScPKkSP"},{"type":"listItem","spread":true,"position":{"start":{"line":24,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"Share across team","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"jYpbCmHqRk"}],"key":"XEMXAMHn1e"}],"key":"blfVhHY62t"},{"type":"paragraph","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"strong","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"Automate Where Possible","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"RxRp0p36I3"}],"key":"ejzh2iJOUG"},{"type":"text","value":":","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"ExPl6YnGbh"}],"key":"RYq6CRuTz3"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":28,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"Run evals in CI/CD pipeline","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"Edg69jYfqx"}],"key":"ak4RJStXQH"},{"type":"listItem","spread":true,"position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"Block deploys if pass rate drops","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"QISvlzw68z"}],"key":"bWEWDK0FMb"},{"type":"listItem","spread":true,"position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"text","value":"Generate alerts for regressions","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"PudCEywt6O"}],"key":"hKp0maAuoY"}],"key":"CkkTBb34YO"}],"key":"goCE3iI5JR"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Exercise: Evaluation Strategy Design","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hseOZCMq2t"}],"identifier":"exercise-evaluation-strategy-design","label":"Exercise: Evaluation Strategy Design","html_id":"exercise-evaluation-strategy-design","implicit":true,"key":"gPgy1qdTXv"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Choose one scenario:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"TAmYEqLg5k"}],"key":"Xvl7NuP0Kg"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"E-commerce support agent","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"YLpfDIdU7w"}],"key":"hI4XK4uEiY"},{"type":"text","value":": Handles returns, shipping, account questions","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"qR0K2PAwK6"}],"key":"Fv9ZqyKzhv"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"strong","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Code review agent","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"gM0eKJauOV"}],"key":"LJTEIiwg9D"},{"type":"text","value":": Reviews pull requests, suggests improvements","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"SJR2POaKeH"}],"key":"wv3aBYzGM3"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"strong","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Data analysis agent","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"k0RUTaAZWX"}],"key":"a2ekQrhz5D"},{"type":"text","value":": Answers questions about datasets using pandas","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"eYaFqUqI62"}],"key":"fVdEK3rGJa"}],"key":"VLaH9VP7V3"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"For your chosen scenario:","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"F6SHaRhhrx"}],"key":"tbkUMY0Wla"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":11,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Design an evaluation strategy:","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"zysMwYJtqt"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":12,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"What’s in your test dataset? (10+ cases)","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"HHiFDLaXrs"}],"key":"Vqt4LnsYNH"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"What evaluators would you use?","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"MAnQR2RNxG"}],"key":"BdLajBTBIl"},{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"How would you measure success?","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"Xd7vyKsBk1"}],"key":"a5LagA32fO"}],"key":"S3O3QsykAa"}],"key":"dE8oE0qZ4X"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Describe your development workflow:","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"Xg4g2Yqg3G"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":16,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"When do you run evals?","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"ypYIMea1XJ"}],"key":"esSRoI6IcE"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"What metrics do you track?","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"zi7D9OrUza"}],"key":"X8uASeS1cT"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"How do you decide when to deploy?","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"nuslnRDEi5"}],"key":"oqJSLN6mZJ"}],"key":"u9O7NlbZGG"}],"key":"blJ2ttlehN"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Plan for production:","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"D84AhVeZvT"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":20,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"How do you handle failures?","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"ziaJqJp7yS"}],"key":"IzNIGhgdrN"},{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"When do you update your dataset?","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"mfhVA3rdfH"}],"key":"nxsGfPKdT7"},{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"What triggers re-evaluation?","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"fU7MF4wgvR"}],"key":"VyQ3uK7hQw"}],"key":"cce3eG4a0W"}],"key":"ZRvVxhZfcr"}],"key":"JDyCP22lIW"}],"key":"aLaBQAmhw5"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Connections to Course Themes","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"AXjDytF8Pe"}],"identifier":"connections-to-course-themes","label":"Connections to Course Themes","html_id":"connections-to-course-themes","implicit":true,"key":"WEjd4UAmOx"}],"key":"k6xkRqxGJi"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Game Theory and Evaluation","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"czHEGrNMBx"}],"identifier":"game-theory-and-evaluation","label":"Game Theory and Evaluation","html_id":"game-theory-and-evaluation","implicit":true,"key":"Ywceu4SXHw"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Agent alignment","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"TVX29EAdjR"}],"key":"imvOeAs8dG"},{"type":"text","value":": Evaluation as mechanism design","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"snhP4t7cGt"}],"key":"ABDzpuNOvS"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"You design rubrics (rules) to incentivize desired behaviors","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"UtsIWPWeuV"}],"key":"WKJ0XBMJOv"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"LLM as Judge is like a referee in a game","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"zo2wa79LEn"}],"key":"DrREy6y8sY"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Pass/fail thresholds create strategic constraints","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"AvC6WK5yBH"}],"key":"bfCZ8Rmwyu"}],"key":"pwK5XD6gzc"}],"key":"rJz7Fbu7rg"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"strong","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Adversarial evaluation","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"u02m7rALYm"}],"key":"eFxMIstjfY"},{"type":"text","value":": Red team vs Blue team","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"BIDk7DaKh7"}],"key":"UwyLmFqZrf"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":9,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Attackers try to make agent fail (jailbreaking, prompt injection)","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"sRi2pD3QPr"}],"key":"Q1lVdbdskX"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Defenders build evals that catch these attacks","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"DkUBmUIniB"}],"key":"vK6i4aXSYj"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Nash equilibrium between robustness and capability","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"DjJ87hh6DQ"}],"key":"B0Bj4FjI7n"}],"key":"NFyXXJQm94"}],"key":"hB0bioeJfZ"}],"key":"PcblOs51bd"},{"type":"heading","depth":3,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Network Effects in AI Systems","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"gcGqhzwmDf"}],"identifier":"network-effects-in-ai-systems","label":"Network Effects in AI Systems","html_id":"network-effects-in-ai-systems","implicit":true,"key":"DMAEL9QQrI"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":15,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"strong","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Evaluation datasets as networks","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"avrUR6DmdZ"}],"key":"NxsVyIynIf"},{"type":"text","value":":","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"GKQgEW4Eme"}],"key":"rFOQkaCVsA"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":16,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Cases can have dependencies (one builds on another)","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"xkOH9MopQD"}],"key":"RPoVEtMMxG"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Failures can cascade (if base functionality breaks, many cases fail)","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"cGtU0NzGIX"}],"key":"Kd1r0lqllH"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"Coverage metrics: are there “clusters” of untested scenarios?","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"wUrQxxjbbW"}],"key":"bOyCTuMdTo"}],"key":"DSu6MRdFQm"}],"key":"uxi7f8RUUp"},{"type":"listItem","spread":true,"position":{"start":{"line":20,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"strong","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"Agent-to-agent evaluation","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"wZEUgKnjKb"}],"key":"BfSLZ3BThA"},{"type":"text","value":":","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"EMWgBkb8MB"}],"key":"GpuakpOVTR"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":21,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Multi-agent systems need coordinated evaluation","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"cPMLx4pSCD"}],"key":"nGrNo0irsj"},{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Agent A’s outputs become Agent B’s inputs","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"dGgmbeS6II"}],"key":"nKk8oOiAK2"},{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"Network of evals reflects agent interaction topology","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"g6JsfxPy5J"}],"key":"apxTV3U8jk"}],"key":"F3hwHMgqBD"}],"key":"MgDR2CcKaO"}],"key":"w8Ei02IZzn"},{"type":"heading","depth":3,"position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"Emergence in Complex AI Systems","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"S8uynpDDl9"}],"identifier":"emergence-in-complex-ai-systems","label":"Emergence in Complex AI Systems","html_id":"emergence-in-complex-ai-systems","implicit":true,"key":"X7nNVyEXhy"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":27,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":27,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"strong","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"Emergent behaviors","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"SGJLGT1Puf"}],"key":"SgUDjUXgEz"},{"type":"text","value":" in multi-step agents:","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"NDWnaRsoyT"}],"key":"abduPZ4fTF"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":28,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"Simple agent + simple tools → complex behaviors","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"IMt3671IFH"}],"key":"VwhoLl4OUi"},{"type":"listItem","spread":true,"position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"Can’t predict all outcomes from components","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"yefVZJnBFw"}],"key":"lVMz7wziXJ"},{"type":"listItem","spread":true,"position":{"start":{"line":30,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"Evaluation discovers emergent capabilities (and failures)","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"cpTef04OYg"}],"key":"eE5Jt0Vu0P"}],"key":"gJsWVlnQ0l"}],"key":"VDMEWMNtyy"},{"type":"listItem","spread":true,"position":{"start":{"line":32,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"strong","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"text","value":"Evaluation as an ABM simulation","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"FQd2g1Y1tD"}],"key":"JPr6DdEuv0"},{"type":"text","value":":","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"tUH5hUIppK"}],"key":"SKWUg7vgtE"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":33,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"text","value":"Each test case is like running the simulation once","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"gtxc875xnP"}],"key":"xNSbXxErN1"},{"type":"listItem","spread":true,"position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"text","value":"Aggregate results reveal patterns","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"Qv7HIiXSEG"}],"key":"nKcT11lMCB"},{"type":"listItem","spread":true,"position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"text","value":"Edge cases show boundary conditions of agent “behavior space”","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"YR2xrpRwM3"}],"key":"TFgyzIiL6l"}],"key":"xAZTYAZ921"}],"key":"dOIqiZbjcR"}],"key":"M6Jw5PYeYP"}],"key":"qe7wZsMR6a"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Summary and Key Takeaways","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bhtzxnd9at"}],"identifier":"summary-and-key-takeaways","label":"Summary and Key Takeaways","html_id":"summary-and-key-takeaways","implicit":true,"key":"SUCUw0wPF0"}],"key":"FRxKDpjfvA"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"What We Learned","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"lmHg4U80HQ"}],"identifier":"what-we-learned","label":"What We Learned","html_id":"what-we-learned","implicit":true,"key":"txjX5KSoPG"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Why Evals Matter","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"LYwqaIQp2o"}],"key":"lerhE9gYi4"}],"key":"R13Fp01MCk"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"AI systems are non-deterministic","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"m80be6882t"}],"key":"HDkXCaszOV"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Systematic testing catches issues before production","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"aq2xpVNpEz"}],"key":"PQGyMFtRig"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Evals enable confident iteration and deployment","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"bsIbVuwUrX"}],"key":"fflyw2lcI9"}],"key":"bSqeDQtOLM"}],"key":"g5RykA1DJa"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"strong","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Core Framework: Pydantic Evals","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"jm7mVlRS5r"}],"key":"ulxuVHC85j"}],"key":"ubCdlfe9hl"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":9,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Cases: individual test scenarios","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"HQGQehnWiE"}],"key":"VSDZXKUafC"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Datasets: collections of cases","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"yN1nQBoApf"}],"key":"KPVSpqcNWJ"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Evaluators: scoring mechanisms (deterministic, LLM, custom)","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"yZQbYlIbAe"}],"key":"gz40fQWrDA"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Experiments: runs that generate reports","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"utv4FATbqa"}],"key":"eEXTOwm19j"}],"key":"L1LTT6dQtS"}],"key":"Hnpc9iBqfA"},{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"strong","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Evaluation Strategies","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"yTjvCqhZbe"}],"key":"Z4xlboxytq"}],"key":"WOxa8eWKwa"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":15,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Deterministic checks for clear criteria","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"mOHBSlMgO2"}],"key":"VQYwBd23yP"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"LLM as Judge for subjective quality","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"ioGniTZ1xF"}],"key":"DpuEgoH58Z"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Span-based evaluation for process correctness","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"xS1yJHutT5"}],"key":"bYza46u1Af"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Custom evaluators for domain-specific needs","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"MO7lE6EhWF"}],"key":"yLL3z3RM79"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"RAG-specific metrics for retrieval + generation","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"vv8zr0QBmM"}],"key":"b1TAiQiAi5"}],"key":"nwq0VNEDLX"}],"key":"llFczlT2Fv"},{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"strong","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Best Practices","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"Wxx4y0pmqq"}],"key":"emnvBqBlVU"}],"key":"IKQo6G5F8B"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":22,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Start small, iterate based on failures","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"efxQgwQwiF"}],"key":"GV5SOv512Y"},{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"Balance coverage with maintainability","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"plm30wlL4h"}],"key":"TNdlTX1IxJ"},{"type":"listItem","spread":true,"position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"Version control datasets and track metrics","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"RgEBcDeRb4"}],"key":"hoOpfx9t8S"},{"type":"listItem","spread":true,"position":{"start":{"line":25,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"Integrate into development and deployment workflows","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"IRC2olZdxQ"}],"key":"U28cA9rge1"}],"key":"Uv3kBnCAAC"}],"key":"WxFhUrvVBl"}],"key":"kDIceUy5iL"},{"type":"heading","depth":3,"position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"Looking Forward","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"bSfCtxWI7q"}],"identifier":"looking-forward","label":"Looking Forward","html_id":"looking-forward","implicit":true,"key":"u4DhKsv2vl"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":29,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"Evaluations are “an emerging art/science”","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"gQgfRQ0jjo"}],"key":"XSaru5l4Ub"},{"type":"listItem","spread":true,"position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"text","value":"No single “right” approach exists","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"MW7ZkSjsT2"}],"key":"Kyj1Vm1NFM"},{"type":"listItem","spread":true,"position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"Adapt techniques to your domain and constraints","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"j377jDDB7l"}],"key":"ZS4MuJ1DTe"},{"type":"listItem","spread":true,"position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"text","value":"Key principle: ","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"e0RvY12O8z"},{"type":"strong","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"text","value":"Test systematically, deploy confidently","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"TSg6crwlb9"}],"key":"Ls0CEt1Bzg"}],"key":"iAMnTRx7DK"}],"key":"EBvVuaMblb"}],"key":"IGR5sV2P6H"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Final Exercise: Reflection","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JALnaIn04B"}],"identifier":"final-exercise-reflection","label":"Final Exercise: Reflection","html_id":"final-exercise-reflection","implicit":true,"key":"tpR3K5MCdy"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Think about an AI agent you might build:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"zulNL8tx0U"}],"key":"B3j7ERazrm"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"What are the top 3 risks or failure modes?","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"mWIaI3c6EP"}],"key":"jlrwbtRkcb"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"How would you design evals to catch those?","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"t5wksdEjLv"}],"key":"UaFyokOWcI"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"What would “success” look like quantitatively?","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"xOSv6V74yd"}],"key":"u4QKK1ZYlE"}],"key":"GQmpVRHFUf"}],"key":"yErLqKwlLe"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Additional Resources","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"pboggmXiSY"}],"identifier":"additional-resources","label":"Additional Resources","html_id":"additional-resources","implicit":true,"key":"G7xYcVXWlK"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"link","url":"https://ai.pydantic.dev/evals/index.md","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Pydantic AI Evals Documentation","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"wQwSoYr555"}],"urlSource":"https://ai.pydantic.dev/evals/index.md","key":"PonhKskkM2"}],"key":"jysxd1jra5"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"link","url":"https://ai.pydantic.dev/api/pydantic_evals/dataset/index.md","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Dataset API Reference","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"tQjU6JRoxp"}],"urlSource":"https://ai.pydantic.dev/api/pydantic_evals/dataset/index.md","key":"h28gKK72oQ"}],"key":"GJPyaveRzI"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"link","url":"https://ai.pydantic.dev/api/pydantic_evals/evaluators/index.md","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Evaluators API Reference","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"pmPlMz2iyL"}],"urlSource":"https://ai.pydantic.dev/api/pydantic_evals/evaluators/index.md","key":"WbbpjhliQE"}],"key":"Eil7gUM0BH"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"link","url":"https://ai.pydantic.dev/logfire/index.md","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Pydantic Logfire for Visualization","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"FhPHmHkzeF"}],"urlSource":"https://ai.pydantic.dev/logfire/index.md","key":"eDjYucfFV9"}],"key":"uNxMxc6Zxi"}],"key":"OTiPEdpK6O"}],"key":"SqI0ASrWr9"}],"key":"gWnETuyv3O"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Type-Safe Agent Development with PydanticAI Patterns","url":"/l-a2-02-type-safe-agents-pydantic-patterns","group":"Agents 2"}}},"domain":"http://localhost:3000"}