<!DOCTYPE html><html lang="en" class="" style="scroll-padding:60px"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Type-Safe Agent Development with PydanticAI Patterns - UCF CAP-6318</title><meta property="og:title" content="Type-Safe Agent Development with PydanticAI Patterns - UCF CAP-6318"/><meta name="generator" content="mystmd"/><meta name="description" content="Computational Analysis of Social Complexity"/><meta property="og:description" content="Computational Analysis of Social Complexity"/><meta name="keywords" content=""/><link rel="stylesheet" href="/build/_assets/app-PKKJHBHV.css"/><link rel="stylesheet" href="/build/_assets/thebe-core-VKVHG5VY.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jupyter-matplotlib@0.11.3/css/mpl_widget.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous"/><link rel="icon" href="/favicon.ico"/><link rel="stylesheet" href="/myst-theme.css"/><script>
  const savedTheme = localStorage.getItem("myst:theme");
  const theme = window.matchMedia("(prefers-color-scheme: light)").matches ? 'light' : 'dark';
  const classes = document.documentElement.classList;
  const hasAnyTheme = classes.contains('light') || classes.contains('dark');
  if (!hasAnyTheme) classes.add(savedTheme ?? theme);
</script></head><body class="m-0 transition-colors duration-500 bg-white dark:bg-stone-900"><div class="fixed top-1 left-1 h-[0px] w-[0px] focus-within:z-40 focus-within:h-auto focus-within:w-auto bg-white overflow-hidden focus-within:p-2 focus-within:ring-1" aria-label="skip to content options"><a href="#skip-to-frontmatter" class="block px-2 py-1 text-black underline">Skip to article frontmatter</a><a href="#skip-to-article" class="block px-2 py-1 text-black underline">Skip to article content</a></div><div class="bg-white/80 backdrop-blur dark:bg-stone-900/80 shadow dark:shadow-stone-700 p-3 md:px-8 sticky w-screen top-0 z-30 h-[60px]"><nav class="flex items-center justify-between flex-nowrap max-w-[1440px] mx-auto"><div class="flex flex-row xl:min-w-[19.5rem] mr-2 sm:mr-7 justify-start items-center shrink-0"><div class="block xl:hidden"><button class="flex items-center border-stone-400 text-stone-800 hover:text-stone-900 dark:text-stone-200 hover:dark:text-stone-100"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="m-1"><path fill-rule="evenodd" d="M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z" clip-rule="evenodd"></path></svg><span class="sr-only">Open Menu</span></button></div><a class="flex items-center ml-3 dark:text-white w-fit md:ml-5 xl:ml-7" href="/"><div class="p-1 mr-3"><img src="/build/logo-fdb88c5958d943ce34b840a833724994.png" class="h-9 dark:hidden" height="2.25rem"/><img src="/build/logo-dark-68957f97f434b89940d35537897dfb8c.png" class="hidden h-9 dark:block" height="2.25rem"/></div><span class="text-md sm:text-xl tracking-tight sm:mr-5 sr-only">Made with MyST</span></a></div><div class="flex items-center flex-grow w-auto"><div class="flex-grow hidden text-md lg:block"></div><div class="flex-grow block"></div><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R758p:" data-state="closed" class="flex items-center h-10 aspect-square sm:w-64 text-left text-gray-400 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 hover:ring-blue-500 dark:hover:ring-blue-500 hover:border-blue-500 dark:hover:border-blue-500"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="p-2.5 h-10 w-10 aspect-square"><path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z" clip-rule="evenodd"></path></svg><span class="hidden sm:block grow">Search</span><div aria-hidden="true" class="items-center hidden mx-1 font-mono text-sm text-gray-400 sm:flex gap-x-1"><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none hide-mac">CTRL</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none show-mac">⌘</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none ">K</kbd><script>
;(() => {
const script = document.currentScript;
const root = script.parentElement;

const isMac = /mac/i.test(
      window.navigator.userAgentData?.platform ?? window.navigator.userAgent,
    );
root.querySelectorAll(".hide-mac").forEach(node => {node.classList.add(isMac ? "hidden" : "block")});
root.querySelectorAll(".show-mac").forEach(node => {node.classList.add(!isMac ? "hidden" : "block")});
})()</script></div></button><button class="theme rounded-full aspect-square border border-stone-700 dark:border-white hover:bg-neutral-100 border-solid overflow-hidden text-stone-700 dark:text-white hover:text-stone-500 dark:hover:text-neutral-800 w-8 h-8 mx-3" title="Toggle theme between light and dark mode" aria-label="Toggle theme between light and dark mode"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="h-full w-full p-0.5 hidden dark:block"><path fill-rule="evenodd" d="M9.528 1.718a.75.75 0 0 1 .162.819A8.97 8.97 0 0 0 9 6a9 9 0 0 0 9 9 8.97 8.97 0 0 0 3.463-.69.75.75 0 0 1 .981.98 10.503 10.503 0 0 1-9.694 6.46c-5.799 0-10.5-4.7-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 0 1 .818.162Z" clip-rule="evenodd"></path></svg><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="h-full w-full p-0.5 dark:hidden"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"></path></svg></button><div class="block sm:hidden"></div><div class="hidden sm:block"></div></div></nav></div><div class="fixed xl:article-grid grid-gap xl:w-screen xl:pointer-events-none overflow-auto max-xl:min-w-[300px] hidden z-10" style="top:60px"><div class="pointer-events-auto xl:col-margin-left flex-col overflow-hidden hidden xl:flex"><div class="flex-grow py-6 overflow-y-auto primary-scrollbar"><nav aria-label="Navigation" class="overflow-y-hidden transition-opacity ml-3 xl:ml-0 mr-3 max-w-[350px] lg:hidden"><div class="w-full px-1 dark:text-white font-medium"></div></nav><div class="my-3 border-b-2 lg:hidden"></div><nav aria-label="Table of Contents" class="flex-grow overflow-y-hidden transition-opacity ml-3 xl:ml-0 mr-3 max-w-[350px]"><div class="w-full px-1 dark:text-white"><a title="UCF CAP-6318" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30 font-bold" href="/">UCF CAP-6318</a><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="Julia 1" class="block break-words rounded py-2 grow cursor-pointer">Julia 1</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:Rmpop:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:Rmpop:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="Julia 2" class="block break-words rounded py-2 grow cursor-pointer">Julia 2</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:Rupop:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:Rupop:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="Graph Theory 1" class="block break-words rounded py-2 grow cursor-pointer">Graph Theory 1</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R16pop:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:R16pop:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="Graph Theory 2" class="block break-words rounded py-2 grow cursor-pointer">Graph Theory 2</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R1epop:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:R1epop:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div title="Production Networks" class="block break-words rounded p-2 my-1 rounded-lg hover:bg-slate-300/30">Production Networks</div><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="ABM 1" class="block break-words rounded py-2 grow cursor-pointer">ABM 1</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R1upop:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:R1upop:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="ABM 2" class="block break-words rounded py-2 grow cursor-pointer">ABM 2</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R26pop:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:R26pop:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="Game Theory 1" class="block break-words rounded py-2 grow cursor-pointer">Game Theory 1</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R2epop:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:R2epop:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="Game Theory 2" class="block break-words rounded py-2 grow cursor-pointer">Game Theory 2</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R2mpop:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:R2mpop:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="Agents 1" class="block break-words rounded py-2 grow cursor-pointer">Agents 1</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R2upop:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:R2upop:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="open" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="Agents 2" class="block break-words rounded py-2 grow font-semibold text-blue-800 dark:text-blue-200 cursor-pointer">Agents 2</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R36pop:" aria-expanded="true" data-state="open"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="open" id="radix-:R36pop:" class="pl-3 pr-[2px] collapsible-content"><a title="Function Calling and Tool Use: From Talk to Action" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/l-a2-01-function-calling-and-tools">Function Calling and Tool Use: From Talk to Action</a><a title="Type-Safe Agent Development with PydanticAI Patterns" aria-current="page" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg bg-blue-300/30 active" href="/l-a2-02-type-safe-agents-pydantic-patterns">Type-Safe Agent Development with PydanticAI Patterns</a><a title="Evaluating AI Systems: Testing Agents at Scale" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/l-a02-03-evaluations">Evaluating AI Systems: Testing Agents at Scale</a></div></div><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="Agents 3" class="block break-words rounded py-2 grow cursor-pointer">Agents 3</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R3epop:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:R3epop:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div></div></nav></div><div class="flex-none py-6 transition-all duration-700 translate-y-6 opacity-0"><a class="flex mx-auto text-gray-700 w-fit hover:text-blue-700 dark:text-gray-200 dark:hover:text-blue-400" href="https://mystmd.org/made-with-myst" target="_blank" rel="noreferrer"><svg style="width:24px;height:24px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" stroke="none"><g id="icon"><path fill="currentColor" d="M23.8,54.8v-3.6l4.7-0.8V17.5l-4.7-0.8V13H36l13.4,31.7h0.2l13-31.7h12.6v3.6l-4.7,0.8v32.9l4.7,0.8v3.6h-15
          v-3.6l4.9-0.8V20.8H65L51.4,53.3h-3.8l-14-32.5h-0.1l0.2,17.4v12.1l5,0.8v3.6H23.8z"></path><path fill="#F37726" d="M47,86.9c0-5.9-3.4-8.8-10.1-8.8h-8.4c-5.2,0-9.4-1.3-12.5-3.8c-3.1-2.5-5.4-6.2-6.8-11l4.8-1.6
          c1.8,5.6,6.4,8.6,13.8,8.8h9.2c6.4,0,10.8,2.5,13.1,7.5c2.3-5,6.7-7.5,13.1-7.5h8.4c7.8,0,12.7-2.9,14.6-8.7l4.8,1.6
          c-1.4,4.9-3.6,8.6-6.8,11.1c-3.1,2.5-7.3,3.7-12.4,3.8H63c-6.7,0-10,2.9-10,8.8"></path></g></svg><span class="self-center ml-2 text-sm">Made with MyST</span></a></div></div></div><main class="article-grid grid-gap"><article class="article-grid subgrid-gap col-screen article content"><div class="hidden"></div><div id="skip-to-frontmatter" aria-label="article frontmatter" class="mb-8 pt-9"><div class="flex items-center mb-5 h-6 text-sm font-light"><div class="flex-grow"></div><div class="relative flex inline-block mx-1 grow-0" data-headlessui-state=""><button class="relative ml-2 -mr-1" id="headlessui-menu-button-:Rs8u8p:" type="button" aria-haspopup="menu" aria-expanded="false" data-headlessui-state=""><span class="sr-only">Downloads</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.25rem" height="1.25rem"><title>Download</title><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"></path></svg></button></div></div><h1 class="mb-0">Type-Safe Agent Development with PydanticAI Patterns</h1><header class="mt-4 not-prose"><div class="grid grid-cols-1 sm:grid-cols-2 gap-y-1"><div><span class="font-semibold text-sm"><button class="focus:shadow-[0_0_0_2px] focus:shadow-black outline-none hover:underline" aria-label="Author Details" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R2t8u8p:" data-state="closed">Spencer Lyon</button><a class="ml-1" href="mailto:spencer.lyon@ucf.edu" title="Spencer Lyon &lt;spencer.lyon@ucf.edu&gt;" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1rem" height="1rem" class="inline-block text-gray-400 -translate-y-[0.1em] hover:text-blue-400"><path d="M21.8 18c0 1.1-.9 2-1.9 2H4.2c-1.1 0-1.9-.9-1.9-2V9.9c0-.5.3-.7.8-.4l7.8 4.7c.7.4 1.7.4 2.4 0L21 9.5c.4-.2.8-.1.8.4V18z"></path><path d="M21.8 6c0-1.1-.9-2-1.9-2H4.2c-1.1 0-2 .9-2 2v.4c0 .5.3 1.1.8 1.3l8.5 5.1c.2.1.7.1.9 0l8.6-5c.4-.3.8-.9.8-1.3-.1-.1-.1-.5 0-.5z"></path></svg></a><a class="ml-1" href="https://orcid.org/0009-0001-6461-885X" title="ORCID: 0009-0001-6461-885X" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1rem" height="1rem" class="inline-block text-gray-400 -translate-y-[0.1em] hover:text-[#A9C751]"><path d="M21.8 12c0 5.4-4.4 9.8-9.8 9.8S2.2 17.4 2.2 12 6.6 2.2 12 2.2s9.8 4.4 9.8 9.8zM8.2 5.8c-.4 0-.8.3-.8.8s.3.8.8.8.8-.4.8-.8-.3-.8-.8-.8zm2.3 9.6h1.2v-6h1.8c2.3 0 3.3 1.4 3.3 3s-1.5 3-3.3 3h-3v1.1H9V8.3H7.7v8.2h5.9c3.3 0 4.5-2.2 4.5-4.1s-1.2-4.1-4.3-4.1h-3.2l-.1 7.1z"></path></svg></a></span></div><div class="text-sm"><div>University of Central Florida<!-- --> </div><div>Valorum Data<!-- --> </div></div></div></header></div><div class="block my-10 lg:sticky lg:z-10 lg:h-0 lg:pt-0 lg:my-0 lg:ml-10 lg:col-margin-right" style="top:60px"><nav></nav></div><div id="skip-to-article"></div><div id="oDXjgm0gXV" class="relative group/block"><blockquote><p>Computational Analysis of Social Complexity</p><p>Fall 2025, Spencer Lyon</p></blockquote><p><strong>Prerequisites</strong></p><ul><li>Function calling concepts (L.A2.01)</li><li>Python type hints and type safety</li><li>Basic agent architectures</li></ul><p><strong>Outcomes</strong></p><ul><li>Understand type-safe agent development principles</li><li>Implement validation-first agent architectures with Pydantic</li><li>Apply dependency injection patterns for testable agents</li><li>Build production-ready AI agents with PydanticAI</li></ul><p><strong>References</strong></p><ul><li><a target="_blank" rel="noreferrer" href="https://ai.pydantic.dev/" class="">PydanticAI Documentation</a></li><li><a target="_blank" rel="noreferrer" href="https://docs.pydantic.dev/" class="">Pydantic Documentation</a></li><li><a target="_blank" rel="noreferrer" href="https://docs.python.org/3/library/typing.html" class="">Python Type Hints</a></li></ul></div><div id="VkCNC1TqvM" class="relative group/block"><h2 id="why-type-safety-matters" class="relative group"><span class="heading-text">Why Type Safety Matters</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#why-type-safety-matters" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="VvEGECnKUF" class="relative group/block"><h3 id="the-problem-unvalidated-agent-systems" class="relative group"><span class="heading-text">The Problem: Unvalidated Agent Systems</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#the-problem-unvalidated-agent-systems" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><ul><li>Consider a simple agent that processes user queries and makes database updates</li><li>What could go wrong?<ul><li>Wrong data types passed to functions</li><li>Invalid values that violate business logic</li><li>Runtime errors deep in execution</li><li>Silent failures that corrupt data</li></ul></li><li>These bugs are <em>expensive</em> in production</li><li>Type safety catches entire classes of errors before they happen</li></ul></div><div id="Ti8xlBHfXN" class="relative group/block"><h3 id="a-concrete-example" class="relative group"><span class="heading-text">A Concrete Example</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#a-concrete-example" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Suppose we’re building a research assistant agent that:</p><ol start="1"><li>Takes a research question</li><li>Searches academic databases</li><li>Returns structured citations</li></ol><p>Without type safety:</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Python - no validation
def search_papers(query, max_results, min_year):
    # What if query is None?
    # What if max_results is negative?
    # What if min_year is 99999?
    ...</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p>With type safety:</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Python with Pydantic
from pydantic import BaseModel, Field

class SearchRequest(BaseModel):
    query: str = Field(min_length=1, max_length=500)
    max_results: int = Field(ge=1, le=100)
    min_year: int = Field(ge=1900, le=2025)

def search_papers(request: SearchRequest):
    # Guaranteed valid inputs!
    ...</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div></div><div id="F1GHHKrUBY" class="relative group/block"><h3 id="key-benefits" class="relative group"><span class="heading-text">Key Benefits</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#key-benefits" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p><strong>Fail Fast, Fail Loud</strong></p><ul><li>Invalid inputs rejected immediately</li><li>Clear error messages</li><li>No silent corruption</li></ul><p><strong>Self-Documenting Code</strong></p><ul><li>Types tell you what’s expected</li><li>IDE autocomplete and hints</li><li>Less need for comments</li></ul><p><strong>Refactoring Confidence</strong></p><ul><li>Change a type definition</li><li>Compiler/type checker finds all affected code</li><li>Safe to modify large systems</li></ul><p><strong>Testing Made Easier</strong></p><ul><li>Don’t need to test invalid types</li><li>Focus on business logic</li><li>Reduce test surface area</li></ul></div><div id="ZBmpt0a1W8" class="relative group/block"><h2 id="the-pydanticai-philosophy" class="relative group"><span class="heading-text">The PydanticAI Philosophy</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#the-pydanticai-philosophy" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="LTCV0BsgGf" class="relative group/block"><h3 id="what-is-pydanticai" class="relative group"><span class="heading-text">What is PydanticAI?</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#what-is-pydanticai" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><ul><li>PydanticAI is a Python framework for building production-ready AI agents</li><li>Created by the team behind Pydantic</li><li>Pydantic powers the OpenAI SDK, Anthropic SDK, FastAPI, and countless other production systems</li><li>Philosophy: <strong>validation-first development</strong></li></ul><p><strong>Why PydanticAI?</strong></p><ul><li>Type safety catches errors before runtime</li><li>Validation ensures data integrity</li><li>Production-ready patterns from day one</li><li>Seamless integration with Python’s type system</li><li>Used by major companies in production</li></ul></div><div id="Fzx2moGqTf" class="relative group/block"><h3 id="chefs-knife-and-cutting-board" class="relative group"><span class="heading-text">Chef’s Knife and Cutting Board</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#chefs-knife-and-cutting-board" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><ul><li>PydanticAI describes itself as providing a “chef’s knife and cutting board”</li><li>What does this mean?<ul><li><strong>NOT a framework</strong> with opinions about everything</li><li><strong>IS a toolkit</strong> with powerful, composable primitives</li><li>Simple tools that do one thing well</li><li>Combine them however you want</li></ul></li></ul><p><strong>Contrast with LangChain</strong>:</p><ul><li>LangChain: Full kitchen with every appliance<ul><li>Chains, memory, vector stores, callbacks, etc.</li><li>Complex abstractions</li><li>Steep learning curve</li><li>Hard to customize</li></ul></li><li>PydanticAI: Essential tools<ul><li>Agent, tools, structured outputs</li><li>Simple abstractions</li><li>Easy to understand</li><li>Flexible customization</li></ul></li></ul><p><strong>When to Use Which</strong>:</p><ul><li>Use PydanticAI when: building production systems, need type safety, want simplicity</li><li>Use LangChain when: rapid prototyping, need batteries-included features, okay with complexity</li></ul></div><div id="Agn0Rd19F1" class="relative group/block"><h3 id="core-principles" class="relative group"><span class="heading-text">Core Principles</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#core-principles" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p><strong>1. Type Safety First</strong></p><ul><li>All inputs validated before use</li><li>All outputs structured and validated</li><li>Catch errors at design time, not runtime</li></ul><p><strong>2. Validation Before Computation</strong></p><ul><li>Never process invalid data</li><li>Fail immediately with clear messages</li><li>Make invalid states unrepresentable</li></ul><p><strong>3. Dependency Injection</strong></p><ul><li>Agents don’t create their dependencies</li><li>Dependencies passed in at construction</li><li>Easy to test with mocks</li><li>Easy to swap implementations</li></ul><p><strong>4. Explicit Over Implicit</strong></p><ul><li>No magic global state</li><li>No hidden configuration</li><li>Everything visible in function signatures</li></ul><p><strong>5. Production Ready</strong></p><ul><li>Designed for real systems, not demos</li><li>Handles errors gracefully</li><li>Observability built-in</li><li>Performance matters</li></ul></div><div id="yBBCmTJpIM" class="relative group/block"><h2 id="core-agent-components" class="relative group"><span class="heading-text">Core Agent Components</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#core-agent-components" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="nfmrTgGVA4" class="relative group/block"><h3 id="the-four-essential-pieces" class="relative group"><span class="heading-text">The Four Essential Pieces</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#the-four-essential-pieces" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Every PydanticAI agent has these components:</p><p><strong>1. Agent Definition</strong></p><ul><li>Specifies the LLM model to use</li><li>Defines system prompt</li><li>Registers available tools</li></ul><p><strong>2. Tool Functions</strong></p><ul><li>Functions the agent can call</li><li>Type-annotated parameters</li><li>Validated inputs and outputs</li></ul><p><strong>3. Structured Outputs</strong></p><ul><li>Define what the agent should return</li><li>Pydantic models for validation</li><li>Guaranteed schema compliance</li></ul><p><strong>4. Run Context (Dependencies)</strong></p><ul><li>External services (databases, APIs)</li><li>Configuration</li><li>State that flows through execution</li></ul><p>Let’s examine each in detail</p></div><div id="VwGm9FM0nF" class="relative group/block"><h3 id="id-1-agent-definition" class="relative group"><span class="heading-text">1. Agent Definition</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-1-agent-definition" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>In PydanticAI (Python):</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from pydantic_ai import Agent

agent = Agent(
    &#x27;anthropic:claude-haiku-4-5&#x27;,
    system_prompt=&quot;You are a helpful research assistant.&quot;,
)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p>Key aspects:</p><ul><li><strong>Model string</strong>: Specifies which LLM to use</li><li><strong>System prompt</strong>: Sets agent behavior and role</li><li><strong>Simple constructor</strong>: No complex configuration</li></ul></div><div id="HzGD0406Ve" class="relative group/block"><h3 id="id-2-tool-functions" class="relative group"><span class="heading-text">2. Tool Functions</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-2-tool-functions" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Tools are functions the agent can call:</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from pydantic_ai import Agent

agent = Agent(&#x27;anthropic:claude-haiku-4-5&#x27;)

@agent.tool
def search_papers(
    query: str,
    max_results: int = 10
) -&gt; list[dict]:
    &quot;&quot;&quot;Search academic papers by query.&quot;&quot;&quot;
    # Implementation here
    return results</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p><strong>What happens</strong>:</p><ol start="1"><li>LLM sees tool name and docstring</li><li>LLM decides when to call it</li><li>Parameters are validated against type hints</li><li>Function executes</li><li>Return value validated</li><li>Result given back to LLM</li></ol><p><strong>Type safety at every step!</strong></p></div><div id="qibvFxuLVZ" class="relative group/block"><h3 id="id-3-structured-outputs" class="relative group"><span class="heading-text">3. Structured Outputs</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-3-structured-outputs" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Define exactly what you want back:</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from pydantic import BaseModel
from pydantic_ai import Agent

class Citation(BaseModel):
    title: str
    authors: list[str]
    year: int
    doi: str | None = None

class ResearchResult(BaseModel):
    summary: str
    citations: list[Citation]
    confidence: float

agent = Agent(
    &#x27;anthropic:claude-haiku-4-5&#x27;,
    output_type=ResearchResult
)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p><strong>Benefits</strong>:</p><ul><li>LLM must return this exact structure</li><li>Automatic validation</li><li>No parsing strings or JSON</li><li>IDE autocomplete on results</li></ul></div><div id="Vxgl1ADenZ" class="relative group/block"><h3 id="id-4-run-context-dependencies" class="relative group"><span class="heading-text">4. Run Context (Dependencies)</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-4-run-context-dependencies" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>The secret sauce for testability:</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from pydantic_ai import Agent, RunContext
from dataclasses import dataclass

@dataclass
class Dependencies:
    db: DatabaseClient
    api_key: str
    max_retries: int = 3

agent = Agent(
    &#x27;anthropic:claude-haiku-4-5&#x27;,
    deps_type=Dependencies
)

@agent.tool
def search_papers(
    ctx: RunContext[Dependencies],
    query: str
) -&gt; list[dict]:
    # Access dependencies via ctx.deps
    return ctx.deps.db.search(query)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p><strong>Why this matters</strong>:</p><ul><li>No global variables</li><li>Easy to inject mock dependencies for testing</li><li>Explicit about what each tool needs</li><li>Can have different deps for dev/prod</li></ul></div><div id="wzvXiTLw0K" class="relative group/block"><h3 id="putting-it-all-together" class="relative group"><span class="heading-text">Putting It All Together</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#putting-it-all-together" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>A complete PydanticAI agent:</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from pydantic import BaseModel
from pydantic_ai import Agent, RunContext
from dataclasses import dataclass

# 1. Define dependencies
@dataclass
class ResearchDeps:
    db: DatabaseClient
    api_key: str

# 2. Define output structure
class Citation(BaseModel):
    title: str
    authors: list[str]
    year: int

class ResearchResult(BaseModel):
    summary: str
    citations: list[Citation]

# 3. Create agent
agent = Agent(
    &#x27;anthropic:claude-haiku-4-5&#x27;,
    deps_type=ResearchDeps,
    result_type=ResearchResult,
    system_prompt=&#x27;You are a research assistant.&#x27;
)

# 4. Register tools
@agent.tool
def search_papers(
    ctx: RunContext[ResearchDeps],
    query: str,
    max_results: int = 10
) -&gt; list[dict]:
    &quot;&quot;&quot;Search academic database.&quot;&quot;&quot;
    return ctx.deps.db.search(query, limit=max_results)

# 5. Run agent
async def run_research(question: str):
    deps = ResearchDeps(
        db=get_database(),
        api_key=get_api_key()
    )
    result = await agent.run(question, deps=deps)
    return result.data  # Guaranteed to be ResearchResult!</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div></div><div id="JSGVozp5Gw" class="relative group/block"><h2 id="building-a-research-assistant" class="relative group"><span class="heading-text">Building a Research Assistant</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#building-a-research-assistant" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="j7OP7kCRK7" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from dotenv import load_dotenv
import nest_asyncio

load_dotenv()
nest_asyncio.apply()
</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="b_4xu4ZK_-kR_1lkh09Ne" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="NbQjxnHiTr" class="relative group/block"><h3 id="system-design" class="relative group"><span class="heading-text">System Design</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#system-design" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Let’s build a complete research assistant that demonstrates all the PydanticAI concepts we’ve learned:</p><p><strong>Features</strong>:</p><ul><li>Search academic papers by query</li><li>Get detailed paper information</li><li>Generate structured research summaries</li><li>Type-safe dependencies and outputs</li><li>Multiple tools working together</li></ul><p><strong>Architecture</strong>:</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-text" style="white-space:pre">User Query
    ↓
PydanticAI Agent (with system prompt)
    ↓
Tool Selection (agent decides which tools to use)
    ↓
Tool Execution (with validated inputs via RunContext)
    ↓
Result Synthesis (agent combines tool outputs)
    ↓
Structured Output (validated ResearchSummary)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p>This is a realistic pattern you’d use in production.</p></div><div id="uVqg30pOUE" class="relative group/block"><h3 id="step-1-define-output-structure" class="relative group"><span class="heading-text">Step 1: Define Output Structure</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#step-1-define-output-structure" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>First, define what we want the agent to return:</p></div><div id="ui8GT0Mjuj" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from pydantic import BaseModel, Field
from typing import Optional

class Paper(BaseModel):
    &quot;&quot;&quot;Academic paper with validated fields.&quot;&quot;&quot;
    title: str = Field(min_length=1)
    authors: list[str] = Field(min_length=1)
    year: int = Field(ge=1800, le=2025)
    abstract: str
    doi: Optional[str] = None

class ResearchSummary(BaseModel):
    &quot;&quot;&quot;Final research output with validation.&quot;&quot;&quot;
    query: str = Field(min_length=1)
    summary: str = Field(min_length=1, description=&quot;Natural language summary&quot;)
    key_papers: list[Paper] = Field(min_length=1, description=&quot;Most relevant papers found&quot;)
    confidence: float = Field(ge=0.0, le=1.0, description=&quot;Agent&#x27;s confidence that an answer to the user&#x27;s query has been found&quot;)

    def _repr_html_(self) -&gt; str:
        &quot;&quot;&quot;Rich HTML display for Jupyter notebooks.&quot;&quot;&quot;
        papers_html = &quot;&quot;
        for i, paper in enumerate(self.key_papers, 1):
            authors = &quot;, &quot;.join(paper.authors)
            doi_link = f&#x27;&lt;a href=&quot;https://doi.org/{paper.doi}&quot; target=&quot;_blank&quot;&gt;DOI&lt;/a&gt;&#x27; if paper.doi else &quot;&quot;
            papers_html += f&quot;&quot;&quot;
            &lt;div style=&quot;margin: 10px 0; padding: 10px; background: #f8f9fa; border-left: 3px solid #007bff;&quot;&gt;
                &lt;strong&gt;{i}. {paper.title}&lt;/strong&gt; ({paper.year}) {doi_link}&lt;br&gt;
                &lt;em&gt;{authors}&lt;/em&gt;&lt;br&gt;
                &lt;small style=&quot;color: #666;&quot;&gt;{paper.abstract[:200]}...&lt;/small&gt;
            &lt;/div&gt;
            &quot;&quot;&quot;

        confidence_color = &quot;#28a745&quot; if self.confidence &gt;= 0.7 else &quot;#ffc107&quot; if self.confidence &gt;= 0.4 else &quot;#dc3545&quot;
        confidence_pct = f&quot;{self.confidence:.0%}&quot;

        return f&quot;&quot;&quot;
        &lt;div style=&quot;font-family: sans-serif; max-width: 800px;&quot;&gt;
            &lt;h3 style=&quot;color: #333; border-bottom: 2px solid #007bff; padding-bottom: 10px;&quot;&gt;
                📚 Research Results: &quot;{self.query}&quot;
            &lt;/h3&gt;
            &lt;div style=&quot;margin: 15px 0; padding: 15px; background: #e7f3ff; border-radius: 5px;&quot;&gt;
                &lt;strong&gt;Summary:&lt;/strong&gt;&lt;br&gt;
                {self.summary}
            &lt;/div&gt;
            &lt;div style=&quot;margin: 10px 0;&quot;&gt;
                &lt;strong&gt;Confidence:&lt;/strong&gt;
                &lt;span style=&quot;color: {confidence_color}; font-weight: bold;&quot;&gt;{confidence_pct}&lt;/span&gt;
            &lt;/div&gt;
            &lt;div style=&quot;margin-top: 20px;&quot;&gt;
                &lt;strong&gt;Key Papers ({len(self.key_papers)}):&lt;/strong&gt;
                {papers_html}
            &lt;/div&gt;
        &lt;/div&gt;
        &quot;&quot;&quot;

    def __str__(self) -&gt; str:
        &quot;&quot;&quot;Plain text representation.&quot;&quot;&quot;
        lines = [
            f&quot;Research Results: {self.query}&quot;,
            &quot;=&quot; * 60,
            f&quot;\nSummary:\n{self.summary}&quot;,
            f&quot;\nConfidence: {self.confidence:.0%}&quot;,
            f&quot;\nKey Papers ({len(self.key_papers)}):&quot;,
        ]

        for i, paper in enumerate(self.key_papers, 1):
            lines.append(f&quot;\n{i}. {paper.title} ({paper.year})&quot;)
            lines.append(f&quot;   Authors: {&#x27;, &#x27;.join(paper.authors)}&quot;)
            if paper.doi:
                lines.append(f&quot;   DOI: {paper.doi}&quot;)

        return &quot;\n&quot;.join(lines)

# Test that validation works
try:
    invalid = Paper(title=&quot;&quot;, authors=[], year=3000, abstract=&quot;test&quot;)
except Exception as e:
    print(f&quot;✓ Validation caught error: {type(e).__name__}&quot;)

    # print the error
    print(e)

valid = Paper(
    title=&quot;Attention Is All You Need&quot;,
    authors=[&quot;Vaswani et al.&quot;],
    year=2017,
    abstract=&quot;We propose the Transformer...&quot;
)
print(f&quot;✓ Valid paper created: {valid.title}&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="wSa6a3W267OPjLHh_E1mb" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system"><code><span>✓ Validation caught error: ValidationError
3 validation errors for Paper
title
  String should have at least 1 character [type=string_too_short, input_value=&#x27;&#x27;, input_type=str]
    For further information visit https://errors.pydantic.dev/2.12/v/string_too_short
authors
  List should have at least 1 item after validation, not 0 [type=too_short, input_value=[], input_type=list]
    For further information visit https://errors.pydantic.dev/2.12/v/too_short
year
  Input should be less than or equal to 2025 [type=less_than_equal, input_value=3000, input_type=int]
    For further information visit https://errors.pydantic.dev/2.12/v/less_than_equal
✓ Valid paper created: Attention Is All You Need
</span></code></pre></div></div></div><div id="pHRjwMglRv" class="relative group/block"><h3 id="step-2-define-dependencies" class="relative group"><span class="heading-text">Step 2: Define Dependencies</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#step-2-define-dependencies" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Define external resources the agent needs:</p></div><div id="Nk1PpUBFM9" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from dataclasses import dataclass

@dataclass
class ResearchDeps:
    &quot;&quot;&quot;Dependencies for the research agent.&quot;&quot;&quot;
    database_url: str
    api_key: str
    max_papers_per_search: int = 10

    def search_database(self, query: str, limit: int) -&gt; list[Paper]:
        &quot;&quot;&quot;Simulate database search (in production, would query real DB).&quot;&quot;&quot;
        print(f&quot;  🔍 Searching database for: &#x27;{query}&#x27; (limit: {limit})&quot;)

        # In production, this would be:
        # conn = connect(self.database_url, self.api_key)
        # results = conn.execute(search_query)
        # return [Paper(**row) for row in results]

        # For demo, return mock results
        return [
            Paper(
                title=&quot;Attention Is All You Need&quot;,
                authors=[&quot;Vaswani, A.&quot;, &quot;Shazeer, N.&quot;, &quot;Parmar, N.&quot;],
                year=2017,
                abstract=&quot;We propose a new simple network architecture, the Transformer...&quot;,
                doi=&quot;10.5555/3295222.3295349&quot;
            ),
            Paper(
                title=&quot;BERT: Pre-training of Deep Bidirectional Transformers&quot;,
                authors=[&quot;Devlin, J.&quot;, &quot;Chang, M.&quot;, &quot;Lee, K.&quot;],
                year=2019,
                abstract=&quot;We introduce BERT, a method for pre-training language representations...&quot;,
                doi=&quot;10.18653/v1/N19-1423&quot;
            ),
        ]

    def get_paper_by_id(self, paper_id: str) -&gt; Paper:
        &quot;&quot;&quot;Retrieve specific paper by ID.&quot;&quot;&quot;
        print(f&quot;  📄 Fetching paper: {paper_id}&quot;)
        return Paper(
            title=&quot;Example Paper&quot;,
            authors=[&quot;Author, A.&quot;],
            year=2023,
            abstract=&quot;This is an example paper abstract.&quot;
        )

# Create dependencies
deps = ResearchDeps(
    database_url=&quot;sqlite3:///papers.db&quot;,
    api_key=&quot;demo-api-key-12345&quot;,
    max_papers_per_search=5
)

print(&quot;✓ Dependencies configured&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="fH-IdFtR_2HjMRop3HPAH" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system"><code><span>✓ Dependencies configured
</span></code></pre></div></div></div><div id="dEXpZAkFdi" class="relative group/block"><h3 id="step-3-create-agent-and-register-tools" class="relative group"><span class="heading-text">Step 3: Create Agent and Register Tools</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#step-3-create-agent-and-register-tools" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Now create the agent and give it tools:</p></div><div id="P2hhONP6cP" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from pydantic_ai import Agent, RunContext

# Create agent with system prompt and structured output
research_agent = Agent(
    &#x27;anthropic:claude-sonnet-4-5&#x27;,
    deps_type=ResearchDeps,
    output_type=ResearchSummary,
    system_prompt=&quot;&quot;&quot;You are a helpful research assistant.

    When asked to research a topic:
    1. Search for relevant papers using the search_papers tool
    2. Analyze the results carefully
    3. Provide a clear summary with the most important papers
    4. Rate your confidence based on result quality and relevance

    Be thorough but concise. Focus on the most impactful papers.
    IMPORTANT: never, under any circumstances, make up paper titles, authors, years, abstracts, or DOIs.

    IMPORTANT: If you cannot find relevant papers, state that clearly in your summary and set confidence to 0.0. Also don&#x27;t return any key papers.

    IMPORTANT: only use details from the papers you find when generating the summary. do not invent information or use general knowledge.
               again if you cannot find relevant papers, state that clearly in your summary and set confidence to 0.0.

    &quot;&quot;&quot;
)

# Register tool 1: Search for papers
@research_agent.tool
def search_papers(
    ctx: RunContext[ResearchDeps],
    query: str,
    max_results: int = 5
) -&gt; list[Paper]:
    &quot;&quot;&quot;
    Search for academic papers by query string.

    Args:
        query: Search query (keywords, topics, authors)
        max_results: Maximum number of papers to return (default 5)

    Returns:
        List of relevant papers
    &quot;&quot;&quot;
    # Access dependencies via ctx.deps
    limit = min(max_results, ctx.deps.max_papers_per_search)
    papers = ctx.deps.search_database(query, limit)
    return papers

# Register tool 2: Get specific paper details
@research_agent.tool
def get_paper_details(
    ctx: RunContext[ResearchDeps],
    paper_id: str
) -&gt; Paper:
    &quot;&quot;&quot;
    Get detailed information about a specific paper by its ID.

    Args:
        paper_id: Unique identifier for the paper

    Returns:
        Paper object with full details
    &quot;&quot;&quot;
    return ctx.deps.get_paper_by_id(paper_id)

print(&quot;✓ Agent created with 2 tools registered&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="29Q8gUZHkJL7ZcV3Qg9vs" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system"><code><span>✓ Agent created with 2 tools registered
</span></code></pre></div></div></div><div id="HQ9twUTuYV" class="relative group/block"><h3 id="step-4-run-the-agent" class="relative group"><span class="heading-text">Step 4: Run the Agent</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#step-4-run-the-agent" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Execute the agent with a research query:</p></div><div id="O7esZRMuPh" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from pydantic_ai import UsageLimits</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="BXTj0SHm7okILppFNI2pn" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="aGB4U9H3aU" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">async def run_research(question: str):
    deps = ResearchDeps(
        database_url=&quot;sqlite3:///papers.db&quot;,
        api_key=&quot;demo-api-key-12345&quot;,
        max_papers_per_search=5
    )
    result = await research_agent.run(
        question,
        deps=deps,
        usage_limits=UsageLimits(tool_calls_limit=5),
    )
    return result

research_result = await run_research(&quot;How many species of monkeys live in north america&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="gh1_f-U9XTlWLr3hdgGCg" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system"><code><span>  🔍 Searching database for: &#x27;monkeys species North America distribution&#x27; (limit: 5)
  🔍 Searching database for: &#x27;primate diversity North America native species&#x27; (limit: 5)
  🔍 Searching database for: &#x27;New World monkeys United States Canada Mexico biogeography&#x27; (limit: 5)
  🔍 Searching database for: &#x27;non-human primates North American continent native endemic&#x27; (limit: 5)
  🔍 Searching database for: &#x27;mammal fauna North America primates absence&#x27; (limit: 5)
</span></code></pre></div><div><pre class="text-sm font-thin font-system"><code><span>Traceback (most recent call last):
  File &quot;/Users/sglyon/Teaching/UCF/CAP-6318/book-myst/weekA02/.venv/lib/python3.12/site-packages/IPython/core/interactiveshell.py&quot;, line 3697, in run_code
    await eval(code_obj, self.user_global_ns, self.user_ns)
  File &quot;/var/folders/7d/x0yzvh3172zdzj7wsxtnhhh00000gn/T/ipykernel_4094/1915870946.py&quot;, line 14, in &lt;module&gt;
    research_result = await run_research(&quot;How many species of monkeys live in north america&quot;)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File &quot;/var/folders/7d/x0yzvh3172zdzj7wsxtnhhh00000gn/T/ipykernel_4094/1915870946.py&quot;, line 7, in run_research
    result = await research_agent.run(
             ^^^^^^^^^^^^^^^^^^^^^^^^^
  File &quot;/Users/sglyon/Teaching/UCF/CAP-6318/book-myst/weekA02/.venv/lib/python3.12/site-packages/pydantic_ai/agent/abstract.py&quot;, line 225, in run
    async with self.iter(
               ^^^^^^^^^^
  File &quot;/opt/homebrew/Cellar/python@3.12/3.12.12/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py&quot;, line 231, in __aexit__
    await self.gen.athrow(value)
  File &quot;/Users/sglyon/Teaching/UCF/CAP-6318/book-myst/weekA02/.venv/lib/python3.12/site-packages/pydantic_ai/agent/__init__.py&quot;, line 647, in iter
    async with graph.iter(
               ^^^^^^^^^^^
  File &quot;/opt/homebrew/Cellar/python@3.12/3.12.12/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py&quot;, line 231, in __aexit__
    await self.gen.athrow(value)
  File &quot;/Users/sglyon/Teaching/UCF/CAP-6318/book-myst/weekA02/.venv/lib/python3.12/site-packages/pydantic_graph/beta/graph.py&quot;, line 271, in iter
    async with GraphRun[StateT, DepsT, OutputT](
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File &quot;/Users/sglyon/Teaching/UCF/CAP-6318/book-myst/weekA02/.venv/lib/python3.12/site-packages/pydantic_graph/beta/graph.py&quot;, line 400, in __aexit__
    await self._async_exit_stack.__aexit__(exc_type, exc_val, exc_tb)
  File &quot;/opt/homebrew/Cellar/python@3.12/3.12.12/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py&quot;, line 754, in __aexit__
    raise exc_details[1]
  File &quot;/opt/homebrew/Cellar/python@3.12/3.12.12/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py&quot;, line 735, in __aexit__
    cb_suppress = cb(*exc_details)
                  ^^^^^^^^^^^^^^^^
  File &quot;/opt/homebrew/Cellar/python@3.12/3.12.12/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py&quot;, line 158, in __exit__
    self.gen.throw(value)
  File &quot;/Users/sglyon/Teaching/UCF/CAP-6318/book-myst/weekA02/.venv/lib/python3.12/site-packages/pydantic_graph/beta/graph.py&quot;, line 939, in _unwrap_exception_groups
    raise exception
  File &quot;/Users/sglyon/Teaching/UCF/CAP-6318/book-myst/weekA02/.venv/lib/python3.12/site-packages/pydantic_graph/beta/graph.py&quot;, line 711, in _run_tracked_task
    result = await self._run_task(t_)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File &quot;/Users/sglyon/Teaching/UCF/CAP-6318/book-myst/weekA02/.venv/lib/python3.12/site-packages/pydantic_graph/beta/graph.py&quot;, line 740, in _run_task
    output = await node.call(step_context)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File &quot;/Users/sglyon/Teaching/UCF/CAP-6318/book-myst/weekA02/.venv/lib/python3.12/site-packages/pydantic_graph/beta/step.py&quot;, line 253, in _call_node
    return await node.run(GraphRunContext(state=ctx.state, deps=ctx.deps))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File &quot;/Users/sglyon/Teaching/UCF/CAP-6318/book-myst/weekA02/.venv/lib/python3.12/site-packages/pydantic_ai/_agent_graph.py&quot;, line 544, in run
    async with self.stream(ctx):
               ^^^^^^^^^^^^^^^^
  File &quot;/opt/homebrew/Cellar/python@3.12/3.12.12/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py&quot;, line 217, in __aexit__
    await anext(self.gen)
  File &quot;/Users/sglyon/Teaching/UCF/CAP-6318/book-myst/weekA02/.venv/lib/python3.12/site-packages/pydantic_ai/_agent_graph.py&quot;, line 558, in stream
    async for _event in stream:
  File &quot;/Users/sglyon/Teaching/UCF/CAP-6318/book-myst/weekA02/.venv/lib/python3.12/site-packages/pydantic_ai/_agent_graph.py&quot;, line 676, in _run_stream
    async for event in self._events_iterator:
  File &quot;/Users/sglyon/Teaching/UCF/CAP-6318/book-myst/weekA02/.venv/lib/python3.12/site-packages/pydantic_ai/_agent_graph.py&quot;, line 637, in _run_stream
    async for event in self._handle_tool_calls(ctx, tool_calls):
  File &quot;/Users/sglyon/Teaching/UCF/CAP-6318/book-myst/weekA02/.venv/lib/python3.12/site-packages/pydantic_ai/_agent_graph.py&quot;, line 692, in _handle_tool_calls
    async for event in process_tool_calls(
  File &quot;/Users/sglyon/Teaching/UCF/CAP-6318/book-myst/weekA02/.venv/lib/python3.12/site-packages/pydantic_ai/_agent_graph.py&quot;, line 888, in process_tool_calls
    async for event in _call_tools(
  File &quot;/Users/sglyon/Teaching/UCF/CAP-6318/book-myst/weekA02/.venv/lib/python3.12/site-packages/pydantic_ai/_agent_graph.py&quot;, line 955, in _call_tools
    usage_limits.check_before_tool_call(projected_usage)
  File &quot;/Users/sglyon/Teaching/UCF/CAP-6318/book-myst/weekA02/.venv/lib/python3.12/site-packages/pydantic_ai/usage.py&quot;, line 393, in check_before_tool_call
    raise UsageLimitExceeded(
pydantic_ai.exceptions.UsageLimitExceeded: The next tool call(s) would exceed the tool_calls_limit of 5 (tool_calls=6).
</span></code></pre></div></div></div><div id="tk3jiU0urS" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">research_result.all_messages()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="hMYVG5S0ZIwk0vtPZV7bn" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div class="font-mono text-sm whitespace-pre-wrap"><code><span>[ModelRequest(parts=[SystemPromptPart(content=&#x27;You are a helpful research assistant.\n\n    When asked to research a topic:\n    1. Search for relevant papers using the search_papers tool\n    2. Analyze the results carefully\n    3. Provide a clear summary with the most important papers\n    4. Rate your confidence based on result quality and relevance\n\n    Be thorough but concise. Focus on the most impactful papers.\n    IMPORTANT: never, under any circumstances, make up paper titles, authors, years, abstracts, or DOIs.\n\n    IMPORTANT: If you cannot find relevant papers, state that clearly in your summary and set confidence to 0.0.\n\n    IMPORTANT: only use details from the papers you find when generating the summary. do not invent information or use general knowledge.\n               again if you cannot find relevant papers, state that clearly in your summary and set confidence to 0.0.\n\n    &#x27;, timestamp=datetime.datetime(2025, 11, 11, 0, 53, 8, 103168, tzinfo=datetime.timezone.utc)), UserPromptPart(content=&#x27;How many species of monkeys live in north america&#x27;, timestamp=datetime.datetime(2025, 11, 11, 0, 53, 8, 103172, tzinfo=datetime.timezone.utc))]),
 ModelResponse(parts=[ToolCallPart(tool_name=&#x27;search_papers&#x27;, args={&#x27;query&#x27;: &#x27;monkey species North America distribution native&#x27;, &#x27;max_results&#x27;: 10}, tool_call_id=&#x27;toolu_015iVGTiBwvEf1vSB4GDtH8s&#x27;)], usage=RequestUsage(input_tokens=1387, output_tokens=62, details={&#x27;cache_creation_input_tokens&#x27;: 0, &#x27;cache_read_input_tokens&#x27;: 0, &#x27;input_tokens&#x27;: 1387, &#x27;output_tokens&#x27;: 62}), model_name=&#x27;claude-sonnet-4-5-20250929&#x27;, timestamp=datetime.datetime(2025, 11, 11, 0, 53, 10, 617960, tzinfo=datetime.timezone.utc), provider_name=&#x27;anthropic&#x27;, provider_details={&#x27;finish_reason&#x27;: &#x27;tool_use&#x27;}, provider_response_id=&#x27;msg_01AEYVeiqSynQXnyaVLd4osj&#x27;, finish_reason=&#x27;tool_call&#x27;),
 ModelRequest(parts=[ToolReturnPart(tool_name=&#x27;search_papers&#x27;, content=[Paper(title=&#x27;Attention Is All You Need&#x27;, authors=[&#x27;Vaswani, A.&#x27;, &#x27;Shazeer, N.&#x27;, &#x27;Parmar, N.&#x27;], year=2017, abstract=&#x27;We propose a new simple network architecture, the Transformer...&#x27;, doi=&#x27;10.5555/3295222.3295349&#x27;), Paper(title=&#x27;BERT: Pre-training of Deep Bidirectional Transformers&#x27;, authors=[&#x27;Devlin, J.&#x27;, &#x27;Chang, M.&#x27;, &#x27;Lee, K.&#x27;], year=2019, abstract=&#x27;We introduce BERT, a method for pre-training language representations...&#x27;, doi=&#x27;10.18653/v1/N19-1423&#x27;)], tool_call_id=&#x27;toolu_015iVGTiBwvEf1vSB4GDtH8s&#x27;, timestamp=datetime.datetime(2025, 11, 11, 0, 53, 10, 618748, tzinfo=datetime.timezone.utc))]),
 ModelResponse(parts=[ToolCallPart(tool_name=&#x27;search_papers&#x27;, args={&#x27;query&#x27;: &#x27;primate diversity North America biogeography&#x27;, &#x27;max_results&#x27;: 10}, tool_call_id=&#x27;toolu_01EBPBpzy5uiXzoc292kcW2M&#x27;)], usage=RequestUsage(input_tokens=1627, output_tokens=64, details={&#x27;cache_creation_input_tokens&#x27;: 0, &#x27;cache_read_input_tokens&#x27;: 0, &#x27;input_tokens&#x27;: 1627, &#x27;output_tokens&#x27;: 64}), model_name=&#x27;claude-sonnet-4-5-20250929&#x27;, timestamp=datetime.datetime(2025, 11, 11, 0, 53, 13, 304667, tzinfo=datetime.timezone.utc), provider_name=&#x27;anthropic&#x27;, provider_details={&#x27;finish_reason&#x27;: &#x27;tool_use&#x27;}, provider_response_id=&#x27;msg_014HCpQLThvjGCvj9HgFs2dH&#x27;, finish_reason=&#x27;tool_call&#x27;),
 ModelRequest(parts=[ToolReturnPart(tool_name=&#x27;search_papers&#x27;, content=[Paper(title=&#x27;Attention Is All You Need&#x27;, authors=[&#x27;Vaswani, A.&#x27;, &#x27;Shazeer, N.&#x27;, &#x27;Parmar, N.&#x27;], year=2017, abstract=&#x27;We propose a new simple network architecture, the Transformer...&#x27;, doi=&#x27;10.5555/3295222.3295349&#x27;), Paper(title=&#x27;BERT: Pre-training of Deep Bidirectional Transformers&#x27;, authors=[&#x27;Devlin, J.&#x27;, &#x27;Chang, M.&#x27;, &#x27;Lee, K.&#x27;], year=2019, abstract=&#x27;We introduce BERT, a method for pre-training language representations...&#x27;, doi=&#x27;10.18653/v1/N19-1423&#x27;)], tool_call_id=&#x27;toolu_01EBPBpzy5uiXzoc292kcW2M&#x27;, timestamp=datetime.datetime(2025, 11, 11, 0, 53, 13, 305500, tzinfo=datetime.timezone.utc))]),
 ModelResponse(parts=[ToolCallPart(tool_name=&#x27;search_papers&#x27;, args={&#x27;query&#x27;: &#x27;native monkeys Mexico Central America United States&#x27;, &#x27;max_results&#x27;: 10}, tool_call_id=&#x27;toolu_01AVt8UCiMyphHSzmTC8BxYG&#x27;)], usage=RequestUsage(input_tokens=1869, output_tokens=64, details={&#x27;cache_creation_input_tokens&#x27;: 0, &#x27;cache_read_input_tokens&#x27;: 0, &#x27;input_tokens&#x27;: 1869, &#x27;output_tokens&#x27;: 64}), model_name=&#x27;claude-sonnet-4-5-20250929&#x27;, timestamp=datetime.datetime(2025, 11, 11, 0, 53, 16, 474688, tzinfo=datetime.timezone.utc), provider_name=&#x27;anthropic&#x27;, provider_details={&#x27;finish_reason&#x27;: &#x27;tool_use&#x27;}, provider_response_id=&#x27;msg_01YAhvsa4njfepdKacmsotjQ&#x27;, finish_reason=&#x27;tool_call&#x27;),
 ModelRequest(parts=[ToolReturnPart(tool_name=&#x27;search_papers&#x27;, content=[Paper(title=&#x27;Attention Is All You Need&#x27;, authors=[&#x27;Vaswani, A.&#x27;, &#x27;Shazeer, N.&#x27;, &#x27;Parmar, N.&#x27;], year=2017, abstract=&#x27;We propose a new simple network architecture, the Transformer...&#x27;, doi=&#x27;10.5555/3295222.3295349&#x27;), Paper(title=&#x27;BERT: Pre-training of Deep Bidirectional Transformers&#x27;, authors=[&#x27;Devlin, J.&#x27;, &#x27;Chang, M.&#x27;, &#x27;Lee, K.&#x27;], year=2019, abstract=&#x27;We introduce BERT, a method for pre-training language representations...&#x27;, doi=&#x27;10.18653/v1/N19-1423&#x27;)], tool_call_id=&#x27;toolu_01AVt8UCiMyphHSzmTC8BxYG&#x27;, timestamp=datetime.datetime(2025, 11, 11, 0, 53, 16, 476643, tzinfo=datetime.timezone.utc))]),
 ModelResponse(parts=[ToolCallPart(tool_name=&#x27;search_papers&#x27;, args={&#x27;query&#x27;: &#x27;New World monkeys biogeography geographic range&#x27;, &#x27;max_results&#x27;: 10}, tool_call_id=&#x27;toolu_01KDUPKnpMeDUsvWXGsvnsbW&#x27;)], usage=RequestUsage(input_tokens=2111, output_tokens=65, details={&#x27;cache_creation_input_tokens&#x27;: 0, &#x27;cache_read_input_tokens&#x27;: 0, &#x27;input_tokens&#x27;: 2111, &#x27;output_tokens&#x27;: 65}), model_name=&#x27;claude-sonnet-4-5-20250929&#x27;, timestamp=datetime.datetime(2025, 11, 11, 0, 53, 20, 354698, tzinfo=datetime.timezone.utc), provider_name=&#x27;anthropic&#x27;, provider_details={&#x27;finish_reason&#x27;: &#x27;tool_use&#x27;}, provider_response_id=&#x27;msg_01Ay7fCeJ5QezNvGbetcRw76&#x27;, finish_reason=&#x27;tool_call&#x27;),
 ModelRequest(parts=[ToolReturnPart(tool_name=&#x27;search_papers&#x27;, content=[Paper(title=&#x27;Attention Is All You Need&#x27;, authors=[&#x27;Vaswani, A.&#x27;, &#x27;Shazeer, N.&#x27;, &#x27;Parmar, N.&#x27;], year=2017, abstract=&#x27;We propose a new simple network architecture, the Transformer...&#x27;, doi=&#x27;10.5555/3295222.3295349&#x27;), Paper(title=&#x27;BERT: Pre-training of Deep Bidirectional Transformers&#x27;, authors=[&#x27;Devlin, J.&#x27;, &#x27;Chang, M.&#x27;, &#x27;Lee, K.&#x27;], year=2019, abstract=&#x27;We introduce BERT, a method for pre-training language representations...&#x27;, doi=&#x27;10.18653/v1/N19-1423&#x27;)], tool_call_id=&#x27;toolu_01KDUPKnpMeDUsvWXGsvnsbW&#x27;, timestamp=datetime.datetime(2025, 11, 11, 0, 53, 20, 356167, tzinfo=datetime.timezone.utc))]),
 ModelResponse(parts=[ToolCallPart(tool_name=&#x27;search_papers&#x27;, args={&#x27;query&#x27;: &#x27;Platyrrhini species richness northern limit&#x27;, &#x27;max_results&#x27;: 10}, tool_call_id=&#x27;toolu_017bNCgZUUaXoTRkJeZbxbLw&#x27;)], usage=RequestUsage(input_tokens=2354, output_tokens=66, details={&#x27;cache_creation_input_tokens&#x27;: 0, &#x27;cache_read_input_tokens&#x27;: 0, &#x27;input_tokens&#x27;: 2354, &#x27;output_tokens&#x27;: 66}), model_name=&#x27;claude-sonnet-4-5-20250929&#x27;, timestamp=datetime.datetime(2025, 11, 11, 0, 53, 23, 447720, tzinfo=datetime.timezone.utc), provider_name=&#x27;anthropic&#x27;, provider_details={&#x27;finish_reason&#x27;: &#x27;tool_use&#x27;}, provider_response_id=&#x27;msg_017djSEjhtoeJ3xUFs5puZ96&#x27;, finish_reason=&#x27;tool_call&#x27;),
 ModelRequest(parts=[ToolReturnPart(tool_name=&#x27;search_papers&#x27;, content=[Paper(title=&#x27;Attention Is All You Need&#x27;, authors=[&#x27;Vaswani, A.&#x27;, &#x27;Shazeer, N.&#x27;, &#x27;Parmar, N.&#x27;], year=2017, abstract=&#x27;We propose a new simple network architecture, the Transformer...&#x27;, doi=&#x27;10.5555/3295222.3295349&#x27;), Paper(title=&#x27;BERT: Pre-training of Deep Bidirectional Transformers&#x27;, authors=[&#x27;Devlin, J.&#x27;, &#x27;Chang, M.&#x27;, &#x27;Lee, K.&#x27;], year=2019, abstract=&#x27;We introduce BERT, a method for pre-training language representations...&#x27;, doi=&#x27;10.18653/v1/N19-1423&#x27;)], tool_call_id=&#x27;toolu_017bNCgZUUaXoTRkJeZbxbLw&#x27;, timestamp=datetime.datetime(2025, 11, 11, 0, 53, 23, 448744, tzinfo=datetime.timezone.utc))]),
 ModelResponse(parts=[ToolCallPart(tool_name=&#x27;final_result&#x27;, args={&#x27;query&#x27;: &#x27;How many species of monkeys live in north america&#x27;, &#x27;summary&#x27;: &#x27;I was unable to find relevant academic papers addressing the question of how many monkey species live in North America. The search queries returned unrelated papers (about machine learning transformers and language models) rather than papers about primate biogeography or species distribution in North America. \n\nWithout access to relevant scientific literature through this search tool, I cannot provide a scientifically-supported answer to this question based on the available search results.&#x27;, &#x27;key_papers&#x27;: [{&#x27;title&#x27;: &#x27;Attention Is All You Need&#x27;, &#x27;authors&#x27;: [&#x27;Vaswani, A.&#x27;, &#x27;Shazeer, N.&#x27;, &#x27;Parmar, N.&#x27;], &#x27;year&#x27;: 2017, &#x27;abstract&#x27;: &#x27;We propose a new simple network architecture, the Transformer...&#x27;}], &#x27;confidence&#x27;: 0.0}, tool_call_id=&#x27;toolu_01PikVbFar7CsAZBpN2JDEBr&#x27;)], usage=RequestUsage(input_tokens=2598, output_tokens=264, details={&#x27;cache_creation_input_tokens&#x27;: 0, &#x27;cache_read_input_tokens&#x27;: 0, &#x27;input_tokens&#x27;: 2598, &#x27;output_tokens&#x27;: 264}), model_name=&#x27;claude-sonnet-4-5-20250929&#x27;, timestamp=datetime.datetime(2025, 11, 11, 0, 53, 29, 127835, tzinfo=datetime.timezone.utc), provider_name=&#x27;anthropic&#x27;, provider_details={&#x27;finish_reason&#x27;: &#x27;tool_use&#x27;}, provider_response_id=&#x27;msg_01TEjdUsCEHBazcEzoEdfoUd&#x27;, finish_reason=&#x27;tool_call&#x27;),
 ModelRequest(parts=[ToolReturnPart(tool_name=&#x27;final_result&#x27;, content=&#x27;Final result processed.&#x27;, tool_call_id=&#x27;toolu_01PikVbFar7CsAZBpN2JDEBr&#x27;, timestamp=datetime.datetime(2025, 11, 11, 0, 53, 29, 128273, tzinfo=datetime.timezone.utc))])]</span></code></div></div></div><div id="h0PanhjEEB" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">research_result.output</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="y-fraLvZ7XXtMuedZC6W0" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="ujGepJ5axa" class="relative group/block"><h3 id="what-just-happened" class="relative group"><span class="heading-text">What Just Happened?</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#what-just-happened" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Let’s break down the agent execution:</p><p><strong>1. Agent Received Query</strong></p><ul><li>User asked: “transformer architectures in NLP”</li><li>Agent has access to: search_papers and get_paper_details tools</li></ul><p><strong>2. Agent Made Decisions</strong></p><ul><li>LLM analyzed the query</li><li>Decided to call <code>search_papers(&quot;transformer architectures in NLP&quot;, max_results=5)</code></li><li>PydanticAI validated the parameters</li><li>Tool executed with access to deps via RunContext</li></ul><p><strong>3. Tool Returned Validated Data</strong></p><ul><li>Tool returned <code>list[Paper]</code> (type-checked)</li><li>Each Paper object validated by Pydantic</li><li>Agent received the results</li></ul><p><strong>4. Agent Synthesized Response</strong></p><ul><li>LLM analyzed the papers</li><li>Generated natural language summary</li><li>Selected key papers</li><li>Assigned confidence score</li><li>Returned ResearchSummary (validated!)</li></ul><p><strong>5. Type Safety Throughout</strong></p><ul><li>Every input validated before execution</li><li>Every output validated before return</li><li>Impossible to get wrong types</li><li>Clear errors if validation fails</li></ul><p>This is the power of type-safe agent development!</p></div><div id="UTZn4sB0E7" class="relative group/block"><h3 id="exercise-add-a-new-tool" class="relative group"><span class="heading-text">Exercise: Add a New Tool</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#exercise-add-a-new-tool" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Add a <code>compare_papers</code> tool that takes two paper titles and returns a comparison.</p><p><strong>Requirements</strong>:</p><ol start="1"><li>Use <code>@research_agent.tool</code> decorator</li><li>Accept <code>RunContext[ResearchDeps]</code> as first parameter</li><li>Take two paper titles as strings</li><li>Return a string with the comparison</li><li>Use proper docstring (the agent sees this!)</li></ol><p><strong>Hint</strong>: The agent will automatically see this new tool and can call it!</p></div><div id="tYLfD9U23Y" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">@research_agent.tool
def compare_papers(
    ctx: RunContext[ResearchDeps],
    paper1_title: str,
    paper2_title: str
) -&gt; str:
    &quot;&quot;&quot;
    Compare two papers by their titles.

    Args:
        paper1_title: Title of first paper
        paper2_title: Title of second paper

    Returns:
        Comparison summary
    &quot;&quot;&quot;
    # TODO: Implement comparison logic
    # In production, would search for both papers and compare:
    # - Publication dates
    # - Citation counts
    # - Research methods
    # - Key contributions

    return f&quot;Comparison between &#x27;{paper1_title}&#x27; and &#x27;{paper2_title}&#x27;: [TODO: implement]&quot;</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="e2PLYrAE4tgSeet0_gCaO" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="MbP0LhuOUP" class="relative group/block"><h3 id="advanced-dynamic-system-prompts" class="relative group"><span class="heading-text">Advanced: Dynamic System Prompts</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#advanced-dynamic-system-prompts" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>You can also generate system prompts dynamically based on context:</p></div><div id="ezRS9LY04H" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from pydantic_ai import RunContext

# Create agent without static system prompt
adaptive_agent = Agent(
    &#x27;anthropic:claude-haiku-4-5&#x27;,
    deps_type=ResearchDeps,
    output_type=ResearchSummary
)

# Dynamic system prompt based on context
@adaptive_agent.system_prompt(dynamic=True)
def get_system_prompt(ctx: RunContext[ResearchDeps]) -&gt; str:
    &quot;&quot;&quot;Generate system prompt based on current context.&quot;&quot;&quot;
    max_papers = ctx.deps.max_papers_per_search

    return f&quot;&quot;&quot;You are a research assistant with access to {max_papers} papers per search.

Focus on quality over quantity. When analyzing papers:
- Prioritize recent publications (last 5 years)
- Look for highly-cited works
- Consider methodological rigor
- Provide balanced summaries

Your database: {ctx.deps.database_url}
    &quot;&quot;&quot;

print(&quot;✓ Adaptive agent created with dynamic system prompt&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="fvNNUhg0lwi_c-ea7BVkU" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system"><code><span>✓ Adaptive agent created with dynamic system prompt
</span></code></pre></div></div></div><div id="xHzaCZL5zj" class="relative group/block"><h3 id="why-this-pattern-scales" class="relative group"><span class="heading-text">Why This Pattern Scales</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#why-this-pattern-scales" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>This agent architecture works for production systems because:</p><p><strong>1. Type Safety</strong></p><ul><li>Catch errors at development time</li><li>Invalid data rejected before processing</li><li>Clear validation errors guide debugging</li></ul><p><strong>2. Separation of Concerns</strong></p><ul><li>Agent logic separate from business logic</li><li>Dependencies injected, not hard-coded</li><li>Easy to test each component independently</li></ul><p><strong>3. Composability</strong></p><ul><li>Tools are just Python functions</li><li>Add new capabilities by adding new tools</li><li>Mix and match tools for different agents</li></ul><p><strong>4. Observability</strong></p><ul><li>Every tool call is logged</li><li>Clear execution trace</li><li>Easy to monitor and debug</li></ul><p><strong>5. Maintainability</strong></p><ul><li>Simple, readable code</li><li>Standard Python patterns</li><li>Type hints document the code</li></ul><p>This is how you build AI agents that last!</p></div><div id="SarbD3rwYa" class="relative group/block"><h3 id="key-takeaways" class="relative group"><span class="heading-text">Key Takeaways</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#key-takeaways" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p><strong>Type Safety Prevents Errors</strong></p><ul><li>Validate data at construction time</li><li>Invalid states become unrepresentable</li><li>Clear error messages guide debugging</li><li>Catch bugs before they reach production</li></ul><p><strong>PydanticAI Core Concepts</strong></p><ol start="1"><li><strong>Pydantic Models</strong> - Define validated data structures</li><li><strong>Agent</strong> - Coordinates LLM and tools</li><li><strong><span class="text-yellow-600" title="Citation Not Found"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1rem" height="1rem" class="inline mr-1"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"></path></svg>agent.tool</span></strong> - Register functions as tools</li><li><strong>RunContext[DepsType]</strong> - Inject dependencies safely</li><li><strong>result_type</strong> - Guarantee output structure</li></ol><p><strong>Production-Ready Pattern</strong></p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># 1. Define structures
class Output(BaseModel): ...
class Deps: ...

# 2. Create agent
agent = Agent(model, deps_type=Deps, result_type=Output)

# 3. Register tools
@agent.tool
def my_tool(ctx: RunContext[Deps], arg: str): ...

# 4. Run
result = await agent.run(query, deps=deps)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p><strong>Why This Works</strong></p><ul><li>Simple, composable primitives</li><li>Type safety throughout</li><li>Easy to test and maintain</li><li>Scales to complex systems</li></ul></div><div id="kcUYynfEgt" class="relative group/block"><h3 id="quick-reference" class="relative group"><span class="heading-text">Quick Reference</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#quick-reference" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p><strong>Pydantic Validation</strong>:</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from pydantic import BaseModel, Field

class MyModel(BaseModel):
    name: str = Field(min_length=1)
    count: int = Field(ge=0, le=100)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p><strong>Agent Creation</strong>:</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from pydantic_ai import Agent

agent = Agent(
    &#x27;anthropic:claude-haiku-4-5&#x27;,
    deps_type=MyDeps,
    result_type=MyOutput,
    system_prompt=&quot;...&quot;
)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p><strong>Tool Registration</strong>:</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">@agent.tool
def my_tool(
    ctx: RunContext[MyDeps],
    arg: str
) -&gt; MyType:
    &quot;&quot;&quot;Docstring that LLM sees.&quot;&quot;&quot;
    return ctx.deps.some_method(arg)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p><strong>Dynamic System Prompt</strong>:</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">@agent.system_prompt
def get_prompt(ctx: RunContext[MyDeps]) -&gt; str:
    return f&quot;Context: {ctx.deps.value}&quot;</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p><strong>Running Agent</strong>:</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Async
result = await agent.run(query, deps=my_deps)
output: MyOutput = result.data

# Streaming
async with agent.run_stream(query, deps=my_deps) as response:
    async for chunk in response.stream_text():
        print(chunk, end=&#x27;&#x27;)
    final = await response.get_data()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div></div><div id="fNgWr9OIWs" class="relative group/block"><h3 id="next-steps" class="relative group"><span class="heading-text">Next Steps</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#next-steps" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p><strong>In L.A2.03: Agent Frameworks Comparison</strong>, we’ll:</p><ul><li>Compare different agent frameworks (PydanticAI, LangChain, CrewAI)</li><li>Understand architectural trade-offs</li><li>Learn when to use each approach</li><li>See the same task implemented multiple ways</li></ul><p><strong>In Week A03: Multi-Agent Systems</strong>, we’ll:</p><ul><li>Build agent swarms with collective intelligence</li><li>Apply game theory to AI agent interactions</li><li>Create digital twins with agent-based models</li><li>Scale from single agents to agent ecosystems</li></ul><p><strong>Practice Ideas</strong>:</p><ol start="1"><li>Add more tools to the research agent (filter by year, compare citations)</li><li>Build an agent for a different domain (finance, healthcare, education)</li><li>Implement streaming responses for better UX</li><li>Add error handling and retry logic</li><li>Create a simple web UI with FastAPI</li></ol></div><div id="DCxv6X8xrJ" class="relative group/block"><h3 id="further-reading" class="relative group"><span class="heading-text">Further Reading</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#further-reading" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p><strong>PydanticAI Documentation</strong>:</p><ul><li><a target="_blank" rel="noreferrer" href="https://ai.pydantic.dev/" class="">Getting Started</a></li><li><a target="_blank" rel="noreferrer" href="https://ai.pydantic.dev/agents/" class="">Agents Guide</a></li><li><a target="_blank" rel="noreferrer" href="https://ai.pydantic.dev/tools/" class="">Tools Documentation</a></li><li><a target="_blank" rel="noreferrer" href="https://ai.pydantic.dev/dependencies/" class="">Dependencies</a></li><li><a target="_blank" rel="noreferrer" href="https://ai.pydantic.dev/examples/" class="">Examples</a></li></ul><p><strong>Pydantic Core</strong>:</p><ul><li><a target="_blank" rel="noreferrer" href="https://docs.pydantic.dev/" class="">Pydantic V2</a></li><li><a target="_blank" rel="noreferrer" href="https://docs.pydantic.dev/latest/concepts/fields/" class="">Field Validation</a></li><li><a target="_blank" rel="noreferrer" href="https://docs.pydantic.dev/latest/concepts/models/" class="">Models</a></li></ul><p><strong>Python Type System</strong>:</p><ul><li><a target="_blank" rel="noreferrer" href="https://docs.python.org/3/library/typing.html" class="">Type Hints</a></li><li><a target="_blank" rel="noreferrer" href="https://peps.python.org/pep-0544/" class="">Protocols</a></li><li><a target="_blank" rel="noreferrer" href="https://docs.python.org/3/library/typing.html#generics" class="">Generics</a></li></ul><p><strong>Production Topics</strong> (for later):</p><ul><li>Testing with pytest</li><li>Monitoring with Logfire</li><li>Deployment patterns</li><li>Cost optimization</li></ul></div><div></div><div class="flex pt-10 mb-10 space-x-4"><a class="flex-1 block p-4 font-normal text-gray-600 no-underline border border-gray-200 rounded shadow-sm group hover:border-blue-600 dark:hover:border-blue-400 hover:text-blue-600 dark:hover:text-blue-400 dark:text-gray-100 dark:border-gray-500 hover:shadow-lg dark:shadow-neutral-700" href="/l-a2-01-function-calling-and-tools"><div class="flex h-full align-middle"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.5rem" height="1.5rem" class="self-center transition-transform group-hover:-translate-x-1 shrink-0"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"></path></svg><div class="flex-grow text-right"><div class="text-xs text-gray-500 dark:text-gray-400">Agents 2</div>Function Calling and Tool Use: From Talk to Action</div></div></a><a class="flex-1 block p-4 font-normal text-gray-600 no-underline border border-gray-200 rounded shadow-sm group hover:border-blue-600 dark:hover:border-blue-400 hover:text-blue-600 dark:hover:text-blue-400 dark:text-gray-100 dark:border-gray-500 hover:shadow-lg dark:shadow-neutral-700" href="/l-a02-03-evaluations"><div class="flex h-full align-middle"><div class="flex-grow"><div class="text-xs text-gray-500 dark:text-gray-400">Agents 2</div>Evaluating AI Systems: Testing Agents at Scale</div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.5rem" height="1.5rem" class="self-center transition-transform group-hover:translate-x-1 shrink-0"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"></path></svg></div></a></div></article></main><script>((a,d)=>{if(!window.history.state||!window.history.state.key){let h=Math.random().toString(32).slice(2);window.history.replaceState({key:h},"")}try{let f=JSON.parse(sessionStorage.getItem(a)||"{}")[d||window.history.state.key];typeof f=="number"&&window.scrollTo(0,f)}catch(h){console.error(h),sessionStorage.removeItem(a)}})("positions", null)</script><link rel="modulepreload" href="/build/entry.client-UNPC4GT3.js"/><link rel="modulepreload" href="/build/_shared/chunk-OCTKKCIL.js"/><link rel="modulepreload" href="/build/_shared/chunk-UAI5KRM7.js"/><link rel="modulepreload" href="/build/_shared/chunk-2NH4LW52.js"/><link rel="modulepreload" href="/build/_shared/chunk-N2N6M3QH.js"/><link rel="modulepreload" href="/build/_shared/chunk-HBJK6BW3.js"/><link rel="modulepreload" href="/build/_shared/chunk-HYMQ7M2K.js"/><link rel="modulepreload" href="/build/_shared/chunk-OHOXABTA.js"/><link rel="modulepreload" href="/build/_shared/chunk-OCWQY3HK.js"/><link rel="modulepreload" href="/build/_shared/chunk-CPTH56EW.js"/><link rel="modulepreload" href="/build/_shared/chunk-3CVK3PYF.js"/><link rel="modulepreload" href="/build/_shared/chunk-J6FHCSRC.js"/><link rel="modulepreload" href="/build/_shared/chunk-S4SWV34C.js"/><link rel="modulepreload" href="/build/_shared/chunk-GUCIBHGO.js"/><link rel="modulepreload" href="/build/root-ZJZ4LRPY.js"/><link rel="modulepreload" href="/build/_shared/chunk-KGDL62ZF.js"/><link rel="modulepreload" href="/build/routes/$-23AHH5XS.js"/><script>window.__remixContext = {"url":"/l-a2-02-type-safe-agents-pydantic-patterns","state":{"loaderData":{"root":{"config":{"version":2,"myst":"1.6.0","options":{"hide_toc":false,"favicon":"/build/favicon-2547b7788b87f81b44ad3bc88b3d2a8b.ico","logo":"/build/logo-fdb88c5958d943ce34b840a833724994.png","logo_dark":"/build/logo-dark-68957f97f434b89940d35537897dfb8c.png"},"nav":[],"actions":[],"projects":[{"title":"UCF CAP-6318","description":"Computational Analysis of Social Complexity","authors":[{"nameParsed":{"literal":"Spencer Lyon","given":"Spencer","family":"Lyon"},"name":"Spencer Lyon","orcid":"0009-0001-6461-885X","email":"spencer.lyon@ucf.edu","affiliations":["University of Central Florida","Valorum Data"],"id":"contributors-myst-generated-uid-0","corresponding":true}],"affiliations":[{"id":"University of Central Florida","name":"University of Central Florida"},{"id":"Valorum Data","name":"Valorum Data"}],"id":"492c0fd0-6de5-4738-b5ab-8c08e34fb954","toc":[{"file":"week01/L01.01_welcome.ipynb"},{"children":[{"file":"week01/L01.02_setup.ipynb"},{"file":"week01/L01.03_julia_basics.ipynb"}],"title":"Julia 1"},{"children":[{"file":"week02/L02.01_julia_types_methods.ipynb"},{"file":"week02/L02.02_code_organization.ipynb"},{"file":"week02/L02.03_julia_packages.ipynb"}],"title":"Julia 2"},{"children":[{"file":"week03/L03.01_graphs.ipynb"},{"file":"week03/L03.02_strong_weak_ties.ipynb"}],"title":"Graph Theory 1"},{"children":[{"file":"week04/L04.01_homophily.ipynb"},{"file":"week04/L04.02_weighted_graphs.ipynb"},{"file":"week04/L04.03_structural_balance.ipynb"}],"title":"Graph Theory 2"},{"children":[{"file":"week05/L05.01_production_networks.ipynb"}],"title":"Production Networks"},{"children":[{"file":"week06/L06.01_abm_concepts.ipynb"},{"file":"week06/L06.02_schelling_agents.ipynb"}],"title":"ABM 1"},{"children":[{"file":"week07/L07.01_abm_money.ipynb"},{"file":"week07/L07.02_abm_paper_virality.ipynb"}],"title":"ABM 2"},{"children":[{"file":"week08/L08.01_game_theory_intro.ipynb"},{"file":"week08/L08.02_network_traffic.ipynb"}],"title":"Game Theory 1"},{"children":[{"file":"week09/L09.01_mixed_strategies.ipynb"},{"file":"week09/L09.03_auctions.ipynb"},{"file":"week09/L09.04_game_theory_lab.ipynb"}],"title":"Game Theory 2"},{"children":[{"file":"weekA01/L.A1.01_from_rule_based_to_learning_agents.ipynb"},{"file":"weekA01/L.A1.02_rag_pattern_augmented_knowledge.ipynb"},{"file":"weekA01/L.A1.03_multi_agent_conversations.ipynb"}],"title":"Agents 1"},{"children":[{"file":"weekA02/L.A2.01_function_calling_and_tools.ipynb"},{"file":"weekA02/L.A2.02_type_safe_agents_pydantic_patterns.ipynb"},{"file":"weekA02/L.A02.03_evaluations.ipynb"}],"title":"Agents 2"},{"children":[{"file":"weekA03/L.A03.01_MCP_with_fastmcp.ipynb"},{"file":"weekA03/L.A03.02_ai_agent_security.ipynb"}],"title":"Agents 3"}],"exports":[],"bibliography":[],"index":"index","pages":[{"level":1,"title":"Julia 1"},{"slug":"l01-02-setup","title":"Julia Setup","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l01-03-julia-basics","title":"Julia Foundations","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Julia 2"},{"slug":"l02-01-julia-types-methods","title":"Julia Types and Methods","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l02-02-code-organization","title":"Julia Code Organization","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l02-03-julia-packages","title":"Julia Package Development","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Graph Theory 1"},{"slug":"l03-01-graphs","title":"Graphs","description":"","date":"","thumbnail":"/build/967a40bb8f52cb4e2ba5e92214773160.png","thumbnailOptimized":"/build/967a40bb8f52cb4e2ba5e92214773160.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l03-02-strong-weak-ties","title":"Strong and Weak Ties","description":"","date":"","thumbnail":"/build/ca8cf7fd449d95329a6482e7c5663568.png","thumbnailOptimized":"/build/ca8cf7fd449d95329a6482e7c5663568.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Graph Theory 2"},{"slug":"l04-01-homophily","title":"Homophily","description":"","date":"","thumbnail":"/build/c2d78afac7a8f5c0a921d74dc173a647.png","thumbnailOptimized":"/build/c2d78afac7a8f5c0a921d74dc173a647.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l04-02-weighted-graphs","title":"Weighted Graphs","description":"","date":"","thumbnail":"/build/89abe19f81fbf303bd67dbdff22715f2.png","thumbnailOptimized":"/build/89abe19f81fbf303bd67dbdff22715f2.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l04-03-structural-balance","title":"Structural Balance","description":"","date":"","thumbnail":"/build/e8165665e7da5ff6c9050aa529f882e5.png","thumbnailOptimized":"/build/e8165665e7da5ff6c9050aa529f882e5.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Production Networks"},{"level":1,"title":"ABM 1"},{"slug":"l06-01-abm-concepts","title":"Agent Based Models","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l06-02-schelling-agents","title":"Schelling Model with Agents.jl","description":"","date":"","thumbnail":"/build/df6a6b05f3de1e22494ef3ccc0e47c9f.png","thumbnailOptimized":"/build/df6a6b05f3de1e22494ef3ccc0e47c9f.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"ABM 2"},{"slug":"l07-01-abm-money","title":"Agent Based Models Review/Practice","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l07-02-abm-paper-virality","title":"Academic Paper Virality: An Agent-Based Model","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Game Theory 1"},{"slug":"l08-01-game-theory-intro","title":"Game Theory 1","description":"","date":"","thumbnail":"/build/514111f16ff750b99f83913e8f7cef48.png","thumbnailOptimized":"/build/514111f16ff750b99f83913e8f7cef48.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l08-02-network-traffic","title":"Network Traffic with Game Theory","description":"","date":"","thumbnail":"/build/424d6f26a2e0b40ca12376f2698b2418.png","thumbnailOptimized":"/build/424d6f26a2e0b40ca12376f2698b2418.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Game Theory 2"},{"slug":"l09-01-mixed-strategies","title":"More Game Theory","description":"","date":"","thumbnail":"/build/c78b1360cc127c6ff833e0a98f9de844.png","thumbnailOptimized":"/build/c78b1360cc127c6ff833e0a98f9de844.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l09-03-auctions","title":"Auctions","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l09-04-game-theory-lab","title":"Game Theory Lab: Data Science Applications","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Agents 1"},{"slug":"l-a1-01-from-rule-based-to-learning-agents","title":"From Rule-Based to Learning Agents","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l-a1-02-rag-pattern-augmented-knowledge","title":"Retrieval-Augmented Generation: Augmenting AI with External Knowledge","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l-a1-03-multi-agent-conversations","title":"Multi-Agent Conversations and Emergent Collaboration","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Agents 2"},{"slug":"l-a2-01-function-calling-and-tools","title":"Function Calling and Tool Use: From Talk to Action","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l-a2-02-type-safe-agents-pydantic-patterns","title":"Type-Safe Agent Development with PydanticAI Patterns","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l-a02-03-evaluations","title":"Evaluating AI Systems: Testing Agents at Scale","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Agents 3"},{"slug":"l-a03-01-mcp-with-fastmcp","title":"Building Agent Tools with FastMCP","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l-a03-02-ai-agent-security","title":"Security for AI Agents: The Lethal Trifecta","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2}]}]},"CONTENT_CDN_PORT":"3100","MODE":"static"},"routes/$":{"config":{"version":2,"myst":"1.6.0","options":{"hide_toc":false,"favicon":"/build/favicon-2547b7788b87f81b44ad3bc88b3d2a8b.ico","logo":"/build/logo-fdb88c5958d943ce34b840a833724994.png","logo_dark":"/build/logo-dark-68957f97f434b89940d35537897dfb8c.png"},"nav":[],"actions":[],"projects":[{"title":"UCF CAP-6318","description":"Computational Analysis of Social Complexity","authors":[{"nameParsed":{"literal":"Spencer Lyon","given":"Spencer","family":"Lyon"},"name":"Spencer Lyon","orcid":"0009-0001-6461-885X","email":"spencer.lyon@ucf.edu","affiliations":["University of Central Florida","Valorum Data"],"id":"contributors-myst-generated-uid-0","corresponding":true}],"affiliations":[{"id":"University of Central Florida","name":"University of Central Florida"},{"id":"Valorum Data","name":"Valorum Data"}],"id":"492c0fd0-6de5-4738-b5ab-8c08e34fb954","toc":[{"file":"week01/L01.01_welcome.ipynb"},{"children":[{"file":"week01/L01.02_setup.ipynb"},{"file":"week01/L01.03_julia_basics.ipynb"}],"title":"Julia 1"},{"children":[{"file":"week02/L02.01_julia_types_methods.ipynb"},{"file":"week02/L02.02_code_organization.ipynb"},{"file":"week02/L02.03_julia_packages.ipynb"}],"title":"Julia 2"},{"children":[{"file":"week03/L03.01_graphs.ipynb"},{"file":"week03/L03.02_strong_weak_ties.ipynb"}],"title":"Graph Theory 1"},{"children":[{"file":"week04/L04.01_homophily.ipynb"},{"file":"week04/L04.02_weighted_graphs.ipynb"},{"file":"week04/L04.03_structural_balance.ipynb"}],"title":"Graph Theory 2"},{"children":[{"file":"week05/L05.01_production_networks.ipynb"}],"title":"Production Networks"},{"children":[{"file":"week06/L06.01_abm_concepts.ipynb"},{"file":"week06/L06.02_schelling_agents.ipynb"}],"title":"ABM 1"},{"children":[{"file":"week07/L07.01_abm_money.ipynb"},{"file":"week07/L07.02_abm_paper_virality.ipynb"}],"title":"ABM 2"},{"children":[{"file":"week08/L08.01_game_theory_intro.ipynb"},{"file":"week08/L08.02_network_traffic.ipynb"}],"title":"Game Theory 1"},{"children":[{"file":"week09/L09.01_mixed_strategies.ipynb"},{"file":"week09/L09.03_auctions.ipynb"},{"file":"week09/L09.04_game_theory_lab.ipynb"}],"title":"Game Theory 2"},{"children":[{"file":"weekA01/L.A1.01_from_rule_based_to_learning_agents.ipynb"},{"file":"weekA01/L.A1.02_rag_pattern_augmented_knowledge.ipynb"},{"file":"weekA01/L.A1.03_multi_agent_conversations.ipynb"}],"title":"Agents 1"},{"children":[{"file":"weekA02/L.A2.01_function_calling_and_tools.ipynb"},{"file":"weekA02/L.A2.02_type_safe_agents_pydantic_patterns.ipynb"},{"file":"weekA02/L.A02.03_evaluations.ipynb"}],"title":"Agents 2"},{"children":[{"file":"weekA03/L.A03.01_MCP_with_fastmcp.ipynb"},{"file":"weekA03/L.A03.02_ai_agent_security.ipynb"}],"title":"Agents 3"}],"exports":[],"bibliography":[],"index":"index","pages":[{"level":1,"title":"Julia 1"},{"slug":"l01-02-setup","title":"Julia Setup","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l01-03-julia-basics","title":"Julia Foundations","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Julia 2"},{"slug":"l02-01-julia-types-methods","title":"Julia Types and Methods","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l02-02-code-organization","title":"Julia Code Organization","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l02-03-julia-packages","title":"Julia Package Development","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Graph Theory 1"},{"slug":"l03-01-graphs","title":"Graphs","description":"","date":"","thumbnail":"/build/967a40bb8f52cb4e2ba5e92214773160.png","thumbnailOptimized":"/build/967a40bb8f52cb4e2ba5e92214773160.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l03-02-strong-weak-ties","title":"Strong and Weak Ties","description":"","date":"","thumbnail":"/build/ca8cf7fd449d95329a6482e7c5663568.png","thumbnailOptimized":"/build/ca8cf7fd449d95329a6482e7c5663568.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Graph Theory 2"},{"slug":"l04-01-homophily","title":"Homophily","description":"","date":"","thumbnail":"/build/c2d78afac7a8f5c0a921d74dc173a647.png","thumbnailOptimized":"/build/c2d78afac7a8f5c0a921d74dc173a647.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l04-02-weighted-graphs","title":"Weighted Graphs","description":"","date":"","thumbnail":"/build/89abe19f81fbf303bd67dbdff22715f2.png","thumbnailOptimized":"/build/89abe19f81fbf303bd67dbdff22715f2.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l04-03-structural-balance","title":"Structural Balance","description":"","date":"","thumbnail":"/build/e8165665e7da5ff6c9050aa529f882e5.png","thumbnailOptimized":"/build/e8165665e7da5ff6c9050aa529f882e5.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Production Networks"},{"level":1,"title":"ABM 1"},{"slug":"l06-01-abm-concepts","title":"Agent Based Models","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l06-02-schelling-agents","title":"Schelling Model with Agents.jl","description":"","date":"","thumbnail":"/build/df6a6b05f3de1e22494ef3ccc0e47c9f.png","thumbnailOptimized":"/build/df6a6b05f3de1e22494ef3ccc0e47c9f.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"ABM 2"},{"slug":"l07-01-abm-money","title":"Agent Based Models Review/Practice","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l07-02-abm-paper-virality","title":"Academic Paper Virality: An Agent-Based Model","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Game Theory 1"},{"slug":"l08-01-game-theory-intro","title":"Game Theory 1","description":"","date":"","thumbnail":"/build/514111f16ff750b99f83913e8f7cef48.png","thumbnailOptimized":"/build/514111f16ff750b99f83913e8f7cef48.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l08-02-network-traffic","title":"Network Traffic with Game Theory","description":"","date":"","thumbnail":"/build/424d6f26a2e0b40ca12376f2698b2418.png","thumbnailOptimized":"/build/424d6f26a2e0b40ca12376f2698b2418.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Game Theory 2"},{"slug":"l09-01-mixed-strategies","title":"More Game Theory","description":"","date":"","thumbnail":"/build/c78b1360cc127c6ff833e0a98f9de844.png","thumbnailOptimized":"/build/c78b1360cc127c6ff833e0a98f9de844.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l09-03-auctions","title":"Auctions","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l09-04-game-theory-lab","title":"Game Theory Lab: Data Science Applications","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Agents 1"},{"slug":"l-a1-01-from-rule-based-to-learning-agents","title":"From Rule-Based to Learning Agents","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l-a1-02-rag-pattern-augmented-knowledge","title":"Retrieval-Augmented Generation: Augmenting AI with External Knowledge","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l-a1-03-multi-agent-conversations","title":"Multi-Agent Conversations and Emergent Collaboration","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Agents 2"},{"slug":"l-a2-01-function-calling-and-tools","title":"Function Calling and Tool Use: From Talk to Action","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l-a2-02-type-safe-agents-pydantic-patterns","title":"Type-Safe Agent Development with PydanticAI Patterns","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l-a02-03-evaluations","title":"Evaluating AI Systems: Testing Agents at Scale","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Agents 3"},{"slug":"l-a03-01-mcp-with-fastmcp","title":"Building Agent Tools with FastMCP","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l-a03-02-ai-agent-security","title":"Security for AI Agents: The Lethal Trifecta","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2}]}]},"page":{"version":2,"kind":"Notebook","sha256":"3ace52b7046650561a79992f4b2856f6dbb0689f96c5fb211f3a5646b88827ac","slug":"l-a2-02-type-safe-agents-pydantic-patterns","location":"/weekA02/L.A2.02_type_safe_agents_pydantic_patterns.ipynb","dependencies":[],"frontmatter":{"title":"Type-Safe Agent Development with PydanticAI Patterns","content_includes_title":false,"kernelspec":{"name":"python3","display_name":".venv","language":"python"},"authors":[{"nameParsed":{"literal":"Spencer Lyon","given":"Spencer","family":"Lyon"},"name":"Spencer Lyon","orcid":"0009-0001-6461-885X","email":"spencer.lyon@ucf.edu","affiliations":["University of Central Florida","Valorum Data"],"id":"contributors-myst-generated-uid-0","corresponding":true}],"affiliations":[{"id":"University of Central Florida","name":"University of Central Florida"},{"id":"Valorum Data","name":"Valorum Data"}],"numbering":{"title":{"offset":1}},"exports":[{"format":"ipynb","filename":"L.A2.02_type_safe_agents_pydantic_patterns.ipynb","url":"/build/L.A2.02_type_safe_ag-8dcbaf6ecc5433b26a6222d72c884db0.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"blockquote","position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Computational Analysis of Social Complexity","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"UuGai1qtyv"}],"key":"JOgE1bbIZJ"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Fall 2025, Spencer Lyon","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"UwGk5qpIrK"}],"key":"s0LUqV3z8H"}],"key":"GzoX8CYwsM"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"strong","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Prerequisites","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"g1cBZ0B3JK"}],"key":"IRnDjqmZi9"}],"key":"gAbPi1qIB7"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":9,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Function calling concepts (L.A2.01)","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"c8lwOuoLxi"}],"key":"k5gzApYk50"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Python type hints and type safety","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"ltNP4u7RTD"}],"key":"F8jdEW8URC"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Basic agent architectures","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"HhlmyEdxRo"}],"key":"RLDHML47EI"}],"key":"lYaaP8yJwW"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"strong","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Outcomes","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"OmEUN25hCX"}],"key":"H41w8dexAx"}],"key":"D4bgxHfrFM"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":15,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Understand type-safe agent development principles","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"g6vzX8VTG1"}],"key":"zXBUIf141d"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Implement validation-first agent architectures with Pydantic","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"K5UbLQiqNN"}],"key":"V1FcJJxyNd"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Apply dependency injection patterns for testable agents","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"VaQjeQdDCB"}],"key":"SnG0fM314C"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"Build production-ready AI agents with PydanticAI","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"fF0gAKkDeK"}],"key":"q8It8YwEw5"}],"key":"d7yyKcNPsM"},{"type":"paragraph","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"strong","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"References","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"Dt6ySDsmPB"}],"key":"JaTXIrW59B"}],"key":"YEl3z9T6r9"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":22,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"link","url":"https://ai.pydantic.dev/","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"PydanticAI Documentation","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"zS9MTRuNMx"}],"urlSource":"https://ai.pydantic.dev/","key":"DAaxCcOSBU"}],"key":"WgVy7a4So3"},{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"link","url":"https://docs.pydantic.dev/","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"Pydantic Documentation","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"j5iMdggyFv"}],"urlSource":"https://docs.pydantic.dev/","key":"FERE0NkB0N"}],"key":"jqXciOgzCG"},{"type":"listItem","spread":true,"position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"link","url":"https://docs.python.org/3/library/typing.html","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"Python Type Hints","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"fiSYc1WvFM"}],"urlSource":"https://docs.python.org/3/library/typing.html","key":"tcmAkq1h6G"}],"key":"GOSdtvwQdM"}],"key":"e2RQYrE3m0"}],"key":"oDXjgm0gXV"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Why Type Safety Matters","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"gM4rEYOo8V"}],"identifier":"why-type-safety-matters","label":"Why Type Safety Matters","html_id":"why-type-safety-matters","implicit":true,"key":"Lww6U4TAYK"}],"key":"VkCNC1TqvM"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The Problem: Unvalidated Agent Systems","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"I2kDkpTbKF"}],"identifier":"the-problem-unvalidated-agent-systems","label":"The Problem: Unvalidated Agent Systems","html_id":"the-problem-unvalidated-agent-systems","implicit":true,"key":"ME8NYHlrLc"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Consider a simple agent that processes user queries and makes database updates","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Zj62Rxnt7K"}],"key":"fZYTJJfTpe"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"What could go wrong?","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"CDNbGFjSuQ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Wrong data types passed to functions","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"KUy8gpceJB"}],"key":"Gkp3ZcQbFj"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Invalid values that violate business logic","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"Br5qWSZVSH"}],"key":"RRtnvao0pe"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Runtime errors deep in execution","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"EkAyfDNenu"}],"key":"jDpJNJjt6Y"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Silent failures that corrupt data","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"U396iEZplL"}],"key":"D2HaQPB4W7"}],"key":"uloxqEz2pn"}],"key":"SNeMcZH0Ov"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"These bugs are ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"fW1H8WEenq"},{"type":"emphasis","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"expensive","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"ZVMtR9VdJW"}],"key":"wUbyQbXmNm"},{"type":"text","value":" in production","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"Kz6Ci3z8wH"}],"key":"slQnJ6cmVO"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Type safety catches entire classes of errors before they happen","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"HiYYh04NIV"}],"key":"CfSaacZBpp"}],"key":"tt4h3FUoq9"}],"key":"VvEGECnKUF"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"A Concrete Example","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"QBmRLzCPVF"}],"identifier":"a-concrete-example","label":"A Concrete Example","html_id":"a-concrete-example","implicit":true,"key":"DOPUW1QxPz"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Suppose we’re building a research assistant agent that:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"OLEJBeHtdN"}],"key":"gd46XQEKWL"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Takes a research question","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"Eg3TzbNQIR"}],"key":"o5PmqWH0yz"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Searches academic databases","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"AQnX9symIh"}],"key":"kQ1Jetp05o"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Returns structured citations","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"Dk5lABbFVj"}],"key":"eaJSOrvs48"}],"key":"QeaAhF2cvO"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Without type safety:","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"KvnaWsTVbF"}],"key":"pS6blhUTuy"},{"type":"code","lang":"python","value":"# Python - no validation\ndef search_papers(query, max_results, min_year):\n    # What if query is None?\n    # What if max_results is negative?\n    # What if min_year is 99999?\n    ...","position":{"start":{"line":9,"column":1},"end":{"line":16,"column":1}},"key":"SsxVS9kSEf"},{"type":"paragraph","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"With type safety:","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"YncNMUTpFf"}],"key":"a4lsBqNxmh"},{"type":"code","lang":"python","value":"# Python with Pydantic\nfrom pydantic import BaseModel, Field\n\nclass SearchRequest(BaseModel):\n    query: str = Field(min_length=1, max_length=500)\n    max_results: int = Field(ge=1, le=100)\n    min_year: int = Field(ge=1900, le=2025)\n\ndef search_papers(request: SearchRequest):\n    # Guaranteed valid inputs!\n    ...","position":{"start":{"line":19,"column":1},"end":{"line":31,"column":1}},"key":"QZhx3rYdxj"}],"key":"Ti8xlBHfXN"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Key Benefits","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Uih4174ghX"}],"identifier":"key-benefits","label":"Key Benefits","html_id":"key-benefits","implicit":true,"key":"H7l6KaQQQC"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Fail Fast, Fail Loud","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"OyPaIviuvT"}],"key":"VtTwKnTygb"}],"key":"z7Wtzv7Wso"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Invalid inputs rejected immediately","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"HYr8JREzyA"}],"key":"x39PJFgCWp"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Clear error messages","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Cn6CHaIpce"}],"key":"d7UlHDbCnz"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"No silent corruption","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"JwmWCueCKV"}],"key":"mptF5i7tRa"}],"key":"YmNeVLCp4s"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"strong","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Self-Documenting Code","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"tqW7J4YYT6"}],"key":"GnxjGqf76Y"}],"key":"WDGpmRa7Fp"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":9,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Types tell you what’s expected","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"fXtmtditWs"}],"key":"TkEJvW1Xd8"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"IDE autocomplete and hints","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"XONGzrcYpH"}],"key":"weqLaPCEQl"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Less need for comments","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"tsS9nViymG"}],"key":"ROm19gDYwH"}],"key":"UBls79gvJE"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"strong","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Refactoring Confidence","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"p8pb7KFUFT"}],"key":"PxfmuGoyuS"}],"key":"d377YNRZqH"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":14,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Change a type definition","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"HjdKE4Az1l"}],"key":"oDatvwsXK5"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Compiler/type checker finds all affected code","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"evPav7Uuh8"}],"key":"DKgxf3THdI"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Safe to modify large systems","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"qzoFpBneY7"}],"key":"xy7zzLMQh6"}],"key":"Ml9BKhfPKD"},{"type":"paragraph","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"strong","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Testing Made Easier","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"euE08gzyX7"}],"key":"JGOwUBUGg5"}],"key":"AHTE74X4mJ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":19,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"Don’t need to test invalid types","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"C5MJ2uRYWf"}],"key":"zImVBzoK4y"},{"type":"listItem","spread":true,"position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"Focus on business logic","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"aUp8sUlMVA"}],"key":"GsEi0DFgSu"},{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Reduce test surface area","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"bRs5jfMj3D"}],"key":"DY6GuOvfNO"}],"key":"x87bZNaOJz"}],"key":"F1GHHKrUBY"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The PydanticAI Philosophy","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"t2lJXyMHbC"}],"identifier":"the-pydanticai-philosophy","label":"The PydanticAI Philosophy","html_id":"the-pydanticai-philosophy","implicit":true,"key":"B258RECjj9"}],"key":"ZBmpt0a1W8"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"What is PydanticAI?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"EeRzTIaRyc"}],"identifier":"what-is-pydanticai","label":"What is PydanticAI?","html_id":"what-is-pydanticai","implicit":true,"key":"urD47CWXa3"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"PydanticAI is a Python framework for building production-ready AI agents","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"M8XNnjjU84"}],"key":"HPyxdOSDSf"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Created by the team behind Pydantic","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"fYFC9jgWDR"}],"key":"qEqDI4xYKK"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Pydantic powers the OpenAI SDK, Anthropic SDK, FastAPI, and countless other production systems","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"KoTgyGATe7"}],"key":"O1JvJZ6cN2"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Philosophy: ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"GZT16pEU1Q"},{"type":"strong","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"validation-first development","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"yelSGRswqb"}],"key":"ibGUFsjHg1"}],"key":"Q8mK7i5jYB"}],"key":"qksXjVcPNa"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"strong","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Why PydanticAI?","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"KCObuhVkjY"}],"key":"Tm49h7M9IJ"}],"key":"D1vMVusIp6"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":9,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Type safety catches errors before runtime","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"REHGHjrAMS"}],"key":"q8TWWBOoJl"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Validation ensures data integrity","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"O2V9PMnb6n"}],"key":"wadKygJZUf"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Production-ready patterns from day one","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"HcSUgUbkMA"}],"key":"G8Tb9srbaQ"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Seamless integration with Python’s type system","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"mrq93LDaTQ"}],"key":"Sz2Smqb43Y"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Used by major companies in production","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"eNRhxz2qmr"}],"key":"FBXopAdtiK"}],"key":"Wcp4qphXk2"}],"key":"LTCV0BsgGf"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Chef’s Knife and Cutting Board","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"FZBYoOYz91"}],"identifier":"chefs-knife-and-cutting-board","label":"Chef’s Knife and Cutting Board","html_id":"chefs-knife-and-cutting-board","implicit":true,"key":"cXjuRSHURk"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"PydanticAI describes itself as providing a “chef’s knife and cutting board”","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"SzQhT89xfl"}],"key":"q8vHBb2KGz"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"What does this mean?","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"JbXhMRIBZz"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"NOT a framework","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"YMFjVYI1UH"}],"key":"NN2xnSehFP"},{"type":"text","value":" with opinions about everything","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"gDQOcIipds"}],"key":"IR1F01tErM"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"strong","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"IS a toolkit","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"z8mICI59Zk"}],"key":"NN53UxzKVy"},{"type":"text","value":" with powerful, composable primitives","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"wCtZml0ZEa"}],"key":"sCpZ9f3mRU"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Simple tools that do one thing well","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"VhzqBt6o81"}],"key":"R3lSn4e15T"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Combine them however you want","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"L4gqCJZotK"}],"key":"izoMkaMke6"}],"key":"myaBB5rRxo"}],"key":"EV2VK3fdHy"}],"key":"VbDQKK6kon"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"strong","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Contrast with LangChain","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"nbp3WuJAgt"}],"key":"jwTuuHla2W"},{"type":"text","value":":","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"qwEyLRqxsr"}],"key":"t4LprRAjkO"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":11,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"LangChain: Full kitchen with every appliance","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"prERSjNgjE"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":12,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Chains, memory, vector stores, callbacks, etc.","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"qidRW7b5z0"}],"key":"Ln3jvPBa9t"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Complex abstractions","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"Pz7aqfS0uo"}],"key":"hfpA3JPfKG"},{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Steep learning curve","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"vIL4Xd5Etd"}],"key":"j1Fzc17lc1"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Hard to customize","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"YgaPk5nNic"}],"key":"UcGyy8yfwM"}],"key":"JcdjdpRcBC"}],"key":"yUYzPzLJEL"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"PydanticAI: Essential tools","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"BCKiseKvj0"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":17,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Agent, tools, structured outputs","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"OLsOwTfwPT"}],"key":"TZ2ZftKXmO"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Simple abstractions","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"PESICrdKrq"}],"key":"wwhqoQB1Au"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"Easy to understand","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"tLOzBYDXvt"}],"key":"qHqU7vhly0"},{"type":"listItem","spread":true,"position":{"start":{"line":20,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Flexible customization","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"eflLdeVVNw"}],"key":"YkTmEjy5xZ"}],"key":"YsONu5q34j"}],"key":"WBxxXZa29I"}],"key":"Z4zWOZIfk7"},{"type":"paragraph","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"strong","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"When to Use Which","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"HyiEw4xxcK"}],"key":"u33z6AIBbc"},{"type":"text","value":":","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"hxwaLHXqSP"}],"key":"iWXKI0ctZt"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":23,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"Use PydanticAI when: building production systems, need type safety, want simplicity","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"b7VYxmJ5hR"}],"key":"Xwp5J0ENSu"},{"type":"listItem","spread":true,"position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"Use LangChain when: rapid prototyping, need batteries-included features, okay with complexity","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"qQYgYJZDIi"}],"key":"h2UOw8Lv5l"}],"key":"YrBxh62Imk"}],"key":"Fzx2moGqTf"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Core Principles","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"NUZMXctNeJ"}],"identifier":"core-principles","label":"Core Principles","html_id":"core-principles","implicit":true,"key":"xPhoZjZP8V"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"1. Type Safety First","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ckZKdnGUCx"}],"key":"IMPgGTirp9"}],"key":"HnuIFfFDmj"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"All inputs validated before use","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"dyqQ5gEhli"}],"key":"WmWEu6OXcQ"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"All outputs structured and validated","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"MDpoQEVo9o"}],"key":"lgMFGy6lDr"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Catch errors at design time, not runtime","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"IFHhxt4otx"}],"key":"m1tdCQfUms"}],"key":"U2uimeqlqb"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"strong","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"2. Validation Before Computation","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"ssrxfRSC68"}],"key":"b8sPwuKeWC"}],"key":"NGop3YJrWg"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":9,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Never process invalid data","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"n6UEu4aGvs"}],"key":"cQqQ7L3t0H"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Fail immediately with clear messages","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"XMYQ3S6amu"}],"key":"KNWLo6jHhP"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Make invalid states unrepresentable","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"E39dhsj33N"}],"key":"MSB813CVUj"}],"key":"uEiOZhqBoS"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"strong","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"3. Dependency Injection","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"w5ChvekB9a"}],"key":"iWWjmyKtSi"}],"key":"yJx4TSoVzp"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":14,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Agents don’t create their dependencies","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"iSuQM9qmpq"}],"key":"Dv6ZrM0QMU"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Dependencies passed in at construction","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"FIXxvuix5R"}],"key":"RiVVl751J9"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Easy to test with mocks","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"OoLH6PpG4x"}],"key":"i67Y8HZY8k"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Easy to swap implementations","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"fUXTo1Z0dt"}],"key":"U30dFOzKyH"}],"key":"g5Q7VZUkhH"},{"type":"paragraph","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"strong","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"4. Explicit Over Implicit","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"xmIM0qSh7T"}],"key":"VqiXLyzIHD"}],"key":"t5szScWZ2v"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":20,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"No magic global state","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"YI0U7WGhL7"}],"key":"khCfij3nxo"},{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"No hidden configuration","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"jqg8lSVxiH"}],"key":"dfWVPHotU7"},{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"Everything visible in function signatures","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"HWRzlDWBCH"}],"key":"R9guLOm00E"}],"key":"ZvbGTKf2Xx"},{"type":"paragraph","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"strong","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"5. Production Ready","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"kzNelDOR8w"}],"key":"ot9Kg0Qy1E"}],"key":"jkq2PyxdOj"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":25,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"Designed for real systems, not demos","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"ivdpK0TWxz"}],"key":"vv2OABGcZz"},{"type":"listItem","spread":true,"position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"Handles errors gracefully","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"yVHzoab9Li"}],"key":"qRNagoLTvS"},{"type":"listItem","spread":true,"position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"Observability built-in","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"osWeRTWDgg"}],"key":"wXFUvwroET"},{"type":"listItem","spread":true,"position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"Performance matters","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"H5n7EcMDb8"}],"key":"XLLZp2h3Ek"}],"key":"rOVFfWE2gt"}],"key":"Agn0Rd19F1"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Core Agent Components","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"afPzYswou9"}],"identifier":"core-agent-components","label":"Core Agent Components","html_id":"core-agent-components","implicit":true,"key":"lKB1OAO4li"}],"key":"yBBCmTJpIM"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The Four Essential Pieces","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GMovvwqyCN"}],"identifier":"the-four-essential-pieces","label":"The Four Essential Pieces","html_id":"the-four-essential-pieces","implicit":true,"key":"YRaqmBwDBv"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Every PydanticAI agent has these components:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"WhRb7lH2Hd"}],"key":"kDndXazhmf"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"1. Agent Definition","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Kcd1MLeH0F"}],"key":"nRbTSj0muX"}],"key":"RTf9ZJnOaG"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Specifies the LLM model to use","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"TY3evuKfqo"}],"key":"Y63HkBzlwg"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Defines system prompt","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"RqEvsb51qm"}],"key":"y93mYwfAcV"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Registers available tools","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"fzhPHFxGvn"}],"key":"KTyYlx34Wj"}],"key":"ad1VaMbes3"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"strong","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"2. Tool Functions","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"OC0cHQbG6I"}],"key":"hRuERIjDzN"}],"key":"UA0Bnon2GK"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":11,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Functions the agent can call","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"QdbQWRq3PD"}],"key":"wHiFGVGAmT"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Type-annotated parameters","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"SWGkVjZbeD"}],"key":"W4O1o1PGGy"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Validated inputs and outputs","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"hb7Ojhk57H"}],"key":"qCIbPRpYHB"}],"key":"x8BZMfvjmz"},{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"strong","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"3. Structured Outputs","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"DohDnTkcIW"}],"key":"FsdK4331Bn"}],"key":"nrtISlii3c"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":16,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Define what the agent should return","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"qKTIkEOALd"}],"key":"LmuKilek29"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Pydantic models for validation","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"BJfpRX6y39"}],"key":"rASV4ieH9S"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"Guaranteed schema compliance","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"lo0YEqk76V"}],"key":"NmFmI2NzUd"}],"key":"Q5x61BGbAV"},{"type":"paragraph","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"strong","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"4. Run Context (Dependencies)","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"sI7l5zbRkE"}],"key":"Zo2OCb2BFc"}],"key":"dZeBwcggHI"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":21,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"External services (databases, APIs)","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"kfaQwwncc1"}],"key":"fLbFotW0po"},{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Configuration","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"JrUHROmXpD"}],"key":"KVbFJiI6TM"},{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"State that flows through execution","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"u9VJBnhmz0"}],"key":"tWUpR43UC8"}],"key":"z5ZGgSYe68"},{"type":"paragraph","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"Let’s examine each in detail","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"hHhqk4SOZ2"}],"key":"JfPEQ80XyH"}],"key":"nfmrTgGVA4"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"1. Agent Definition","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"J29DdqrDCP"}],"identifier":"id-1-agent-definition","label":"1. Agent Definition","html_id":"id-1-agent-definition","implicit":true,"key":"DtFTYPmAr5"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"In PydanticAI (Python):","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"SWpS68Jk8n"}],"key":"rEOEK190b7"},{"type":"code","lang":"python","value":"from pydantic_ai import Agent\n\nagent = Agent(\n    'anthropic:claude-haiku-4-5',\n    system_prompt=\"You are a helpful research assistant.\",\n)","position":{"start":{"line":4,"column":1},"end":{"line":11,"column":1}},"key":"GiNbWLCP4b"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Key aspects:","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"HxAuLywVM7"}],"key":"EWpE9Ruz5n"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":14,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"strong","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Model string","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"UZvtSh6IdL"}],"key":"JcMFXHyYc6"},{"type":"text","value":": Specifies which LLM to use","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"Cx9bdDx8st"}],"key":"RUUdWruowQ"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"strong","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"System prompt","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"aXGKmSVpCc"}],"key":"v9spllSbd6"},{"type":"text","value":": Sets agent behavior and role","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"fElg9SHxP6"}],"key":"MxEbOjSIEN"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"strong","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Simple constructor","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"yR8MtgQkhg"}],"key":"HDVz27zpPa"},{"type":"text","value":": No complex configuration","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"cuLm0H1Xlf"}],"key":"mBcP4v7YyH"}],"key":"txC5mPEAQH"}],"key":"VwGm9FM0nF"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"2. Tool Functions","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"brqdzLISX8"}],"identifier":"id-2-tool-functions","label":"2. Tool Functions","html_id":"id-2-tool-functions","implicit":true,"key":"Cbw1jp0ZpI"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Tools are functions the agent can call:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"fmb1se6IBn"}],"key":"lAvSgt61T7"},{"type":"code","lang":"python","value":"from pydantic_ai import Agent\n\nagent = Agent('anthropic:claude-haiku-4-5')\n\n@agent.tool\ndef search_papers(\n    query: str,\n    max_results: int = 10\n) -\u003e list[dict]:\n    \"\"\"Search academic papers by query.\"\"\"\n    # Implementation here\n    return results","position":{"start":{"line":5,"column":1},"end":{"line":18,"column":1}},"key":"ea1xHFtK9P"},{"type":"paragraph","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"strong","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"What happens","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"mBytyRRo3q"}],"key":"nB4VEjmDup"},{"type":"text","value":":","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"EMiifGfbCe"}],"key":"xIGxSvVsqj"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":21,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"LLM sees tool name and docstring","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"Q1GJQfyoeQ"}],"key":"l24rnEPx9w"},{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"LLM decides when to call it","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"RkF14sWwOM"}],"key":"grAuk0JGu4"},{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"Parameters are validated against type hints","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"fEmctWsGV3"}],"key":"iArl3qloTR"},{"type":"listItem","spread":true,"position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"Function executes","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"UbiOhONIY2"}],"key":"ruVS07YYM3"},{"type":"listItem","spread":true,"position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"Return value validated","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"isBQlq1sc3"}],"key":"o5DbgViSML"},{"type":"listItem","spread":true,"position":{"start":{"line":26,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"Result given back to LLM","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"ANm8vH2aOs"}],"key":"nT5cJSHJ4H"}],"key":"xepxCNRS5a"},{"type":"paragraph","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"strong","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"Type safety at every step!","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"EECuPeUGmK"}],"key":"ShZwVloYPI"}],"key":"q1ssbm3qkb"}],"key":"HzGD0406Ve"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"3. Structured Outputs","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Fh6UVGyTeM"}],"identifier":"id-3-structured-outputs","label":"3. Structured Outputs","html_id":"id-3-structured-outputs","implicit":true,"key":"wfp1dVIFGZ"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Define exactly what you want back:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"E4U7kpIodG"}],"key":"xmY3V3zTZM"},{"type":"code","lang":"python","value":"from pydantic import BaseModel\nfrom pydantic_ai import Agent\n\nclass Citation(BaseModel):\n    title: str\n    authors: list[str]\n    year: int\n    doi: str | None = None\n\nclass ResearchResult(BaseModel):\n    summary: str\n    citations: list[Citation]\n    confidence: float\n\nagent = Agent(\n    'anthropic:claude-haiku-4-5',\n    output_type=ResearchResult\n)","position":{"start":{"line":5,"column":1},"end":{"line":24,"column":1}},"key":"XJ9HIPPair"},{"type":"paragraph","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"strong","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"Benefits","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"xdavCwFnve"}],"key":"oaC1AA4bYl"},{"type":"text","value":":","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"lpNjNSDhv4"}],"key":"KtiJQ0SIub"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":27,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"LLM must return this exact structure","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"nBMJ6EHAXi"}],"key":"KuyW7KsRaH"},{"type":"listItem","spread":true,"position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"Automatic validation","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"aU43tB4843"}],"key":"aEBeAwgZyO"},{"type":"listItem","spread":true,"position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"No parsing strings or JSON","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"U3gEk8NhjT"}],"key":"CKwVIIPPPl"},{"type":"listItem","spread":true,"position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"text","value":"IDE autocomplete on results","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"el607Z1iMV"}],"key":"oX0eQ0ou0v"}],"key":"stOXlsHNT4"}],"key":"qibvFxuLVZ"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"4. Run Context (Dependencies)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"lD818Iyjbw"}],"identifier":"id-4-run-context-dependencies","label":"4. Run Context (Dependencies)","html_id":"id-4-run-context-dependencies","implicit":true,"key":"Q3UWdxpUfx"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The secret sauce for testability:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Up4CdcnlZs"}],"key":"p53OhlpITx"},{"type":"code","lang":"python","value":"from pydantic_ai import Agent, RunContext\nfrom dataclasses import dataclass\n\n@dataclass\nclass Dependencies:\n    db: DatabaseClient\n    api_key: str\n    max_retries: int = 3\n\nagent = Agent(\n    'anthropic:claude-haiku-4-5',\n    deps_type=Dependencies\n)\n\n@agent.tool\ndef search_papers(\n    ctx: RunContext[Dependencies],\n    query: str\n) -\u003e list[dict]:\n    # Access dependencies via ctx.deps\n    return ctx.deps.db.search(query)","position":{"start":{"line":5,"column":1},"end":{"line":27,"column":1}},"key":"TFz4o9NGES"},{"type":"paragraph","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"strong","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"Why this matters","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"XHz2zUAUUz"}],"key":"ckjClZH1Cs"},{"type":"text","value":":","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"BI7ekIJdOw"}],"key":"DJkrcCojun"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":30,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"text","value":"No global variables","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"YXun2tLmeV"}],"key":"kCStTmcsvo"},{"type":"listItem","spread":true,"position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"Easy to inject mock dependencies for testing","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"T2hzKfOQwM"}],"key":"oqEYG5Ep04"},{"type":"listItem","spread":true,"position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"text","value":"Explicit about what each tool needs","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"vL160oK7Ue"}],"key":"x4HyM1x7SI"},{"type":"listItem","spread":true,"position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"text","value":"Can have different deps for dev/prod","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"MhcT5rZ6LQ"}],"key":"P3N4f9zj56"}],"key":"IS51nFKuwh"}],"key":"Vxgl1ADenZ"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Putting It All Together","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DGpGwufjbl"}],"identifier":"putting-it-all-together","label":"Putting It All Together","html_id":"putting-it-all-together","implicit":true,"key":"z4Woj8gifu"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"A complete PydanticAI agent:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"MZjjSM0V5M"}],"key":"fSlFlYeUjl"},{"type":"code","lang":"python","value":"from pydantic import BaseModel\nfrom pydantic_ai import Agent, RunContext\nfrom dataclasses import dataclass\n\n# 1. Define dependencies\n@dataclass\nclass ResearchDeps:\n    db: DatabaseClient\n    api_key: str\n\n# 2. Define output structure\nclass Citation(BaseModel):\n    title: str\n    authors: list[str]\n    year: int\n\nclass ResearchResult(BaseModel):\n    summary: str\n    citations: list[Citation]\n\n# 3. Create agent\nagent = Agent(\n    'anthropic:claude-haiku-4-5',\n    deps_type=ResearchDeps,\n    result_type=ResearchResult,\n    system_prompt='You are a research assistant.'\n)\n\n# 4. Register tools\n@agent.tool\ndef search_papers(\n    ctx: RunContext[ResearchDeps],\n    query: str,\n    max_results: int = 10\n) -\u003e list[dict]:\n    \"\"\"Search academic database.\"\"\"\n    return ctx.deps.db.search(query, limit=max_results)\n\n# 5. Run agent\nasync def run_research(question: str):\n    deps = ResearchDeps(\n        db=get_database(),\n        api_key=get_api_key()\n    )\n    result = await agent.run(question, deps=deps)\n    return result.data  # Guaranteed to be ResearchResult!","position":{"start":{"line":5,"column":1},"end":{"line":52,"column":1}},"key":"EUngg284zZ"}],"key":"wzvXiTLw0K"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Building a Research Assistant","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qtKNuNauTt"}],"identifier":"building-a-research-assistant","label":"Building a Research Assistant","html_id":"building-a-research-assistant","implicit":true,"key":"Jdcy45r8E6"}],"key":"JSGVozp5Gw"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from dotenv import load_dotenv\nimport nest_asyncio\n\nload_dotenv()\nnest_asyncio.apply()\n","key":"aHBPJtpexg"},{"type":"output","id":"b_4xu4ZK_-kR_1lkh09Ne","data":[],"key":"Woh2wsHtYK"}],"key":"j7OP7kCRK7"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"System Design","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"PSweDBnCDb"}],"identifier":"system-design","label":"System Design","html_id":"system-design","implicit":true,"key":"frcxgH7gD9"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Let’s build a complete research assistant that demonstrates all the PydanticAI concepts we’ve learned:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"n9mrKmmRNP"}],"key":"exAlO4hLX1"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Features","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"uVs4McwoXt"}],"key":"NJbnOCxI8G"},{"type":"text","value":":","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"PyaHxDIcYY"}],"key":"fbGz7aKosX"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Search academic papers by query","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"yFQwHTKmji"}],"key":"s6H38nNedp"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Get detailed paper information","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"KtgcVrQLhQ"}],"key":"flAb8kGp6x"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Generate structured research summaries","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"bHcVxcyH9o"}],"key":"MbIAcMrT4B"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Type-safe dependencies and outputs","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"AXP2EKlJnA"}],"key":"ss9OiDF5GV"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Multiple tools working together","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"JvxCjFcSEh"}],"key":"RSQl69P5oM"}],"key":"Xg8PqA1zqj"},{"type":"paragraph","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"strong","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Architecture","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"Gw3R5GbGmd"}],"key":"Rwh6TNJl3I"},{"type":"text","value":":","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"zkQxfWtumC"}],"key":"FI9KVlrW5n"},{"type":"code","lang":"","value":"User Query\n    ↓\nPydanticAI Agent (with system prompt)\n    ↓\nTool Selection (agent decides which tools to use)\n    ↓\nTool Execution (with validated inputs via RunContext)\n    ↓\nResult Synthesis (agent combines tool outputs)\n    ↓\nStructured Output (validated ResearchSummary)","position":{"start":{"line":13,"column":1},"end":{"line":25,"column":1}},"key":"XrWaEGjAOU"},{"type":"paragraph","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"This is a realistic pattern you’d use in production.","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"ATiSGcxuE5"}],"key":"oBNDccJK0V"}],"key":"NbQjxnHiTr"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 1: Define Output Structure","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"XtcZQ6V5Z4"}],"identifier":"step-1-define-output-structure","label":"Step 1: Define Output Structure","html_id":"step-1-define-output-structure","implicit":true,"key":"MqRQ89ih4Q"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"First, define what we want the agent to return:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"cc0nkhTzEd"}],"key":"SqitQ9aahG"}],"key":"uVqg30pOUE"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from pydantic import BaseModel, Field\nfrom typing import Optional\n\nclass Paper(BaseModel):\n    \"\"\"Academic paper with validated fields.\"\"\"\n    title: str = Field(min_length=1)\n    authors: list[str] = Field(min_length=1)\n    year: int = Field(ge=1800, le=2025)\n    abstract: str\n    doi: Optional[str] = None\n\nclass ResearchSummary(BaseModel):\n    \"\"\"Final research output with validation.\"\"\"\n    query: str = Field(min_length=1)\n    summary: str = Field(min_length=1, description=\"Natural language summary\")\n    key_papers: list[Paper] = Field(min_length=1, description=\"Most relevant papers found\")\n    confidence: float = Field(ge=0.0, le=1.0, description=\"Agent's confidence that an answer to the user's query has been found\")\n\n    def _repr_html_(self) -\u003e str:\n        \"\"\"Rich HTML display for Jupyter notebooks.\"\"\"\n        papers_html = \"\"\n        for i, paper in enumerate(self.key_papers, 1):\n            authors = \", \".join(paper.authors)\n            doi_link = f'\u003ca href=\"https://doi.org/{paper.doi}\" target=\"_blank\"\u003eDOI\u003c/a\u003e' if paper.doi else \"\"\n            papers_html += f\"\"\"\n            \u003cdiv style=\"margin: 10px 0; padding: 10px; background: #f8f9fa; border-left: 3px solid #007bff;\"\u003e\n                \u003cstrong\u003e{i}. {paper.title}\u003c/strong\u003e ({paper.year}) {doi_link}\u003cbr\u003e\n                \u003cem\u003e{authors}\u003c/em\u003e\u003cbr\u003e\n                \u003csmall style=\"color: #666;\"\u003e{paper.abstract[:200]}...\u003c/small\u003e\n            \u003c/div\u003e\n            \"\"\"\n\n        confidence_color = \"#28a745\" if self.confidence \u003e= 0.7 else \"#ffc107\" if self.confidence \u003e= 0.4 else \"#dc3545\"\n        confidence_pct = f\"{self.confidence:.0%}\"\n\n        return f\"\"\"\n        \u003cdiv style=\"font-family: sans-serif; max-width: 800px;\"\u003e\n            \u003ch3 style=\"color: #333; border-bottom: 2px solid #007bff; padding-bottom: 10px;\"\u003e\n                📚 Research Results: \"{self.query}\"\n            \u003c/h3\u003e\n            \u003cdiv style=\"margin: 15px 0; padding: 15px; background: #e7f3ff; border-radius: 5px;\"\u003e\n                \u003cstrong\u003eSummary:\u003c/strong\u003e\u003cbr\u003e\n                {self.summary}\n            \u003c/div\u003e\n            \u003cdiv style=\"margin: 10px 0;\"\u003e\n                \u003cstrong\u003eConfidence:\u003c/strong\u003e\n                \u003cspan style=\"color: {confidence_color}; font-weight: bold;\"\u003e{confidence_pct}\u003c/span\u003e\n            \u003c/div\u003e\n            \u003cdiv style=\"margin-top: 20px;\"\u003e\n                \u003cstrong\u003eKey Papers ({len(self.key_papers)}):\u003c/strong\u003e\n                {papers_html}\n            \u003c/div\u003e\n        \u003c/div\u003e\n        \"\"\"\n\n    def __str__(self) -\u003e str:\n        \"\"\"Plain text representation.\"\"\"\n        lines = [\n            f\"Research Results: {self.query}\",\n            \"=\" * 60,\n            f\"\\nSummary:\\n{self.summary}\",\n            f\"\\nConfidence: {self.confidence:.0%}\",\n            f\"\\nKey Papers ({len(self.key_papers)}):\",\n        ]\n\n        for i, paper in enumerate(self.key_papers, 1):\n            lines.append(f\"\\n{i}. {paper.title} ({paper.year})\")\n            lines.append(f\"   Authors: {', '.join(paper.authors)}\")\n            if paper.doi:\n                lines.append(f\"   DOI: {paper.doi}\")\n\n        return \"\\n\".join(lines)\n\n# Test that validation works\ntry:\n    invalid = Paper(title=\"\", authors=[], year=3000, abstract=\"test\")\nexcept Exception as e:\n    print(f\"✓ Validation caught error: {type(e).__name__}\")\n\n    # print the error\n    print(e)\n\nvalid = Paper(\n    title=\"Attention Is All You Need\",\n    authors=[\"Vaswani et al.\"],\n    year=2017,\n    abstract=\"We propose the Transformer...\"\n)\nprint(f\"✓ Valid paper created: {valid.title}\")","key":"Yxf6cUZDix"},{"type":"output","id":"wSa6a3W267OPjLHh_E1mb","data":[{"name":"stdout","output_type":"stream","text":"✓ Validation caught error: ValidationError\n3 validation errors for Paper\ntitle\n  String should have at least 1 character [type=string_too_short, input_value='', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.12/v/string_too_short\nauthors\n  List should have at least 1 item after validation, not 0 [type=too_short, input_value=[], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.12/v/too_short\nyear\n  Input should be less than or equal to 2025 [type=less_than_equal, input_value=3000, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.12/v/less_than_equal\n✓ Valid paper created: Attention Is All You Need\n"}],"key":"daWT9art3X"}],"key":"ui8GT0Mjuj"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 2: Define Dependencies","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tlsq7mM5iN"}],"identifier":"step-2-define-dependencies","label":"Step 2: Define Dependencies","html_id":"step-2-define-dependencies","implicit":true,"key":"eHcmn8nfxg"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Define external resources the agent needs:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"kKIploDTTE"}],"key":"fbt4gRPj4h"}],"key":"pHRjwMglRv"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from dataclasses import dataclass\n\n@dataclass\nclass ResearchDeps:\n    \"\"\"Dependencies for the research agent.\"\"\"\n    database_url: str\n    api_key: str\n    max_papers_per_search: int = 10\n\n    def search_database(self, query: str, limit: int) -\u003e list[Paper]:\n        \"\"\"Simulate database search (in production, would query real DB).\"\"\"\n        print(f\"  🔍 Searching database for: '{query}' (limit: {limit})\")\n\n        # In production, this would be:\n        # conn = connect(self.database_url, self.api_key)\n        # results = conn.execute(search_query)\n        # return [Paper(**row) for row in results]\n\n        # For demo, return mock results\n        return [\n            Paper(\n                title=\"Attention Is All You Need\",\n                authors=[\"Vaswani, A.\", \"Shazeer, N.\", \"Parmar, N.\"],\n                year=2017,\n                abstract=\"We propose a new simple network architecture, the Transformer...\",\n                doi=\"10.5555/3295222.3295349\"\n            ),\n            Paper(\n                title=\"BERT: Pre-training of Deep Bidirectional Transformers\",\n                authors=[\"Devlin, J.\", \"Chang, M.\", \"Lee, K.\"],\n                year=2019,\n                abstract=\"We introduce BERT, a method for pre-training language representations...\",\n                doi=\"10.18653/v1/N19-1423\"\n            ),\n        ]\n\n    def get_paper_by_id(self, paper_id: str) -\u003e Paper:\n        \"\"\"Retrieve specific paper by ID.\"\"\"\n        print(f\"  📄 Fetching paper: {paper_id}\")\n        return Paper(\n            title=\"Example Paper\",\n            authors=[\"Author, A.\"],\n            year=2023,\n            abstract=\"This is an example paper abstract.\"\n        )\n\n# Create dependencies\ndeps = ResearchDeps(\n    database_url=\"sqlite3:///papers.db\",\n    api_key=\"demo-api-key-12345\",\n    max_papers_per_search=5\n)\n\nprint(\"✓ Dependencies configured\")","key":"iAKyOQBdSf"},{"type":"output","id":"fH-IdFtR_2HjMRop3HPAH","data":[{"name":"stdout","output_type":"stream","text":"✓ Dependencies configured\n"}],"key":"dyEXLn2lBS"}],"key":"Nk1PpUBFM9"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 3: Create Agent and Register Tools","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JUtb9rXcUI"}],"identifier":"step-3-create-agent-and-register-tools","label":"Step 3: Create Agent and Register Tools","html_id":"step-3-create-agent-and-register-tools","implicit":true,"key":"OEYhjJpvov"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Now create the agent and give it tools:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"MfojANcq9z"}],"key":"EbISCCgzCj"}],"key":"dEXpZAkFdi"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from pydantic_ai import Agent, RunContext\n\n# Create agent with system prompt and structured output\nresearch_agent = Agent(\n    'anthropic:claude-sonnet-4-5',\n    deps_type=ResearchDeps,\n    output_type=ResearchSummary,\n    system_prompt=\"\"\"You are a helpful research assistant.\n\n    When asked to research a topic:\n    1. Search for relevant papers using the search_papers tool\n    2. Analyze the results carefully\n    3. Provide a clear summary with the most important papers\n    4. Rate your confidence based on result quality and relevance\n\n    Be thorough but concise. Focus on the most impactful papers.\n    IMPORTANT: never, under any circumstances, make up paper titles, authors, years, abstracts, or DOIs.\n\n    IMPORTANT: If you cannot find relevant papers, state that clearly in your summary and set confidence to 0.0. Also don't return any key papers.\n\n    IMPORTANT: only use details from the papers you find when generating the summary. do not invent information or use general knowledge.\n               again if you cannot find relevant papers, state that clearly in your summary and set confidence to 0.0.\n\n    \"\"\"\n)\n\n# Register tool 1: Search for papers\n@research_agent.tool\ndef search_papers(\n    ctx: RunContext[ResearchDeps],\n    query: str,\n    max_results: int = 5\n) -\u003e list[Paper]:\n    \"\"\"\n    Search for academic papers by query string.\n\n    Args:\n        query: Search query (keywords, topics, authors)\n        max_results: Maximum number of papers to return (default 5)\n\n    Returns:\n        List of relevant papers\n    \"\"\"\n    # Access dependencies via ctx.deps\n    limit = min(max_results, ctx.deps.max_papers_per_search)\n    papers = ctx.deps.search_database(query, limit)\n    return papers\n\n# Register tool 2: Get specific paper details\n@research_agent.tool\ndef get_paper_details(\n    ctx: RunContext[ResearchDeps],\n    paper_id: str\n) -\u003e Paper:\n    \"\"\"\n    Get detailed information about a specific paper by its ID.\n\n    Args:\n        paper_id: Unique identifier for the paper\n\n    Returns:\n        Paper object with full details\n    \"\"\"\n    return ctx.deps.get_paper_by_id(paper_id)\n\nprint(\"✓ Agent created with 2 tools registered\")","key":"apcWEx6gLR"},{"type":"output","id":"29Q8gUZHkJL7ZcV3Qg9vs","data":[{"name":"stdout","output_type":"stream","text":"✓ Agent created with 2 tools registered\n"}],"key":"ve9QOrRQId"}],"key":"P2hhONP6cP"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 4: Run the Agent","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"fjq5CyBy3I"}],"identifier":"step-4-run-the-agent","label":"Step 4: Run the Agent","html_id":"step-4-run-the-agent","implicit":true,"key":"UL94uJMtIb"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Execute the agent with a research query:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"mHqRkZmZft"}],"key":"e5dZ5Uhoup"}],"key":"HQ9twUTuYV"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from pydantic_ai import UsageLimits","key":"GT0AhYKFnZ"},{"type":"output","id":"BXTj0SHm7okILppFNI2pn","data":[],"key":"BipyTgtBcG"}],"key":"O7esZRMuPh"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"async def run_research(question: str):\n    deps = ResearchDeps(\n        database_url=\"sqlite3:///papers.db\",\n        api_key=\"demo-api-key-12345\",\n        max_papers_per_search=5\n    )\n    result = await research_agent.run(\n        question,\n        deps=deps,\n        usage_limits=UsageLimits(tool_calls_limit=5),\n    )\n    return result\n\nresearch_result = await run_research(\"How many species of monkeys live in north america\")","key":"qYaIpvFcIz"},{"type":"output","id":"gh1_f-U9XTlWLr3hdgGCg","data":[{"name":"stdout","output_type":"stream","text":"  🔍 Searching database for: 'monkeys species North America distribution' (limit: 5)\n  🔍 Searching database for: 'primate diversity North America native species' (limit: 5)\n  🔍 Searching database for: 'New World monkeys United States Canada Mexico biogeography' (limit: 5)\n  🔍 Searching database for: 'non-human primates North American continent native endemic' (limit: 5)\n  🔍 Searching database for: 'mammal fauna North America primates absence' (limit: 5)\n"},{"name":"stderr","output_type":"stream","text":"Traceback (most recent call last):\n  File \"/Users/sglyon/Teaching/UCF/CAP-6318/book-myst/weekA02/.venv/lib/python3.12/site-packages/IPython/core/interactiveshell.py\", line 3697, in run_code\n    await eval(code_obj, self.user_global_ns, self.user_ns)\n  File \"/var/folders/7d/x0yzvh3172zdzj7wsxtnhhh00000gn/T/ipykernel_4094/1915870946.py\", line 14, in \u003cmodule\u003e\n    research_result = await run_research(\"How many species of monkeys live in north america\")\n                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/var/folders/7d/x0yzvh3172zdzj7wsxtnhhh00000gn/T/ipykernel_4094/1915870946.py\", line 7, in run_research\n    result = await research_agent.run(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/sglyon/Teaching/UCF/CAP-6318/book-myst/weekA02/.venv/lib/python3.12/site-packages/pydantic_ai/agent/abstract.py\", line 225, in run\n    async with self.iter(\n               ^^^^^^^^^^\n  File \"/opt/homebrew/Cellar/python@3.12/3.12.12/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py\", line 231, in __aexit__\n    await self.gen.athrow(value)\n  File \"/Users/sglyon/Teaching/UCF/CAP-6318/book-myst/weekA02/.venv/lib/python3.12/site-packages/pydantic_ai/agent/__init__.py\", line 647, in iter\n    async with graph.iter(\n               ^^^^^^^^^^^\n  File \"/opt/homebrew/Cellar/python@3.12/3.12.12/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py\", line 231, in __aexit__\n    await self.gen.athrow(value)\n  File \"/Users/sglyon/Teaching/UCF/CAP-6318/book-myst/weekA02/.venv/lib/python3.12/site-packages/pydantic_graph/beta/graph.py\", line 271, in iter\n    async with GraphRun[StateT, DepsT, OutputT](\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/sglyon/Teaching/UCF/CAP-6318/book-myst/weekA02/.venv/lib/python3.12/site-packages/pydantic_graph/beta/graph.py\", line 400, in __aexit__\n    await self._async_exit_stack.__aexit__(exc_type, exc_val, exc_tb)\n  File \"/opt/homebrew/Cellar/python@3.12/3.12.12/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py\", line 754, in __aexit__\n    raise exc_details[1]\n  File \"/opt/homebrew/Cellar/python@3.12/3.12.12/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py\", line 735, in __aexit__\n    cb_suppress = cb(*exc_details)\n                  ^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/Cellar/python@3.12/3.12.12/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py\", line 158, in __exit__\n    self.gen.throw(value)\n  File \"/Users/sglyon/Teaching/UCF/CAP-6318/book-myst/weekA02/.venv/lib/python3.12/site-packages/pydantic_graph/beta/graph.py\", line 939, in _unwrap_exception_groups\n    raise exception\n  File \"/Users/sglyon/Teaching/UCF/CAP-6318/book-myst/weekA02/.venv/lib/python3.12/site-packages/pydantic_graph/beta/graph.py\", line 711, in _run_tracked_task\n    result = await self._run_task(t_)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/sglyon/Teaching/UCF/CAP-6318/book-myst/weekA02/.venv/lib/python3.12/site-packages/pydantic_graph/beta/graph.py\", line 740, in _run_task\n    output = await node.call(step_context)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/sglyon/Teaching/UCF/CAP-6318/book-myst/weekA02/.venv/lib/python3.12/site-packages/pydantic_graph/beta/step.py\", line 253, in _call_node\n    return await node.run(GraphRunContext(state=ctx.state, deps=ctx.deps))\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/sglyon/Teaching/UCF/CAP-6318/book-myst/weekA02/.venv/lib/python3.12/site-packages/pydantic_ai/_agent_graph.py\", line 544, in run\n    async with self.stream(ctx):\n               ^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/Cellar/python@3.12/3.12.12/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py\", line 217, in __aexit__\n    await anext(self.gen)\n  File \"/Users/sglyon/Teaching/UCF/CAP-6318/book-myst/weekA02/.venv/lib/python3.12/site-packages/pydantic_ai/_agent_graph.py\", line 558, in stream\n    async for _event in stream:\n  File \"/Users/sglyon/Teaching/UCF/CAP-6318/book-myst/weekA02/.venv/lib/python3.12/site-packages/pydantic_ai/_agent_graph.py\", line 676, in _run_stream\n    async for event in self._events_iterator:\n  File \"/Users/sglyon/Teaching/UCF/CAP-6318/book-myst/weekA02/.venv/lib/python3.12/site-packages/pydantic_ai/_agent_graph.py\", line 637, in _run_stream\n    async for event in self._handle_tool_calls(ctx, tool_calls):\n  File \"/Users/sglyon/Teaching/UCF/CAP-6318/book-myst/weekA02/.venv/lib/python3.12/site-packages/pydantic_ai/_agent_graph.py\", line 692, in _handle_tool_calls\n    async for event in process_tool_calls(\n  File \"/Users/sglyon/Teaching/UCF/CAP-6318/book-myst/weekA02/.venv/lib/python3.12/site-packages/pydantic_ai/_agent_graph.py\", line 888, in process_tool_calls\n    async for event in _call_tools(\n  File \"/Users/sglyon/Teaching/UCF/CAP-6318/book-myst/weekA02/.venv/lib/python3.12/site-packages/pydantic_ai/_agent_graph.py\", line 955, in _call_tools\n    usage_limits.check_before_tool_call(projected_usage)\n  File \"/Users/sglyon/Teaching/UCF/CAP-6318/book-myst/weekA02/.venv/lib/python3.12/site-packages/pydantic_ai/usage.py\", line 393, in check_before_tool_call\n    raise UsageLimitExceeded(\npydantic_ai.exceptions.UsageLimitExceeded: The next tool call(s) would exceed the tool_calls_limit of 5 (tool_calls=6).\n"}],"key":"iydwnWJDFE"}],"key":"aGB4U9H3aU"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"research_result.all_messages()","key":"vBqqKjXPfx"},{"type":"output","id":"hMYVG5S0ZIwk0vtPZV7bn","data":[{"output_type":"execute_result","execution_count":36,"metadata":{},"data":{"text/plain":{"content":"[ModelRequest(parts=[SystemPromptPart(content='You are a helpful research assistant.\\n\\n    When asked to research a topic:\\n    1. Search for relevant papers using the search_papers tool\\n    2. Analyze the results carefully\\n    3. Provide a clear summary with the most important papers\\n    4. Rate your confidence based on result quality and relevance\\n\\n    Be thorough but concise. Focus on the most impactful papers.\\n    IMPORTANT: never, under any circumstances, make up paper titles, authors, years, abstracts, or DOIs.\\n\\n    IMPORTANT: If you cannot find relevant papers, state that clearly in your summary and set confidence to 0.0.\\n\\n    IMPORTANT: only use details from the papers you find when generating the summary. do not invent information or use general knowledge.\\n               again if you cannot find relevant papers, state that clearly in your summary and set confidence to 0.0.\\n\\n    ', timestamp=datetime.datetime(2025, 11, 11, 0, 53, 8, 103168, tzinfo=datetime.timezone.utc)), UserPromptPart(content='How many species of monkeys live in north america', timestamp=datetime.datetime(2025, 11, 11, 0, 53, 8, 103172, tzinfo=datetime.timezone.utc))]),\n ModelResponse(parts=[ToolCallPart(tool_name='search_papers', args={'query': 'monkey species North America distribution native', 'max_results': 10}, tool_call_id='toolu_015iVGTiBwvEf1vSB4GDtH8s')], usage=RequestUsage(input_tokens=1387, output_tokens=62, details={'cache_creation_input_tokens': 0, 'cache_read_input_tokens': 0, 'input_tokens': 1387, 'output_tokens': 62}), model_name='claude-sonnet-4-5-20250929', timestamp=datetime.datetime(2025, 11, 11, 0, 53, 10, 617960, tzinfo=datetime.timezone.utc), provider_name='anthropic', provider_details={'finish_reason': 'tool_use'}, provider_response_id='msg_01AEYVeiqSynQXnyaVLd4osj', finish_reason='tool_call'),\n ModelRequest(parts=[ToolReturnPart(tool_name='search_papers', content=[Paper(title='Attention Is All You Need', authors=['Vaswani, A.', 'Shazeer, N.', 'Parmar, N.'], year=2017, abstract='We propose a new simple network architecture, the Transformer...', doi='10.5555/3295222.3295349'), Paper(title='BERT: Pre-training of Deep Bidirectional Transformers', authors=['Devlin, J.', 'Chang, M.', 'Lee, K.'], year=2019, abstract='We introduce BERT, a method for pre-training language representations...', doi='10.18653/v1/N19-1423')], tool_call_id='toolu_015iVGTiBwvEf1vSB4GDtH8s', timestamp=datetime.datetime(2025, 11, 11, 0, 53, 10, 618748, tzinfo=datetime.timezone.utc))]),\n ModelResponse(parts=[ToolCallPart(tool_name='search_papers', args={'query': 'primate diversity North America biogeography', 'max_results': 10}, tool_call_id='toolu_01EBPBpzy5uiXzoc292kcW2M')], usage=RequestUsage(input_tokens=1627, output_tokens=64, details={'cache_creation_input_tokens': 0, 'cache_read_input_tokens': 0, 'input_tokens': 1627, 'output_tokens': 64}), model_name='claude-sonnet-4-5-20250929', timestamp=datetime.datetime(2025, 11, 11, 0, 53, 13, 304667, tzinfo=datetime.timezone.utc), provider_name='anthropic', provider_details={'finish_reason': 'tool_use'}, provider_response_id='msg_014HCpQLThvjGCvj9HgFs2dH', finish_reason='tool_call'),\n ModelRequest(parts=[ToolReturnPart(tool_name='search_papers', content=[Paper(title='Attention Is All You Need', authors=['Vaswani, A.', 'Shazeer, N.', 'Parmar, N.'], year=2017, abstract='We propose a new simple network architecture, the Transformer...', doi='10.5555/3295222.3295349'), Paper(title='BERT: Pre-training of Deep Bidirectional Transformers', authors=['Devlin, J.', 'Chang, M.', 'Lee, K.'], year=2019, abstract='We introduce BERT, a method for pre-training language representations...', doi='10.18653/v1/N19-1423')], tool_call_id='toolu_01EBPBpzy5uiXzoc292kcW2M', timestamp=datetime.datetime(2025, 11, 11, 0, 53, 13, 305500, tzinfo=datetime.timezone.utc))]),\n ModelResponse(parts=[ToolCallPart(tool_name='search_papers', args={'query': 'native monkeys Mexico Central America United States', 'max_results': 10}, tool_call_id='toolu_01AVt8UCiMyphHSzmTC8BxYG')], usage=RequestUsage(input_tokens=1869, output_tokens=64, details={'cache_creation_input_tokens': 0, 'cache_read_input_tokens': 0, 'input_tokens': 1869, 'output_tokens': 64}), model_name='claude-sonnet-4-5-20250929', timestamp=datetime.datetime(2025, 11, 11, 0, 53, 16, 474688, tzinfo=datetime.timezone.utc), provider_name='anthropic', provider_details={'finish_reason': 'tool_use'}, provider_response_id='msg_01YAhvsa4njfepdKacmsotjQ', finish_reason='tool_call'),\n ModelRequest(parts=[ToolReturnPart(tool_name='search_papers', content=[Paper(title='Attention Is All You Need', authors=['Vaswani, A.', 'Shazeer, N.', 'Parmar, N.'], year=2017, abstract='We propose a new simple network architecture, the Transformer...', doi='10.5555/3295222.3295349'), Paper(title='BERT: Pre-training of Deep Bidirectional Transformers', authors=['Devlin, J.', 'Chang, M.', 'Lee, K.'], year=2019, abstract='We introduce BERT, a method for pre-training language representations...', doi='10.18653/v1/N19-1423')], tool_call_id='toolu_01AVt8UCiMyphHSzmTC8BxYG', timestamp=datetime.datetime(2025, 11, 11, 0, 53, 16, 476643, tzinfo=datetime.timezone.utc))]),\n ModelResponse(parts=[ToolCallPart(tool_name='search_papers', args={'query': 'New World monkeys biogeography geographic range', 'max_results': 10}, tool_call_id='toolu_01KDUPKnpMeDUsvWXGsvnsbW')], usage=RequestUsage(input_tokens=2111, output_tokens=65, details={'cache_creation_input_tokens': 0, 'cache_read_input_tokens': 0, 'input_tokens': 2111, 'output_tokens': 65}), model_name='claude-sonnet-4-5-20250929', timestamp=datetime.datetime(2025, 11, 11, 0, 53, 20, 354698, tzinfo=datetime.timezone.utc), provider_name='anthropic', provider_details={'finish_reason': 'tool_use'}, provider_response_id='msg_01Ay7fCeJ5QezNvGbetcRw76', finish_reason='tool_call'),\n ModelRequest(parts=[ToolReturnPart(tool_name='search_papers', content=[Paper(title='Attention Is All You Need', authors=['Vaswani, A.', 'Shazeer, N.', 'Parmar, N.'], year=2017, abstract='We propose a new simple network architecture, the Transformer...', doi='10.5555/3295222.3295349'), Paper(title='BERT: Pre-training of Deep Bidirectional Transformers', authors=['Devlin, J.', 'Chang, M.', 'Lee, K.'], year=2019, abstract='We introduce BERT, a method for pre-training language representations...', doi='10.18653/v1/N19-1423')], tool_call_id='toolu_01KDUPKnpMeDUsvWXGsvnsbW', timestamp=datetime.datetime(2025, 11, 11, 0, 53, 20, 356167, tzinfo=datetime.timezone.utc))]),\n ModelResponse(parts=[ToolCallPart(tool_name='search_papers', args={'query': 'Platyrrhini species richness northern limit', 'max_results': 10}, tool_call_id='toolu_017bNCgZUUaXoTRkJeZbxbLw')], usage=RequestUsage(input_tokens=2354, output_tokens=66, details={'cache_creation_input_tokens': 0, 'cache_read_input_tokens': 0, 'input_tokens': 2354, 'output_tokens': 66}), model_name='claude-sonnet-4-5-20250929', timestamp=datetime.datetime(2025, 11, 11, 0, 53, 23, 447720, tzinfo=datetime.timezone.utc), provider_name='anthropic', provider_details={'finish_reason': 'tool_use'}, provider_response_id='msg_017djSEjhtoeJ3xUFs5puZ96', finish_reason='tool_call'),\n ModelRequest(parts=[ToolReturnPart(tool_name='search_papers', content=[Paper(title='Attention Is All You Need', authors=['Vaswani, A.', 'Shazeer, N.', 'Parmar, N.'], year=2017, abstract='We propose a new simple network architecture, the Transformer...', doi='10.5555/3295222.3295349'), Paper(title='BERT: Pre-training of Deep Bidirectional Transformers', authors=['Devlin, J.', 'Chang, M.', 'Lee, K.'], year=2019, abstract='We introduce BERT, a method for pre-training language representations...', doi='10.18653/v1/N19-1423')], tool_call_id='toolu_017bNCgZUUaXoTRkJeZbxbLw', timestamp=datetime.datetime(2025, 11, 11, 0, 53, 23, 448744, tzinfo=datetime.timezone.utc))]),\n ModelResponse(parts=[ToolCallPart(tool_name='final_result', args={'query': 'How many species of monkeys live in north america', 'summary': 'I was unable to find relevant academic papers addressing the question of how many monkey species live in North America. The search queries returned unrelated papers (about machine learning transformers and language models) rather than papers about primate biogeography or species distribution in North America. \\n\\nWithout access to relevant scientific literature through this search tool, I cannot provide a scientifically-supported answer to this question based on the available search results.', 'key_papers': [{'title': 'Attention Is All You Need', 'authors': ['Vaswani, A.', 'Shazeer, N.', 'Parmar, N.'], 'year': 2017, 'abstract': 'We propose a new simple network architecture, the Transformer...'}], 'confidence': 0.0}, tool_call_id='toolu_01PikVbFar7CsAZBpN2JDEBr')], usage=RequestUsage(input_tokens=2598, output_tokens=264, details={'cache_creation_input_tokens': 0, 'cache_read_input_tokens': 0, 'input_tokens': 2598, 'output_tokens': 264}), model_name='claude-sonnet-4-5-20250929', timestamp=datetime.datetime(2025, 11, 11, 0, 53, 29, 127835, tzinfo=datetime.timezone.utc), provider_name='anthropic', provider_details={'finish_reason': 'tool_use'}, provider_response_id='msg_01TEjdUsCEHBazcEzoEdfoUd', finish_reason='tool_call'),\n ModelRequest(parts=[ToolReturnPart(tool_name='final_result', content='Final result processed.', tool_call_id='toolu_01PikVbFar7CsAZBpN2JDEBr', timestamp=datetime.datetime(2025, 11, 11, 0, 53, 29, 128273, tzinfo=datetime.timezone.utc))])]","content_type":"text/plain"}}}],"key":"iFHDOE1QaF"}],"key":"tk3jiU0urS"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"research_result.output","key":"pTMkgHGoeE"},{"type":"output","id":"y-fraLvZ7XXtMuedZC6W0","data":[{"output_type":"execute_result","execution_count":37,"metadata":{},"data":{"text/html":{"content":"\n        \u003cdiv style=\"font-family: sans-serif; max-width: 800px;\"\u003e\n            \u003ch3 style=\"color: #333; border-bottom: 2px solid #007bff; padding-bottom: 10px;\"\u003e\n                📚 Research Results: \"How many species of monkeys live in north america\"\n            \u003c/h3\u003e\n            \u003cdiv style=\"margin: 15px 0; padding: 15px; background: #e7f3ff; border-radius: 5px;\"\u003e\n                \u003cstrong\u003eSummary:\u003c/strong\u003e\u003cbr\u003e\n                I was unable to find relevant academic papers addressing the question of how many monkey species live in North America. The search queries returned unrelated papers (about machine learning transformers and language models) rather than papers about primate biogeography or species distribution in North America. \n\nWithout access to relevant scientific literature through this search tool, I cannot provide a scientifically-supported answer to this question based on the available search results.\n            \u003c/div\u003e\n            \u003cdiv style=\"margin: 10px 0;\"\u003e\n                \u003cstrong\u003eConfidence:\u003c/strong\u003e\n                \u003cspan style=\"color: #dc3545; font-weight: bold;\"\u003e0%\u003c/span\u003e\n            \u003c/div\u003e\n            \u003cdiv style=\"margin-top: 20px;\"\u003e\n                \u003cstrong\u003eKey Papers (1):\u003c/strong\u003e\n                \n            \u003cdiv style=\"margin: 10px 0; padding: 10px; background: #f8f9fa; border-left: 3px solid #007bff;\"\u003e\n                \u003cstrong\u003e1. Attention Is All You Need\u003c/strong\u003e (2017) \u003cbr\u003e\n                \u003cem\u003eVaswani, A., Shazeer, N., Parmar, N.\u003c/em\u003e\u003cbr\u003e\n                \u003csmall style=\"color: #666;\"\u003eWe propose a new simple network architecture, the Transformer......\u003c/small\u003e\n            \u003c/div\u003e\n            \n            \u003c/div\u003e\n        \u003c/div\u003e\n        ","content_type":"text/html"},"text/plain":{"content":"ResearchSummary(query='How many species of monkeys live in north america', summary='I was unable to find relevant academic papers addressing the question of how many monkey species live in North America. The search queries returned unrelated papers (about machine learning transformers and language models) rather than papers about primate biogeography or species distribution in North America. \\n\\nWithout access to relevant scientific literature through this search tool, I cannot provide a scientifically-supported answer to this question based on the available search results.', key_papers=[Paper(title='Attention Is All You Need', authors=['Vaswani, A.', 'Shazeer, N.', 'Parmar, N.'], year=2017, abstract='We propose a new simple network architecture, the Transformer...', doi=None)], confidence=0.0)","content_type":"text/plain"}}}],"key":"fv1VMzltaC"}],"key":"h0PanhjEEB"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"What Just Happened?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ir7Drw7fZP"}],"identifier":"what-just-happened","label":"What Just Happened?","html_id":"what-just-happened","implicit":true,"key":"DnV7e5YVkj"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Let’s break down the agent execution:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"rKpF0MCA0J"}],"key":"hO2EMJLcwu"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"1. Agent Received Query","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"fV6Yuzq5W6"}],"key":"ZUQOZj3e1M"}],"key":"okPtm63Xan"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"User asked: “transformer architectures in NLP”","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"Pu7MNGKCz0"}],"key":"aFSWW1ieCP"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Agent has access to: search_papers and get_paper_details tools","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"fk5SDkfWdG"}],"key":"dXfSLCTSET"}],"key":"gp4nVcN95W"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"strong","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"2. Agent Made Decisions","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"sNUK07SvCi"}],"key":"zr5Afh1ZV2"}],"key":"kCOQuLlIPu"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":10,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"LLM analyzed the query","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"r7nTDgIIAD"}],"key":"gBCoJnWK1W"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Decided to call ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"Daw41nA4gT"},{"type":"inlineCode","value":"search_papers(\"transformer architectures in NLP\", max_results=5)","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"zz8n7mfWw6"}],"key":"nGoFtLmJRu"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"PydanticAI validated the parameters","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"vv2E53B2Hc"}],"key":"XfHFTyfzB2"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Tool executed with access to deps via RunContext","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"kiQwZOazzJ"}],"key":"QH0PlBvtKH"}],"key":"DSAcX9aayA"},{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"strong","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"3. Tool Returned Validated Data","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"zBpFqeXiVr"}],"key":"uJr5SJRM0v"}],"key":"ikBXdTsb1C"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":16,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Tool returned ","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"CnRlrs2xYs"},{"type":"inlineCode","value":"list[Paper]","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"AjdMxRkpo9"},{"type":"text","value":" (type-checked)","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"WVZjoXbjCc"}],"key":"jVUqC5UuXL"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Each Paper object validated by Pydantic","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"tBHxyEefkq"}],"key":"r7EpTbNHvP"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"Agent received the results","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"oqLxEh88qI"}],"key":"FPaHXChC9k"}],"key":"qh8A8YrluK"},{"type":"paragraph","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"strong","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"4. Agent Synthesized Response","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"OycfEJxKDs"}],"key":"hz9A30wXT4"}],"key":"TikXPt3L0N"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":21,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"LLM analyzed the papers","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"a2CR9UHcXJ"}],"key":"B729obgK8J"},{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Generated natural language summary","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"VepB0SiJ1a"}],"key":"y0ydEL4QLo"},{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"Selected key papers","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"fxpTSGKdYN"}],"key":"GF97FvFCs7"},{"type":"listItem","spread":true,"position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"Assigned confidence score","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"dHxlpvLkIf"}],"key":"vNR9TvbFWP"},{"type":"listItem","spread":true,"position":{"start":{"line":25,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"Returned ResearchSummary (validated!)","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"GCNEdFcni5"}],"key":"bdKj45kLBn"}],"key":"M4ladlrmol"},{"type":"paragraph","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"strong","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"5. Type Safety Throughout","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"mibLhV6QWL"}],"key":"j2jUeEc1od"}],"key":"Hpl8Azx7cJ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":28,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"Every input validated before execution","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"JEgluULwfb"}],"key":"hZA6Ricg7m"},{"type":"listItem","spread":true,"position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"Every output validated before return","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"KyH376huFA"}],"key":"ClNlYEA3wV"},{"type":"listItem","spread":true,"position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"text","value":"Impossible to get wrong types","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"WC0CvUo9TV"}],"key":"mjVJSq5nL6"},{"type":"listItem","spread":true,"position":{"start":{"line":31,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"text","value":"Clear errors if validation fails","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"jNLY1cmcGr"}],"key":"tze0tks2MQ"}],"key":"oJX1WsPl1k"},{"type":"paragraph","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"text","value":"This is the power of type-safe agent development!","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"wc6XgV4xKr"}],"key":"c4dmOyAakB"}],"key":"ujGepJ5axa"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Exercise: Add a New Tool","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"oGzyXixowL"}],"identifier":"exercise-add-a-new-tool","label":"Exercise: Add a New Tool","html_id":"exercise-add-a-new-tool","implicit":true,"key":"Wy5RRae8To"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Add a ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"KuoTXIrpQB"},{"type":"inlineCode","value":"compare_papers","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"CwrAYtc18F"},{"type":"text","value":" tool that takes two paper titles and returns a comparison.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"j97wDd4NLQ"}],"key":"LxSHrDEylA"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Requirements","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"jsvn1HB714"}],"key":"MAW5XYyto5"},{"type":"text","value":":","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"GTHxbqKuRQ"}],"key":"df0zgxq181"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Use ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"TtgMDTGqZi"},{"type":"inlineCode","value":"@research_agent.tool","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"hMbttdAp44"},{"type":"text","value":" decorator","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"kKTgfvVWQs"}],"key":"x7nK7gJYzq"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Accept ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"MQk6gkrBgG"},{"type":"inlineCode","value":"RunContext[ResearchDeps]","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"RM6GlDdp9s"},{"type":"text","value":" as first parameter","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"GLHlykwF02"}],"key":"vfQiNVSyMQ"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Take two paper titles as strings","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"uLDIGzlbL9"}],"key":"apD3e5jCRN"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Return a string with the comparison","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"hNKd55MBqc"}],"key":"pINDQz64QP"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Use proper docstring (the agent sees this!)","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"XRKZfpFXVm"}],"key":"aPu1nR43k6"}],"key":"u6JlozJUPZ"},{"type":"paragraph","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"strong","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Hint","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"xlhADfYRXQ"}],"key":"JLwUIXihEe"},{"type":"text","value":": The agent will automatically see this new tool and can call it!","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"fWbzN0UuHZ"}],"key":"k491nwHvSM"}],"key":"UTZn4sB0E7"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"@research_agent.tool\ndef compare_papers(\n    ctx: RunContext[ResearchDeps],\n    paper1_title: str,\n    paper2_title: str\n) -\u003e str:\n    \"\"\"\n    Compare two papers by their titles.\n\n    Args:\n        paper1_title: Title of first paper\n        paper2_title: Title of second paper\n\n    Returns:\n        Comparison summary\n    \"\"\"\n    # TODO: Implement comparison logic\n    # In production, would search for both papers and compare:\n    # - Publication dates\n    # - Citation counts\n    # - Research methods\n    # - Key contributions\n\n    return f\"Comparison between '{paper1_title}' and '{paper2_title}': [TODO: implement]\"","key":"ytLvMBOMv6"},{"type":"output","id":"e2PLYrAE4tgSeet0_gCaO","data":[],"key":"QkIRNQJCpD"}],"key":"tYLfD9U23Y"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Advanced: Dynamic System Prompts","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"aNTodlRryT"}],"identifier":"advanced-dynamic-system-prompts","label":"Advanced: Dynamic System Prompts","html_id":"advanced-dynamic-system-prompts","implicit":true,"key":"WKP1RfR3Ze"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"You can also generate system prompts dynamically based on context:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"tGZnzNabzg"}],"key":"WGXGNiDiaX"}],"key":"MbP0LhuOUP"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from pydantic_ai import RunContext\n\n# Create agent without static system prompt\nadaptive_agent = Agent(\n    'anthropic:claude-haiku-4-5',\n    deps_type=ResearchDeps,\n    output_type=ResearchSummary\n)\n\n# Dynamic system prompt based on context\n@adaptive_agent.system_prompt(dynamic=True)\ndef get_system_prompt(ctx: RunContext[ResearchDeps]) -\u003e str:\n    \"\"\"Generate system prompt based on current context.\"\"\"\n    max_papers = ctx.deps.max_papers_per_search\n\n    return f\"\"\"You are a research assistant with access to {max_papers} papers per search.\n\nFocus on quality over quantity. When analyzing papers:\n- Prioritize recent publications (last 5 years)\n- Look for highly-cited works\n- Consider methodological rigor\n- Provide balanced summaries\n\nYour database: {ctx.deps.database_url}\n    \"\"\"\n\nprint(\"✓ Adaptive agent created with dynamic system prompt\")","key":"egRnEI3BjT"},{"type":"output","id":"fvNNUhg0lwi_c-ea7BVkU","data":[{"name":"stdout","output_type":"stream","text":"✓ Adaptive agent created with dynamic system prompt\n"}],"key":"MYnq0s4rHc"}],"key":"ezRS9LY04H"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Why This Pattern Scales","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tiqzjX2K42"}],"identifier":"why-this-pattern-scales","label":"Why This Pattern Scales","html_id":"why-this-pattern-scales","implicit":true,"key":"WT6Jx1Ard7"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"This agent architecture works for production systems because:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"SI1MULWDsW"}],"key":"pELKjmOOuH"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"1. Type Safety","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"cpahRq67xw"}],"key":"OUUnfOJYHs"}],"key":"fCxGcr1XUu"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Catch errors at development time","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"Q6ITiZEvSB"}],"key":"J49LONSD9e"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Invalid data rejected before processing","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"E4kEL2hgyU"}],"key":"WLz9tf569O"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Clear validation errors guide debugging","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"QnT0JUCgKp"}],"key":"Qjs7IxbyuX"}],"key":"oFmKJBUQdS"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"strong","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"2. Separation of Concerns","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"SFNzk8gtrp"}],"key":"sYs2JMqknc"}],"key":"xr7zoagJ6u"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":11,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Agent logic separate from business logic","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"pF1NSjZScs"}],"key":"gyet53m7QJ"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Dependencies injected, not hard-coded","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"aw9exgtlUe"}],"key":"E9UkdQJH5I"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Easy to test each component independently","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"ImIvYTBnMD"}],"key":"VWPtNqDtqX"}],"key":"CvoJuux9Nc"},{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"strong","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"3. Composability","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"e7lQBfwe7t"}],"key":"eQFUTyO8HC"}],"key":"Di5ITktspp"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":16,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Tools are just Python functions","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"A4SQR3NpDN"}],"key":"gklmDBex6i"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Add new capabilities by adding new tools","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"GXj2wDhpGk"}],"key":"ukuLLeFVf6"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"Mix and match tools for different agents","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"jOy7iMFkIH"}],"key":"YtyZq9xL13"}],"key":"rRm4QvRlnx"},{"type":"paragraph","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"strong","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"4. Observability","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"h0NSEqR6z0"}],"key":"PblZOY6RqW"}],"key":"kKbe9xZETG"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":21,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Every tool call is logged","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"YuI6fyZrzd"}],"key":"YdyVAh4lcI"},{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Clear execution trace","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"doH561wWHy"}],"key":"wNMzUss9ZX"},{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"Easy to monitor and debug","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"ORkkwCrx7P"}],"key":"nRxjU42c1b"}],"key":"hzCZftfEaE"},{"type":"paragraph","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"strong","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"5. Maintainability","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"dT8sePwdtA"}],"key":"aZtvc614yL"}],"key":"DFxx0LgwRl"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":26,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"Simple, readable code","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"Rt2e1unQJ1"}],"key":"YunOWr0H5y"},{"type":"listItem","spread":true,"position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"Standard Python patterns","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"LT126lgkMV"}],"key":"EfX2pt3NLX"},{"type":"listItem","spread":true,"position":{"start":{"line":28,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"Type hints document the code","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"xBmX6cWbW4"}],"key":"XYnQQemeMs"}],"key":"o55sK9SkGI"},{"type":"paragraph","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"text","value":"This is how you build AI agents that last!","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"uaxED7rloU"}],"key":"M3B51orjBB"}],"key":"xHzaCZL5zj"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Key Takeaways","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Q2z3EFwSfr"}],"identifier":"key-takeaways","label":"Key Takeaways","html_id":"key-takeaways","implicit":true,"key":"H6WnKVeZ2R"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Type Safety Prevents Errors","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"RdG9hzSHuf"}],"key":"UARTSVNlJM"}],"key":"EhjDvvk6wu"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Validate data at construction time","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"QNegp80aRM"}],"key":"aAsKTWVwBI"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Invalid states become unrepresentable","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"QvO5MGqnzh"}],"key":"RYdeyLaCi9"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Clear error messages guide debugging","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"k6Y5fAQvW3"}],"key":"kthg99Hbdr"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Catch bugs before they reach production","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"hOQwynTUzN"}],"key":"xNpBQk7NpP"}],"key":"laLNonkJWP"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"strong","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"PydanticAI Core Concepts","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"beNbcJKLlU"}],"key":"c0XnvTILgC"}],"key":"jGYk16zYBW"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":10,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"strong","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Pydantic Models","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"U04KhI7oyv"}],"key":"Y0hiOru5Xy"},{"type":"text","value":" - Define validated data structures","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"Wm2Q5rj9wP"}],"key":"Hl0mHksXcH"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"strong","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Agent","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"vzHDVv57Cb"}],"key":"InPrznjYlI"},{"type":"text","value":" - Coordinates LLM and tools","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"iu8caHpphz"}],"key":"blPyJqQ4zQ"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"strong","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"cite","identifier":"agent.tool","label":"agent.tool","kind":"narrative","position":{"start":{"line":12,"column":3},"end":{"line":12,"column":14}},"error":"not found","key":"y5W6gLMJne"}],"key":"pNEO6Q6FLT"},{"type":"text","value":" - Register functions as tools","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"gGKXd1intA"}],"key":"BnF0dO4OvE"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"strong","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"RunContext[DepsType]","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"EcvfYw5kDu"}],"key":"OFt9BhFDxv"},{"type":"text","value":" - Inject dependencies safely","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"w8pLXx8pas"}],"key":"rqhBmBCPiM"},{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"strong","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"result_type","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"fzJwSJb6WC"}],"key":"gB1Va0OSxC"},{"type":"text","value":" - Guarantee output structure","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"FtvebzDgU2"}],"key":"P1MRfKAtIZ"}],"key":"a4W8Urvprc"},{"type":"paragraph","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"strong","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Production-Ready Pattern","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"krLlS4F85p"}],"key":"YwazJm6CGf"}],"key":"FcEorNrFld"},{"type":"code","lang":"python","value":"# 1. Define structures\nclass Output(BaseModel): ...\nclass Deps: ...\n\n# 2. Create agent\nagent = Agent(model, deps_type=Deps, result_type=Output)\n\n# 3. Register tools\n@agent.tool\ndef my_tool(ctx: RunContext[Deps], arg: str): ...\n\n# 4. Run\nresult = await agent.run(query, deps=deps)","position":{"start":{"line":17,"column":1},"end":{"line":31,"column":1}},"key":"eFEkxiNtdB"},{"type":"paragraph","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"strong","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"text","value":"Why This Works","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"BggE3yKZqf"}],"key":"vZcssdXxe9"}],"key":"MiOUqyQQPF"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":34,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"text","value":"Simple, composable primitives","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"KbwpJddOoM"}],"key":"dJWs66rNzn"},{"type":"listItem","spread":true,"position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"text","value":"Type safety throughout","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"jA8e8N6jNa"}],"key":"r0OoY5JARX"},{"type":"listItem","spread":true,"position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"children":[{"type":"text","value":"Easy to test and maintain","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"tkjduqyhyp"}],"key":"dw31KQiUaB"},{"type":"listItem","spread":true,"position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"text","value":"Scales to complex systems","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"WNi5GoJp4A"}],"key":"Oibmlt7KPG"}],"key":"MJ5M8p0sh5"}],"key":"SarbD3rwYa"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Quick Reference","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hdGfTdQrhm"}],"identifier":"quick-reference","label":"Quick Reference","html_id":"quick-reference","implicit":true,"key":"pBUnaPqHbN"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Pydantic Validation","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"nUfaXj8odX"}],"key":"mN4YpR9l5U"},{"type":"text","value":":","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Y0btF1saCf"}],"key":"fDzcUPCBue"},{"type":"code","lang":"python","value":"from pydantic import BaseModel, Field\n\nclass MyModel(BaseModel):\n    name: str = Field(min_length=1)\n    count: int = Field(ge=0, le=100)","position":{"start":{"line":4,"column":1},"end":{"line":10,"column":1}},"key":"XT1befZxXA"},{"type":"paragraph","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"strong","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Agent Creation","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"kYtPpl5SJG"}],"key":"T848AxS596"},{"type":"text","value":":","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"yuqFzt1YLB"}],"key":"sEFtbeUwcd"},{"type":"code","lang":"python","value":"from pydantic_ai import Agent\n\nagent = Agent(\n    'anthropic:claude-haiku-4-5',\n    deps_type=MyDeps,\n    result_type=MyOutput,\n    system_prompt=\"...\"\n)","position":{"start":{"line":13,"column":1},"end":{"line":22,"column":1}},"key":"qpVniYxeW1"},{"type":"paragraph","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"strong","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"Tool Registration","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"ACOqm9slrX"}],"key":"dWtNRL04Hm"},{"type":"text","value":":","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"YuxPRaV1ZO"}],"key":"HiUOQfsHPI"},{"type":"code","lang":"python","value":"@agent.tool\ndef my_tool(\n    ctx: RunContext[MyDeps],\n    arg: str\n) -\u003e MyType:\n    \"\"\"Docstring that LLM sees.\"\"\"\n    return ctx.deps.some_method(arg)","position":{"start":{"line":25,"column":1},"end":{"line":33,"column":1}},"key":"IxZ6kS7hKh"},{"type":"paragraph","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"strong","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"text","value":"Dynamic System Prompt","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"Vsg8n8EYJA"}],"key":"xl33vMNdZT"},{"type":"text","value":":","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"mbNWFMvbVk"}],"key":"PtaC95IT1H"},{"type":"code","lang":"python","value":"@agent.system_prompt\ndef get_prompt(ctx: RunContext[MyDeps]) -\u003e str:\n    return f\"Context: {ctx.deps.value}\"","position":{"start":{"line":36,"column":1},"end":{"line":40,"column":1}},"key":"FDKbMUt94C"},{"type":"paragraph","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"children":[{"type":"strong","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"children":[{"type":"text","value":"Running Agent","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"key":"ch2LQvttEI"}],"key":"L9IXIB3Mti"},{"type":"text","value":":","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"key":"cseIISckGB"}],"key":"rfnOOi7UR2"},{"type":"code","lang":"python","value":"# Async\nresult = await agent.run(query, deps=my_deps)\noutput: MyOutput = result.data\n\n# Streaming\nasync with agent.run_stream(query, deps=my_deps) as response:\n    async for chunk in response.stream_text():\n        print(chunk, end='')\n    final = await response.get_data()","position":{"start":{"line":43,"column":1},"end":{"line":53,"column":1}},"key":"xK1xaWjEtt"}],"key":"kcUYynfEgt"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Next Steps","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dGVGCD8nd5"}],"identifier":"next-steps","label":"Next Steps","html_id":"next-steps","implicit":true,"key":"mQUrwzAq7k"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"In L.A2.03: Agent Frameworks Comparison","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Y1grA4IHpU"}],"key":"p95UAr9PvK"},{"type":"text","value":", we’ll:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"hEx2leheeD"}],"key":"vVjTWApLMd"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Compare different agent frameworks (PydanticAI, LangChain, CrewAI)","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"SImYl7RzbG"}],"key":"niLqKN2VNW"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Understand architectural trade-offs","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"QAJ34aDgFe"}],"key":"Q34DPezMmg"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Learn when to use each approach","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"yKHtntzplX"}],"key":"B4p8umGtJD"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"See the same task implemented multiple ways","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"BARsnYtAvg"}],"key":"cXwYtd9L9H"}],"key":"LNXN3qI8eh"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"strong","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"In Week A03: Multi-Agent Systems","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"co7un5fp1c"}],"key":"ZGcc2jVfAc"},{"type":"text","value":", we’ll:","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"ofzDxb5TxV"}],"key":"q1JIyb2wp3"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":10,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Build agent swarms with collective intelligence","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"n9nLiHQs5x"}],"key":"h81btDnY59"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Apply game theory to AI agent interactions","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"o6yTplg2kg"}],"key":"N1DcgPFdDE"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Create digital twins with agent-based models","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"gq9Pd6FiVj"}],"key":"eZz7phP9IT"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Scale from single agents to agent ecosystems","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"vpnbcESQTA"}],"key":"hKV0fvzKEW"}],"key":"dkLxJf90ZZ"},{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"strong","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Practice Ideas","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"tcimgrzTyZ"}],"key":"DEqnDhTowZ"},{"type":"text","value":":","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"e7MMYxITwE"}],"key":"HIc4Cc30S0"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":16,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Add more tools to the research agent (filter by year, compare citations)","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"xhPJq10nzt"}],"key":"fxtH2Qb3PJ"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Build an agent for a different domain (finance, healthcare, education)","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"XSnkOzlfpV"}],"key":"z9thtLAE9O"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Implement streaming responses for better UX","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"Z82K2FbrGs"}],"key":"uwl4xBKb6i"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"Add error handling and retry logic","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"QqoZZ7ec7A"}],"key":"cJ8KpsAtvK"},{"type":"listItem","spread":true,"position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"Create a simple web UI with FastAPI","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"hVGM6YGeFA"}],"key":"q5J8pROB0t"}],"key":"Kz9KZmkkBf"}],"key":"fNgWr9OIWs"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Further Reading","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ctzAX7HbS2"}],"identifier":"further-reading","label":"Further Reading","html_id":"further-reading","implicit":true,"key":"qgFtxjKY42"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"PydanticAI Documentation","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Ix6yDm2Pf3"}],"key":"pKoC5TmSKA"},{"type":"text","value":":","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"BTS6UaFEgN"}],"key":"jSppwCTVnM"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"link","url":"https://ai.pydantic.dev/","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Getting Started","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"Qq035NyMZ0"}],"urlSource":"https://ai.pydantic.dev/","key":"EfWLCDFNIj"}],"key":"dgUpixhLMY"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"link","url":"https://ai.pydantic.dev/agents/","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Agents Guide","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"oC7hLgNCJ2"}],"urlSource":"https://ai.pydantic.dev/agents/","key":"uL1FtrFWZr"}],"key":"N82wBBJRrd"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"link","url":"https://ai.pydantic.dev/tools/","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Tools Documentation","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"XbXZadppfV"}],"urlSource":"https://ai.pydantic.dev/tools/","key":"eIgxVHwhfw"}],"key":"LoRlSuzfhE"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"link","url":"https://ai.pydantic.dev/dependencies/","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Dependencies","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"QwNsP8Chnp"}],"urlSource":"https://ai.pydantic.dev/dependencies/","key":"yCECxO7ZYV"}],"key":"GNlhfwuPJt"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"link","url":"https://ai.pydantic.dev/examples/","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Examples","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"i7haXltNuV"}],"urlSource":"https://ai.pydantic.dev/examples/","key":"HvQ4XU0BL0"}],"key":"iJHBdDjjqq"}],"key":"Q3exoGNL0B"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"strong","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Pydantic Core","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"Gfp0DXuqSW"}],"key":"YCg9NtqDuK"},{"type":"text","value":":","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"MypCq3J101"}],"key":"Y8Zl0IBTKL"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":11,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"link","url":"https://docs.pydantic.dev/","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Pydantic V2","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"a9LCIAyNxO"}],"urlSource":"https://docs.pydantic.dev/","key":"M9FsTAeAdi"}],"key":"ZdO2SzBMOq"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"link","url":"https://docs.pydantic.dev/latest/concepts/fields/","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Field Validation","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"K85C9Bqrhc"}],"urlSource":"https://docs.pydantic.dev/latest/concepts/fields/","key":"tCAaTKRUnp"}],"key":"NhOc941dyO"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"link","url":"https://docs.pydantic.dev/latest/concepts/models/","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Models","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"CV8zRu9PDu"}],"urlSource":"https://docs.pydantic.dev/latest/concepts/models/","key":"cwNbIVnLwV"}],"key":"M6O66iu8Mc"}],"key":"vxhzpAnMIG"},{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"strong","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Python Type System","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"KbViYmkj0Q"}],"key":"eTkYy4d2es"},{"type":"text","value":":","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"SB7g7ChCz5"}],"key":"P3ECFAoEoS"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":16,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"link","url":"https://docs.python.org/3/library/typing.html","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Type Hints","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"sMefPT5TFw"}],"urlSource":"https://docs.python.org/3/library/typing.html","key":"livKWR3bvW"}],"key":"UaAOCHyCzE"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"link","url":"https://peps.python.org/pep-0544/","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Protocols","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"B156mP5GKa"}],"urlSource":"https://peps.python.org/pep-0544/","key":"FP9g4aSnyZ"}],"key":"sdQGVHVMUG"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"link","url":"https://docs.python.org/3/library/typing.html#generics","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Generics","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"vt92CdcEVR"}],"urlSource":"https://docs.python.org/3/library/typing.html#generics","key":"MIJFZteNnT"}],"key":"y17tz0RCwW"}],"key":"FiwvtPdYBv"},{"type":"paragraph","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"strong","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"Production Topics","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"r91h4pFxgo"}],"key":"Cym2gXFVIV"},{"type":"text","value":" (for later):","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"vg6WPyADqQ"}],"key":"pDnB3VOANN"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":21,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Testing with pytest","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"ni7pu73kaH"}],"key":"JEY8eFy5Uj"},{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Monitoring with Logfire","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"EI4aYXZlp0"}],"key":"uzJCDQcZuy"},{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"Deployment patterns","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"gnAAIvbdn4"}],"key":"rUQvNhqPMe"},{"type":"listItem","spread":true,"position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"Cost optimization","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"oJXjIcinFb"}],"key":"mEx7rrvObD"}],"key":"YFdkl8IqHT"}],"key":"DCxv6X8xrJ"}],"key":"bbvtZNxEFA"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Function Calling and Tool Use: From Talk to Action","url":"/l-a2-01-function-calling-and-tools","group":"Agents 2"},"next":{"title":"Evaluating AI Systems: Testing Agents at Scale","url":"/l-a02-03-evaluations","group":"Agents 2"}}},"domain":"http://localhost:3000"},"project":{"title":"UCF CAP-6318","description":"Computational Analysis of Social Complexity","authors":[{"nameParsed":{"literal":"Spencer Lyon","given":"Spencer","family":"Lyon"},"name":"Spencer Lyon","orcid":"0009-0001-6461-885X","email":"spencer.lyon@ucf.edu","affiliations":["University of Central Florida","Valorum Data"],"id":"contributors-myst-generated-uid-0","corresponding":true}],"affiliations":[{"id":"University of Central Florida","name":"University of Central Florida"},{"id":"Valorum Data","name":"Valorum Data"}],"id":"492c0fd0-6de5-4738-b5ab-8c08e34fb954","toc":[{"file":"week01/L01.01_welcome.ipynb"},{"children":[{"file":"week01/L01.02_setup.ipynb"},{"file":"week01/L01.03_julia_basics.ipynb"}],"title":"Julia 1"},{"children":[{"file":"week02/L02.01_julia_types_methods.ipynb"},{"file":"week02/L02.02_code_organization.ipynb"},{"file":"week02/L02.03_julia_packages.ipynb"}],"title":"Julia 2"},{"children":[{"file":"week03/L03.01_graphs.ipynb"},{"file":"week03/L03.02_strong_weak_ties.ipynb"}],"title":"Graph Theory 1"},{"children":[{"file":"week04/L04.01_homophily.ipynb"},{"file":"week04/L04.02_weighted_graphs.ipynb"},{"file":"week04/L04.03_structural_balance.ipynb"}],"title":"Graph Theory 2"},{"children":[{"file":"week05/L05.01_production_networks.ipynb"}],"title":"Production Networks"},{"children":[{"file":"week06/L06.01_abm_concepts.ipynb"},{"file":"week06/L06.02_schelling_agents.ipynb"}],"title":"ABM 1"},{"children":[{"file":"week07/L07.01_abm_money.ipynb"},{"file":"week07/L07.02_abm_paper_virality.ipynb"}],"title":"ABM 2"},{"children":[{"file":"week08/L08.01_game_theory_intro.ipynb"},{"file":"week08/L08.02_network_traffic.ipynb"}],"title":"Game Theory 1"},{"children":[{"file":"week09/L09.01_mixed_strategies.ipynb"},{"file":"week09/L09.03_auctions.ipynb"},{"file":"week09/L09.04_game_theory_lab.ipynb"}],"title":"Game Theory 2"},{"children":[{"file":"weekA01/L.A1.01_from_rule_based_to_learning_agents.ipynb"},{"file":"weekA01/L.A1.02_rag_pattern_augmented_knowledge.ipynb"},{"file":"weekA01/L.A1.03_multi_agent_conversations.ipynb"}],"title":"Agents 1"},{"children":[{"file":"weekA02/L.A2.01_function_calling_and_tools.ipynb"},{"file":"weekA02/L.A2.02_type_safe_agents_pydantic_patterns.ipynb"},{"file":"weekA02/L.A02.03_evaluations.ipynb"}],"title":"Agents 2"},{"children":[{"file":"weekA03/L.A03.01_MCP_with_fastmcp.ipynb"},{"file":"weekA03/L.A03.02_ai_agent_security.ipynb"}],"title":"Agents 3"}],"exports":[],"bibliography":[],"index":"index","pages":[{"level":1,"title":"Julia 1"},{"slug":"l01-02-setup","title":"Julia Setup","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l01-03-julia-basics","title":"Julia Foundations","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Julia 2"},{"slug":"l02-01-julia-types-methods","title":"Julia Types and Methods","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l02-02-code-organization","title":"Julia Code Organization","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l02-03-julia-packages","title":"Julia Package Development","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Graph Theory 1"},{"slug":"l03-01-graphs","title":"Graphs","description":"","date":"","thumbnail":"/build/967a40bb8f52cb4e2ba5e92214773160.png","thumbnailOptimized":"/build/967a40bb8f52cb4e2ba5e92214773160.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l03-02-strong-weak-ties","title":"Strong and Weak Ties","description":"","date":"","thumbnail":"/build/ca8cf7fd449d95329a6482e7c5663568.png","thumbnailOptimized":"/build/ca8cf7fd449d95329a6482e7c5663568.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Graph Theory 2"},{"slug":"l04-01-homophily","title":"Homophily","description":"","date":"","thumbnail":"/build/c2d78afac7a8f5c0a921d74dc173a647.png","thumbnailOptimized":"/build/c2d78afac7a8f5c0a921d74dc173a647.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l04-02-weighted-graphs","title":"Weighted Graphs","description":"","date":"","thumbnail":"/build/89abe19f81fbf303bd67dbdff22715f2.png","thumbnailOptimized":"/build/89abe19f81fbf303bd67dbdff22715f2.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l04-03-structural-balance","title":"Structural Balance","description":"","date":"","thumbnail":"/build/e8165665e7da5ff6c9050aa529f882e5.png","thumbnailOptimized":"/build/e8165665e7da5ff6c9050aa529f882e5.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Production Networks"},{"level":1,"title":"ABM 1"},{"slug":"l06-01-abm-concepts","title":"Agent Based Models","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l06-02-schelling-agents","title":"Schelling Model with Agents.jl","description":"","date":"","thumbnail":"/build/df6a6b05f3de1e22494ef3ccc0e47c9f.png","thumbnailOptimized":"/build/df6a6b05f3de1e22494ef3ccc0e47c9f.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"ABM 2"},{"slug":"l07-01-abm-money","title":"Agent Based Models Review/Practice","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l07-02-abm-paper-virality","title":"Academic Paper Virality: An Agent-Based Model","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Game Theory 1"},{"slug":"l08-01-game-theory-intro","title":"Game Theory 1","description":"","date":"","thumbnail":"/build/514111f16ff750b99f83913e8f7cef48.png","thumbnailOptimized":"/build/514111f16ff750b99f83913e8f7cef48.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l08-02-network-traffic","title":"Network Traffic with Game Theory","description":"","date":"","thumbnail":"/build/424d6f26a2e0b40ca12376f2698b2418.png","thumbnailOptimized":"/build/424d6f26a2e0b40ca12376f2698b2418.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Game Theory 2"},{"slug":"l09-01-mixed-strategies","title":"More Game Theory","description":"","date":"","thumbnail":"/build/c78b1360cc127c6ff833e0a98f9de844.png","thumbnailOptimized":"/build/c78b1360cc127c6ff833e0a98f9de844.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l09-03-auctions","title":"Auctions","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l09-04-game-theory-lab","title":"Game Theory Lab: Data Science Applications","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Agents 1"},{"slug":"l-a1-01-from-rule-based-to-learning-agents","title":"From Rule-Based to Learning Agents","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l-a1-02-rag-pattern-augmented-knowledge","title":"Retrieval-Augmented Generation: Augmenting AI with External Knowledge","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l-a1-03-multi-agent-conversations","title":"Multi-Agent Conversations and Emergent Collaboration","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Agents 2"},{"slug":"l-a2-01-function-calling-and-tools","title":"Function Calling and Tool Use: From Talk to Action","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l-a2-02-type-safe-agents-pydantic-patterns","title":"Type-Safe Agent Development with PydanticAI Patterns","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l-a02-03-evaluations","title":"Evaluating AI Systems: Testing Agents at Scale","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Agents 3"},{"slug":"l-a03-01-mcp-with-fastmcp","title":"Building Agent Tools with FastMCP","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l-a03-02-ai-agent-security","title":"Security for AI Agents: The Lethal Trifecta","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2}]}}},"actionData":null,"errors":null},"future":{"unstable_dev":false,"unstable_postcss":false,"unstable_tailwind":false,"v2_errorBoundary":true,"v2_headers":true,"v2_meta":true,"v2_normalizeFormMethod":true,"v2_routeConvention":true}};</script><script type="module" async="">import "/build/manifest-06410F0D.js";
import * as route0 from "/build/root-ZJZ4LRPY.js";
import * as route1 from "/build/routes/$-23AHH5XS.js";
window.__remixRouteModules = {"root":route0,"routes/$":route1};

import("/build/entry.client-UNPC4GT3.js");</script></body></html>