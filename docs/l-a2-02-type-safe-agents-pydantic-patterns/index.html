<!DOCTYPE html><html lang="en" class="" style="scroll-padding:60px"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Type-Safe Agent Development with PydanticAI Patterns - UCF CAP-6318</title><meta property="og:title" content="Type-Safe Agent Development with PydanticAI Patterns - UCF CAP-6318"/><meta name="generator" content="mystmd"/><meta name="description" content="Computational Analysis of Social Complexity"/><meta property="og:description" content="Computational Analysis of Social Complexity"/><meta name="keywords" content=""/><link rel="stylesheet" href="/build/_assets/app-PKKJHBHV.css"/><link rel="stylesheet" href="/build/_assets/thebe-core-VKVHG5VY.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jupyter-matplotlib@0.11.3/css/mpl_widget.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous"/><link rel="icon" href="/favicon.ico"/><link rel="stylesheet" href="/myst-theme.css"/><script>
  const savedTheme = localStorage.getItem("myst:theme");
  const theme = window.matchMedia("(prefers-color-scheme: light)").matches ? 'light' : 'dark';
  const classes = document.documentElement.classList;
  const hasAnyTheme = classes.contains('light') || classes.contains('dark');
  if (!hasAnyTheme) classes.add(savedTheme ?? theme);
</script></head><body class="m-0 transition-colors duration-500 bg-white dark:bg-stone-900"><div class="fixed top-1 left-1 h-[0px] w-[0px] focus-within:z-40 focus-within:h-auto focus-within:w-auto bg-white overflow-hidden focus-within:p-2 focus-within:ring-1" aria-label="skip to content options"><a href="#skip-to-frontmatter" class="block px-2 py-1 text-black underline">Skip to article frontmatter</a><a href="#skip-to-article" class="block px-2 py-1 text-black underline">Skip to article content</a></div><div class="bg-white/80 backdrop-blur dark:bg-stone-900/80 shadow dark:shadow-stone-700 p-3 md:px-8 sticky w-screen top-0 z-30 h-[60px]"><nav class="flex items-center justify-between flex-nowrap max-w-[1440px] mx-auto"><div class="flex flex-row xl:min-w-[19.5rem] mr-2 sm:mr-7 justify-start items-center shrink-0"><div class="block xl:hidden"><button class="flex items-center border-stone-400 text-stone-800 hover:text-stone-900 dark:text-stone-200 hover:dark:text-stone-100"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="m-1"><path fill-rule="evenodd" d="M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z" clip-rule="evenodd"></path></svg><span class="sr-only">Open Menu</span></button></div><a class="flex items-center ml-3 dark:text-white w-fit md:ml-5 xl:ml-7" href="/"><div class="p-1 mr-3"><img src="/build/logo-fdb88c5958d943ce34b840a833724994.png" class="h-9 dark:hidden" height="2.25rem"/><img src="/build/logo-dark-68957f97f434b89940d35537897dfb8c.png" class="hidden h-9 dark:block" height="2.25rem"/></div><span class="text-md sm:text-xl tracking-tight sm:mr-5 sr-only">Made with MyST</span></a></div><div class="flex items-center flex-grow w-auto"><div class="flex-grow hidden text-md lg:block"></div><div class="flex-grow block"></div><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R758p:" data-state="closed" class="flex items-center h-10 aspect-square sm:w-64 text-left text-gray-400 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 hover:ring-blue-500 dark:hover:ring-blue-500 hover:border-blue-500 dark:hover:border-blue-500"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="p-2.5 h-10 w-10 aspect-square"><path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z" clip-rule="evenodd"></path></svg><span class="hidden sm:block grow">Search</span><div aria-hidden="true" class="items-center hidden mx-1 font-mono text-sm text-gray-400 sm:flex gap-x-1"><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none hide-mac">CTRL</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none show-mac">⌘</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none ">K</kbd><script>
;(() => {
const script = document.currentScript;
const root = script.parentElement;

const isMac = /mac/i.test(
      window.navigator.userAgentData?.platform ?? window.navigator.userAgent,
    );
root.querySelectorAll(".hide-mac").forEach(node => {node.classList.add(isMac ? "hidden" : "block")});
root.querySelectorAll(".show-mac").forEach(node => {node.classList.add(!isMac ? "hidden" : "block")});
})()</script></div></button><button class="theme rounded-full aspect-square border border-stone-700 dark:border-white hover:bg-neutral-100 border-solid overflow-hidden text-stone-700 dark:text-white hover:text-stone-500 dark:hover:text-neutral-800 w-8 h-8 mx-3" title="Toggle theme between light and dark mode" aria-label="Toggle theme between light and dark mode"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="h-full w-full p-0.5 hidden dark:block"><path fill-rule="evenodd" d="M9.528 1.718a.75.75 0 0 1 .162.819A8.97 8.97 0 0 0 9 6a9 9 0 0 0 9 9 8.97 8.97 0 0 0 3.463-.69.75.75 0 0 1 .981.98 10.503 10.503 0 0 1-9.694 6.46c-5.799 0-10.5-4.7-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 0 1 .818.162Z" clip-rule="evenodd"></path></svg><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="h-full w-full p-0.5 dark:hidden"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"></path></svg></button><div class="block sm:hidden"></div><div class="hidden sm:block"></div></div></nav></div><div class="fixed xl:article-grid grid-gap xl:w-screen xl:pointer-events-none overflow-auto max-xl:min-w-[300px] hidden z-10" style="top:60px"><div class="pointer-events-auto xl:col-margin-left flex-col overflow-hidden hidden xl:flex"><div class="flex-grow py-6 overflow-y-auto primary-scrollbar"><nav aria-label="Navigation" class="overflow-y-hidden transition-opacity ml-3 xl:ml-0 mr-3 max-w-[350px] lg:hidden"><div class="w-full px-1 dark:text-white font-medium"></div></nav><div class="my-3 border-b-2 lg:hidden"></div><nav aria-label="Table of Contents" class="flex-grow overflow-y-hidden transition-opacity ml-3 xl:ml-0 mr-3 max-w-[350px]"><div class="w-full px-1 dark:text-white"><a title="UCF CAP-6318" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30 font-bold" href="/">UCF CAP-6318</a><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="Julia 1" class="block break-words rounded py-2 grow cursor-pointer">Julia 1</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:Rmpop:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:Rmpop:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="Julia 2" class="block break-words rounded py-2 grow cursor-pointer">Julia 2</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:Rupop:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:Rupop:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="Graph Theory 1" class="block break-words rounded py-2 grow cursor-pointer">Graph Theory 1</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R16pop:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:R16pop:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="Graph Theory 2" class="block break-words rounded py-2 grow cursor-pointer">Graph Theory 2</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R1epop:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:R1epop:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="Production Networks" class="block break-words rounded py-2 grow cursor-pointer">Production Networks</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R1mpop:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:R1mpop:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="ABM 1" class="block break-words rounded py-2 grow cursor-pointer">ABM 1</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R1upop:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:R1upop:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="ABM 2" class="block break-words rounded py-2 grow cursor-pointer">ABM 2</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R26pop:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:R26pop:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="Game Theory 1" class="block break-words rounded py-2 grow cursor-pointer">Game Theory 1</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R2epop:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:R2epop:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="Game Theory 2" class="block break-words rounded py-2 grow cursor-pointer">Game Theory 2</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R2mpop:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:R2mpop:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="Agents 1" class="block break-words rounded py-2 grow cursor-pointer">Agents 1</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R2upop:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:R2upop:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="open" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="Agents 2" class="block break-words rounded py-2 grow font-semibold text-blue-800 dark:text-blue-200 cursor-pointer">Agents 2</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R36pop:" aria-expanded="true" data-state="open"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="open" id="radix-:R36pop:" class="pl-3 pr-[2px] collapsible-content"><a title="Function Calling and Tool Use: From Talk to Action" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/l-a2-01-function-calling-and-tools">Function Calling and Tool Use: From Talk to Action</a><a title="Type-Safe Agent Development with PydanticAI Patterns" aria-current="page" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg bg-blue-300/30 active" href="/l-a2-02-type-safe-agents-pydantic-patterns">Type-Safe Agent Development with PydanticAI Patterns</a><a title="Evaluating AI Systems: Testing Agents at Scale" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/l-a02-03-evaluations">Evaluating AI Systems: Testing Agents at Scale</a></div></div></div></nav></div><div class="flex-none py-6 transition-all duration-700 translate-y-6 opacity-0"><a class="flex mx-auto text-gray-700 w-fit hover:text-blue-700 dark:text-gray-200 dark:hover:text-blue-400" href="https://mystmd.org/made-with-myst" target="_blank" rel="noreferrer"><svg style="width:24px;height:24px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" stroke="none"><g id="icon"><path fill="currentColor" d="M23.8,54.8v-3.6l4.7-0.8V17.5l-4.7-0.8V13H36l13.4,31.7h0.2l13-31.7h12.6v3.6l-4.7,0.8v32.9l4.7,0.8v3.6h-15
          v-3.6l4.9-0.8V20.8H65L51.4,53.3h-3.8l-14-32.5h-0.1l0.2,17.4v12.1l5,0.8v3.6H23.8z"></path><path fill="#F37726" d="M47,86.9c0-5.9-3.4-8.8-10.1-8.8h-8.4c-5.2,0-9.4-1.3-12.5-3.8c-3.1-2.5-5.4-6.2-6.8-11l4.8-1.6
          c1.8,5.6,6.4,8.6,13.8,8.8h9.2c6.4,0,10.8,2.5,13.1,7.5c2.3-5,6.7-7.5,13.1-7.5h8.4c7.8,0,12.7-2.9,14.6-8.7l4.8,1.6
          c-1.4,4.9-3.6,8.6-6.8,11.1c-3.1,2.5-7.3,3.7-12.4,3.8H63c-6.7,0-10,2.9-10,8.8"></path></g></svg><span class="self-center ml-2 text-sm">Made with MyST</span></a></div></div></div><main class="article-grid grid-gap"><article class="article-grid subgrid-gap col-screen article content"><div class="hidden"></div><div id="skip-to-frontmatter" aria-label="article frontmatter" class="mb-8 pt-9"><div class="flex items-center mb-5 h-6 text-sm font-light"><div class="flex-grow"></div><div class="relative flex inline-block mx-1 grow-0" data-headlessui-state=""><button class="relative ml-2 -mr-1" id="headlessui-menu-button-:Rs8u8p:" type="button" aria-haspopup="menu" aria-expanded="false" data-headlessui-state=""><span class="sr-only">Downloads</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.25rem" height="1.25rem"><title>Download</title><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"></path></svg></button></div></div><h1 class="mb-0">Type-Safe Agent Development with PydanticAI Patterns</h1><header class="mt-4 not-prose"><div class="grid grid-cols-1 sm:grid-cols-2 gap-y-1"><div><span class="font-semibold text-sm"><button class="focus:shadow-[0_0_0_2px] focus:shadow-black outline-none hover:underline" aria-label="Author Details" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R2t8u8p:" data-state="closed">Spencer Lyon</button><a class="ml-1" href="mailto:spencer.lyon@ucf.edu" title="Spencer Lyon &lt;spencer.lyon@ucf.edu&gt;" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1rem" height="1rem" class="inline-block text-gray-400 -translate-y-[0.1em] hover:text-blue-400"><path d="M21.8 18c0 1.1-.9 2-1.9 2H4.2c-1.1 0-1.9-.9-1.9-2V9.9c0-.5.3-.7.8-.4l7.8 4.7c.7.4 1.7.4 2.4 0L21 9.5c.4-.2.8-.1.8.4V18z"></path><path d="M21.8 6c0-1.1-.9-2-1.9-2H4.2c-1.1 0-2 .9-2 2v.4c0 .5.3 1.1.8 1.3l8.5 5.1c.2.1.7.1.9 0l8.6-5c.4-.3.8-.9.8-1.3-.1-.1-.1-.5 0-.5z"></path></svg></a><a class="ml-1" href="https://orcid.org/0009-0001-6461-885X" title="ORCID: 0009-0001-6461-885X" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1rem" height="1rem" class="inline-block text-gray-400 -translate-y-[0.1em] hover:text-[#A9C751]"><path d="M21.8 12c0 5.4-4.4 9.8-9.8 9.8S2.2 17.4 2.2 12 6.6 2.2 12 2.2s9.8 4.4 9.8 9.8zM8.2 5.8c-.4 0-.8.3-.8.8s.3.8.8.8.8-.4.8-.8-.3-.8-.8-.8zm2.3 9.6h1.2v-6h1.8c2.3 0 3.3 1.4 3.3 3s-1.5 3-3.3 3h-3v1.1H9V8.3H7.7v8.2h5.9c3.3 0 4.5-2.2 4.5-4.1s-1.2-4.1-4.3-4.1h-3.2l-.1 7.1z"></path></svg></a></span></div><div class="text-sm"><div>University of Central Florida<!-- --> </div><div>Valorum Data<!-- --> </div></div></div></header></div><div class="block my-10 lg:sticky lg:z-10 lg:h-0 lg:pt-0 lg:my-0 lg:ml-10 lg:col-margin-right" style="top:60px"><nav></nav></div><div id="skip-to-article"></div><div id="DJfQK0HkiA" class="relative group/block"><blockquote><p>Computational Analysis of Social Complexity</p><p>Fall 2025, Spencer Lyon</p></blockquote><p><strong>Prerequisites</strong></p><ul><li>Function calling concepts (L.A2.01)</li><li>Python type hints and type safety</li><li>Basic agent architectures</li></ul><p><strong>Outcomes</strong></p><ul><li>Understand type-safe agent development principles</li><li>Implement validation-first agent architectures with Pydantic</li><li>Apply dependency injection patterns for testable agents</li><li>Build production-ready AI agents with PydanticAI</li></ul><p><strong>References</strong></p><ul><li><a target="_blank" rel="noreferrer" href="https://ai.pydantic.dev/" class="">PydanticAI Documentation</a></li><li><a target="_blank" rel="noreferrer" href="https://docs.pydantic.dev/" class="">Pydantic Documentation</a></li><li><a target="_blank" rel="noreferrer" href="https://docs.python.org/3/library/typing.html" class="">Python Type Hints</a></li></ul></div><div id="hOG27DqdB6" class="relative group/block"><h2 id="why-type-safety-matters" class="relative group"><span class="heading-text">Why Type Safety Matters</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#why-type-safety-matters" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="arDLIz8n0s" class="relative group/block"><h3 id="the-problem-unvalidated-agent-systems" class="relative group"><span class="heading-text">The Problem: Unvalidated Agent Systems</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#the-problem-unvalidated-agent-systems" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><ul><li>Consider a simple agent that processes user queries and makes database updates</li><li>What could go wrong?<ul><li>Wrong data types passed to functions</li><li>Invalid values that violate business logic</li><li>Runtime errors deep in execution</li><li>Silent failures that corrupt data</li></ul></li><li>These bugs are <em>expensive</em> in production</li><li>Type safety catches entire classes of errors before they happen</li></ul></div><div id="urJvuPPadL" class="relative group/block"><h3 id="a-concrete-example" class="relative group"><span class="heading-text">A Concrete Example</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#a-concrete-example" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Suppose we’re building a research assistant agent that:</p><ol start="1"><li>Takes a research question</li><li>Searches academic databases</li><li>Returns structured citations</li></ol><p>Without type safety:</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Python - no validation
def search_papers(query, max_results, min_year):
    # What if query is None?
    # What if max_results is negative?
    # What if min_year is 99999?
    ...</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p>With type safety:</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Python with Pydantic
from pydantic import BaseModel, Field

class SearchRequest(BaseModel):
    query: str = Field(min_length=1, max_length=500)
    max_results: int = Field(ge=1, le=100)
    min_year: int = Field(ge=1900, le=2025)

def search_papers(request: SearchRequest):
    # Guaranteed valid inputs!
    ...</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div></div><div id="QTUCySHz2y" class="relative group/block"><h3 id="key-benefits" class="relative group"><span class="heading-text">Key Benefits</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#key-benefits" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p><strong>Fail Fast, Fail Loud</strong></p><ul><li>Invalid inputs rejected immediately</li><li>Clear error messages</li><li>No silent corruption</li></ul><p><strong>Self-Documenting Code</strong></p><ul><li>Types tell you what’s expected</li><li>IDE autocomplete and hints</li><li>Less need for comments</li></ul><p><strong>Refactoring Confidence</strong></p><ul><li>Change a type definition</li><li>Compiler/type checker finds all affected code</li><li>Safe to modify large systems</li></ul><p><strong>Testing Made Easier</strong></p><ul><li>Don’t need to test invalid types</li><li>Focus on business logic</li><li>Reduce test surface area</li></ul></div><div id="BAYMeVI5x5" class="relative group/block"><h2 id="the-pydanticai-philosophy" class="relative group"><span class="heading-text">The PydanticAI Philosophy</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#the-pydanticai-philosophy" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="ltde9ihQfd" class="relative group/block"><h3 id="what-is-pydanticai" class="relative group"><span class="heading-text">What is PydanticAI?</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#what-is-pydanticai" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><ul><li>PydanticAI is a Python framework for building production-ready AI agents</li><li>Created by the team behind Pydantic</li><li>Pydantic powers the OpenAI SDK, Anthropic SDK, FastAPI, and countless other production systems</li><li>Philosophy: <strong>validation-first development</strong></li></ul><p><strong>Why PydanticAI?</strong></p><ul><li>Type safety catches errors before runtime</li><li>Validation ensures data integrity</li><li>Production-ready patterns from day one</li><li>Seamless integration with Python’s type system</li><li>Used by major companies in production</li></ul></div><div id="ucRW3ikLB3" class="relative group/block"><h3 id="chefs-knife-and-cutting-board" class="relative group"><span class="heading-text">Chef’s Knife and Cutting Board</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#chefs-knife-and-cutting-board" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><ul><li>PydanticAI describes itself as providing a “chef’s knife and cutting board”</li><li>What does this mean?<ul><li><strong>NOT a framework</strong> with opinions about everything</li><li><strong>IS a toolkit</strong> with powerful, composable primitives</li><li>Simple tools that do one thing well</li><li>Combine them however you want</li></ul></li></ul><p><strong>Contrast with LangChain</strong>:</p><ul><li>LangChain: Full kitchen with every appliance<ul><li>Chains, memory, vector stores, callbacks, etc.</li><li>Complex abstractions</li><li>Steep learning curve</li><li>Hard to customize</li></ul></li><li>PydanticAI: Essential tools<ul><li>Agent, tools, structured outputs</li><li>Simple abstractions</li><li>Easy to understand</li><li>Flexible customization</li></ul></li></ul><p><strong>When to Use Which</strong>:</p><ul><li>Use PydanticAI when: building production systems, need type safety, want simplicity</li><li>Use LangChain when: rapid prototyping, need batteries-included features, okay with complexity</li></ul></div><div id="vG5JZUg5BP" class="relative group/block"><h3 id="core-principles" class="relative group"><span class="heading-text">Core Principles</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#core-principles" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p><strong>1. Type Safety First</strong></p><ul><li>All inputs validated before use</li><li>All outputs structured and validated</li><li>Catch errors at design time, not runtime</li></ul><p><strong>2. Validation Before Computation</strong></p><ul><li>Never process invalid data</li><li>Fail immediately with clear messages</li><li>Make invalid states unrepresentable</li></ul><p><strong>3. Dependency Injection</strong></p><ul><li>Agents don’t create their dependencies</li><li>Dependencies passed in at construction</li><li>Easy to test with mocks</li><li>Easy to swap implementations</li></ul><p><strong>4. Explicit Over Implicit</strong></p><ul><li>No magic global state</li><li>No hidden configuration</li><li>Everything visible in function signatures</li></ul><p><strong>5. Production Ready</strong></p><ul><li>Designed for real systems, not demos</li><li>Handles errors gracefully</li><li>Observability built-in</li><li>Performance matters</li></ul></div><div id="TSgzbPcdXD" class="relative group/block"><h2 id="core-agent-components" class="relative group"><span class="heading-text">Core Agent Components</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#core-agent-components" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="kLo59iWMRK" class="relative group/block"><h3 id="the-four-essential-pieces" class="relative group"><span class="heading-text">The Four Essential Pieces</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#the-four-essential-pieces" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Every PydanticAI agent has these components:</p><p><strong>1. Agent Definition</strong></p><ul><li>Specifies the LLM model to use</li><li>Defines system prompt</li><li>Registers available tools</li></ul><p><strong>2. Tool Functions</strong></p><ul><li>Functions the agent can call</li><li>Type-annotated parameters</li><li>Validated inputs and outputs</li></ul><p><strong>3. Structured Outputs</strong></p><ul><li>Define what the agent should return</li><li>Pydantic models for validation</li><li>Guaranteed schema compliance</li></ul><p><strong>4. Run Context (Dependencies)</strong></p><ul><li>External services (databases, APIs)</li><li>Configuration</li><li>State that flows through execution</li></ul><p>Let’s examine each in detail</p></div><div id="tt2JTjpHbq" class="relative group/block"><h3 id="id-1-agent-definition" class="relative group"><span class="heading-text">1. Agent Definition</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-1-agent-definition" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>In PydanticAI (Python):</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from pydantic_ai import Agent

agent = Agent(
    &#x27;anthropic:claude-haiku-4-5&#x27;,
    system_prompt=&quot;You are a helpful research assistant.&quot;,
)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p>Key aspects:</p><ul><li><strong>Model string</strong>: Specifies which LLM to use</li><li><strong>System prompt</strong>: Sets agent behavior and role</li><li><strong>Simple constructor</strong>: No complex configuration</li></ul></div><div id="VHhKzsXzWv" class="relative group/block"><h3 id="id-2-tool-functions" class="relative group"><span class="heading-text">2. Tool Functions</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-2-tool-functions" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Tools are functions the agent can call:</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from pydantic_ai import Agent

agent = Agent(&#x27;anthropic:claude-haiku-4-5&#x27;)

@agent.tool
def search_papers(
    query: str,
    max_results: int = 10
) -&gt; list[dict]:
    &quot;&quot;&quot;Search academic papers by query.&quot;&quot;&quot;
    # Implementation here
    return results</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p><strong>What happens</strong>:</p><ol start="1"><li>LLM sees tool name and docstring</li><li>LLM decides when to call it</li><li>Parameters are validated against type hints</li><li>Function executes</li><li>Return value validated</li><li>Result given back to LLM</li></ol><p><strong>Type safety at every step!</strong></p></div><div id="uEuzRVMvWO" class="relative group/block"><h3 id="id-3-structured-outputs" class="relative group"><span class="heading-text">3. Structured Outputs</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-3-structured-outputs" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Define exactly what you want back:</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from pydantic import BaseModel
from pydantic_ai import Agent

class Citation(BaseModel):
    title: str
    authors: list[str]
    year: int
    doi: str | None = None

class ResearchResult(BaseModel):
    summary: str
    citations: list[Citation]
    confidence: float

agent = Agent(
    &#x27;anthropic:claude-haiku-4-5&#x27;,
    result_type=ResearchResult
)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p><strong>Benefits</strong>:</p><ul><li>LLM must return this exact structure</li><li>Automatic validation</li><li>No parsing strings or JSON</li><li>IDE autocomplete on results</li></ul></div><div id="lVpobIiNvD" class="relative group/block"><h3 id="id-4-run-context-dependencies" class="relative group"><span class="heading-text">4. Run Context (Dependencies)</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-4-run-context-dependencies" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>The secret sauce for testability:</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from pydantic_ai import Agent, RunContext
from dataclasses import dataclass

@dataclass
class Dependencies:
    db: DatabaseClient
    api_key: str
    max_retries: int = 3

agent = Agent(
    &#x27;anthropic:claude-haiku-4-5&#x27;,
    deps_type=Dependencies
)

@agent.tool
def search_papers(
    ctx: RunContext[Dependencies],
    query: str
) -&gt; list[dict]:
    # Access dependencies via ctx.deps
    return ctx.deps.db.search(query)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p><strong>Why this matters</strong>:</p><ul><li>No global variables</li><li>Easy to inject mock dependencies for testing</li><li>Explicit about what each tool needs</li><li>Can have different deps for dev/prod</li></ul></div><div id="xlRfPTH9eQ" class="relative group/block"><h3 id="putting-it-all-together" class="relative group"><span class="heading-text">Putting It All Together</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#putting-it-all-together" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>A complete PydanticAI agent:</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from pydantic import BaseModel
from pydantic_ai import Agent, RunContext
from dataclasses import dataclass

# 1. Define dependencies
@dataclass
class ResearchDeps:
    db: DatabaseClient
    api_key: str

# 2. Define output structure
class Citation(BaseModel):
    title: str
    authors: list[str]
    year: int

class ResearchResult(BaseModel):
    summary: str
    citations: list[Citation]

# 3. Create agent
agent = Agent(
    &#x27;anthropic:claude-haiku-4-5&#x27;,
    deps_type=ResearchDeps,
    result_type=ResearchResult,
    system_prompt=&#x27;You are a research assistant.&#x27;
)

# 4. Register tools
@agent.tool
def search_papers(
    ctx: RunContext[ResearchDeps],
    query: str,
    max_results: int = 10
) -&gt; list[dict]:
    &quot;&quot;&quot;Search academic database.&quot;&quot;&quot;
    return ctx.deps.db.search(query, limit=max_results)

# 5. Run agent
async def run_research(question: str):
    deps = ResearchDeps(
        db=get_database(),
        api_key=get_api_key()
    )
    result = await agent.run(question, deps=deps)
    return result.data  # Guaranteed to be ResearchResult!</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div></div><div id="WN6V4Ocaew" class="relative group/block"><h2 id="building-a-research-assistant" class="relative group"><span class="heading-text">Building a Research Assistant</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#building-a-research-assistant" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="LXm1j0XK37" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from dotenv import load_dotenv
import nest_asyncio

load_dotenv()
nest_asyncio.apply()
</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="AYTszTl8ojVJ1c8wDZhn_" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="MPx75Mfegs" class="relative group/block"><h3 id="system-design" class="relative group"><span class="heading-text">System Design</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#system-design" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Let’s build a complete research assistant that demonstrates all the PydanticAI concepts we’ve learned:</p><p><strong>Features</strong>:</p><ul><li>Search academic papers by query</li><li>Get detailed paper information</li><li>Generate structured research summaries</li><li>Type-safe dependencies and outputs</li><li>Multiple tools working together</li></ul><p><strong>Architecture</strong>:</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-text" style="white-space:pre">User Query
    ↓
PydanticAI Agent (with system prompt)
    ↓
Tool Selection (agent decides which tools to use)
    ↓
Tool Execution (with validated inputs via RunContext)
    ↓
Result Synthesis (agent combines tool outputs)
    ↓
Structured Output (validated ResearchSummary)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p>This is a realistic pattern you’d use in production.</p></div><div id="ZVz6PtyqGO" class="relative group/block"><h3 id="step-1-define-output-structure" class="relative group"><span class="heading-text">Step 1: Define Output Structure</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#step-1-define-output-structure" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>First, define what we want the agent to return:</p></div><div id="cm2bPo9Wdl" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from pydantic import BaseModel, Field
from typing import Optional

class Paper(BaseModel):
    &quot;&quot;&quot;Academic paper with validated fields.&quot;&quot;&quot;
    title: str = Field(min_length=1)
    authors: list[str] = Field(min_length=1)
    year: int = Field(ge=1800, le=2025)
    abstract: str
    doi: Optional[str] = None

class ResearchSummary(BaseModel):
    &quot;&quot;&quot;Final research output with validation.&quot;&quot;&quot;
    query: str = Field(min_length=1)
    summary: str = Field(min_length=1, description=&quot;Natural language summary&quot;)
    key_papers: list[Paper] = Field(min_length=1, description=&quot;Most relevant papers found&quot;)
    confidence: float = Field(ge=0.0, le=1.0, description=&quot;Agent&#x27;s confidence in results&quot;)

    def _repr_html_(self) -&gt; str:
        &quot;&quot;&quot;Rich HTML display for Jupyter notebooks.&quot;&quot;&quot;
        papers_html = &quot;&quot;
        for i, paper in enumerate(self.key_papers, 1):
            authors = &quot;, &quot;.join(paper.authors)
            doi_link = f&#x27;&lt;a href=&quot;https://doi.org/{paper.doi}&quot; target=&quot;_blank&quot;&gt;DOI&lt;/a&gt;&#x27; if paper.doi else &quot;&quot;
            papers_html += f&quot;&quot;&quot;
            &lt;div style=&quot;margin: 10px 0; padding: 10px; background: #f8f9fa; border-left: 3px solid #007bff;&quot;&gt;
                &lt;strong&gt;{i}. {paper.title}&lt;/strong&gt; ({paper.year}) {doi_link}&lt;br&gt;
                &lt;em&gt;{authors}&lt;/em&gt;&lt;br&gt;
                &lt;small style=&quot;color: #666;&quot;&gt;{paper.abstract[:200]}...&lt;/small&gt;
            &lt;/div&gt;
            &quot;&quot;&quot;

        confidence_color = &quot;#28a745&quot; if self.confidence &gt;= 0.7 else &quot;#ffc107&quot; if self.confidence &gt;= 0.4 else &quot;#dc3545&quot;
        confidence_pct = f&quot;{self.confidence:.0%}&quot;

        return f&quot;&quot;&quot;
        &lt;div style=&quot;font-family: sans-serif; max-width: 800px;&quot;&gt;
            &lt;h3 style=&quot;color: #333; border-bottom: 2px solid #007bff; padding-bottom: 10px;&quot;&gt;
                📚 Research Results: &quot;{self.query}&quot;
            &lt;/h3&gt;
            &lt;div style=&quot;margin: 15px 0; padding: 15px; background: #e7f3ff; border-radius: 5px;&quot;&gt;
                &lt;strong&gt;Summary:&lt;/strong&gt;&lt;br&gt;
                {self.summary}
            &lt;/div&gt;
            &lt;div style=&quot;margin: 10px 0;&quot;&gt;
                &lt;strong&gt;Confidence:&lt;/strong&gt;
                &lt;span style=&quot;color: {confidence_color}; font-weight: bold;&quot;&gt;{confidence_pct}&lt;/span&gt;
            &lt;/div&gt;
            &lt;div style=&quot;margin-top: 20px;&quot;&gt;
                &lt;strong&gt;Key Papers ({len(self.key_papers)}):&lt;/strong&gt;
                {papers_html}
            &lt;/div&gt;
        &lt;/div&gt;
        &quot;&quot;&quot;

    def __str__(self) -&gt; str:
        &quot;&quot;&quot;Plain text representation.&quot;&quot;&quot;
        lines = [
            f&quot;Research Results: {self.query}&quot;,
            &quot;=&quot; * 60,
            f&quot;\nSummary:\n{self.summary}&quot;,
            f&quot;\nConfidence: {self.confidence:.0%}&quot;,
            f&quot;\nKey Papers ({len(self.key_papers)}):&quot;,
        ]

        for i, paper in enumerate(self.key_papers, 1):
            lines.append(f&quot;\n{i}. {paper.title} ({paper.year})&quot;)
            lines.append(f&quot;   Authors: {&#x27;, &#x27;.join(paper.authors)}&quot;)
            if paper.doi:
                lines.append(f&quot;   DOI: {paper.doi}&quot;)

        return &quot;\n&quot;.join(lines)

# Test that validation works
try:
    invalid = Paper(title=&quot;&quot;, authors=[], year=3000, abstract=&quot;test&quot;)
except Exception as e:
    print(f&quot;✓ Validation caught error: {type(e).__name__}&quot;)

valid = Paper(
    title=&quot;Attention Is All You Need&quot;,
    authors=[&quot;Vaswani et al.&quot;],
    year=2017,
    abstract=&quot;We propose the Transformer...&quot;
)
print(f&quot;✓ Valid paper created: {valid.title}&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="TcB76U_S2pb3YNomj1Lus" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system"><code><span>✓ Validation caught error: ValidationError
✓ Valid paper created: Attention Is All You Need
</span></code></pre></div></div></div><div id="H4rGMjip59" class="relative group/block"><h3 id="step-2-define-dependencies" class="relative group"><span class="heading-text">Step 2: Define Dependencies</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#step-2-define-dependencies" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Define external resources the agent needs:</p></div><div id="crwje8ORCB" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from dataclasses import dataclass

@dataclass
class ResearchDeps:
    &quot;&quot;&quot;Dependencies for the research agent.&quot;&quot;&quot;
    database_url: str
    api_key: str
    max_papers_per_search: int = 10

    def search_database(self, query: str, limit: int) -&gt; list[Paper]:
        &quot;&quot;&quot;Simulate database search (in production, would query real DB).&quot;&quot;&quot;
        print(f&quot;  🔍 Searching database for: &#x27;{query}&#x27; (limit: {limit})&quot;)

        # In production, this would be:
        # conn = connect(self.database_url, self.api_key)
        # results = conn.execute(search_query)
        # return [Paper(**row) for row in results]

        # For demo, return mock results
        return [
            Paper(
                title=&quot;Attention Is All You Need&quot;,
                authors=[&quot;Vaswani, A.&quot;, &quot;Shazeer, N.&quot;, &quot;Parmar, N.&quot;],
                year=2017,
                abstract=&quot;We propose a new simple network architecture, the Transformer...&quot;,
                doi=&quot;10.5555/3295222.3295349&quot;
            ),
            Paper(
                title=&quot;BERT: Pre-training of Deep Bidirectional Transformers&quot;,
                authors=[&quot;Devlin, J.&quot;, &quot;Chang, M.&quot;, &quot;Lee, K.&quot;],
                year=2019,
                abstract=&quot;We introduce BERT, a method for pre-training language representations...&quot;,
                doi=&quot;10.18653/v1/N19-1423&quot;
            ),
        ]

    def get_paper_by_id(self, paper_id: str) -&gt; Paper:
        &quot;&quot;&quot;Retrieve specific paper by ID.&quot;&quot;&quot;
        print(f&quot;  📄 Fetching paper: {paper_id}&quot;)
        return Paper(
            title=&quot;Example Paper&quot;,
            authors=[&quot;Author, A.&quot;],
            year=2023,
            abstract=&quot;This is an example paper abstract.&quot;
        )

# Create dependencies
deps = ResearchDeps(
    database_url=&quot;sqlite3:///papers.db&quot;,
    api_key=&quot;demo-api-key-12345&quot;,
    max_papers_per_search=5
)

print(&quot;✓ Dependencies configured&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="P-F2YoHSlB1B0kJXQPuv0" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system"><code><span>✓ Dependencies configured
</span></code></pre></div></div></div><div id="YH2BkcCwAp" class="relative group/block"><h3 id="step-3-create-agent-and-register-tools" class="relative group"><span class="heading-text">Step 3: Create Agent and Register Tools</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#step-3-create-agent-and-register-tools" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Now create the agent and give it tools:</p></div><div id="nk5WXbcosS" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from pydantic_ai import Agent, RunContext

# Create agent with system prompt and structured output
research_agent = Agent(
    &#x27;anthropic:claude-haiku-4-5&#x27;,
    deps_type=ResearchDeps,
    output_type=ResearchSummary,
    system_prompt=&quot;&quot;&quot;You are a helpful research assistant.

    When asked to research a topic:
    1. Search for relevant papers using the search_papers tool
    2. Analyze the results carefully
    3. Provide a clear summary with the most important papers
    4. Rate your confidence based on result quality and relevance

    Be thorough but concise. Focus on the most impactful papers.&quot;&quot;&quot;
)

# Register tool 1: Search for papers
@research_agent.tool
def search_papers(
    ctx: RunContext[ResearchDeps],
    query: str,
    max_results: int = 5
) -&gt; list[Paper]:
    &quot;&quot;&quot;
    Search for academic papers by query string.

    Args:
        query: Search query (keywords, topics, authors)
        max_results: Maximum number of papers to return (default 5)

    Returns:
        List of relevant papers
    &quot;&quot;&quot;
    # Access dependencies via ctx.deps
    limit = min(max_results, ctx.deps.max_papers_per_search)
    papers = ctx.deps.search_database(query, limit)
    return papers

# Register tool 2: Get specific paper details
@research_agent.tool
def get_paper_details(
    ctx: RunContext[ResearchDeps],
    paper_id: str
) -&gt; Paper:
    &quot;&quot;&quot;
    Get detailed information about a specific paper by its ID.

    Args:
        paper_id: Unique identifier for the paper

    Returns:
        Paper object with full details
    &quot;&quot;&quot;
    return ctx.deps.get_paper_by_id(paper_id)

print(&quot;✓ Agent created with 2 tools registered&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="6u2w4e9afBKaSNNOJSXAe" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system"><code><span>✓ Agent created with 2 tools registered
</span></code></pre></div></div></div><div id="d6ilPiZ7Uo" class="relative group/block"><h3 id="step-4-run-the-agent" class="relative group"><span class="heading-text">Step 4: Run the Agent</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#step-4-run-the-agent" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Execute the agent with a research query:</p></div><div id="JLPPbAJwBD" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">async def run_research(question: str):
    deps = ResearchDeps(
        database_url=&quot;sqlite3:///papers.db&quot;,
        api_key=&quot;demo-api-key-12345&quot;,
        max_papers_per_search=5
    )
    result = await research_agent.run(question, deps=deps)
    return result

research_result = await run_research(&quot;transformer architectures in NLP&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="FYNvFrDJuU0O6EHRQUghp" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system"><code><span>  🔍 Searching database for: &#x27;transformer architectures NLP natural language processing&#x27; (limit: 5)
  📄 Fetching paper: 10.5555/3295222.3295349
  🔍 Searching database for: &#x27;GPT language model transformer decoder architecture&#x27; (limit: 5)
  📄 Fetching paper: 10.18653/v1/N19-1423
  🔍 Searching database for: &#x27;vision transformer ViT multimodal transformers&#x27; (limit: 5)
</span></code></pre></div></div></div><div id="D8T4DwbNmx" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">research_result.all_messages()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="vjR4TV_fTG09MZc6qpQRD" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div class="font-mono text-sm whitespace-pre-wrap"><code><span>[ModelRequest(parts=[SystemPromptPart(content=&#x27;You are a helpful research assistant.\n\n    When asked to research a topic:\n    1. Search for relevant papers using the search_papers tool\n    2. Analyze the results carefully\n    3. Provide a clear summary with the most important papers\n    4. Rate your confidence based on result quality and relevance\n\n    Be thorough but concise. Focus on the most impactful papers.&#x27;, timestamp=datetime.datetime(2025, 11, 10, 18, 7, 38, 998062, tzinfo=datetime.timezone.utc)), UserPromptPart(content=&#x27;transformer architectures in NLP&#x27;, timestamp=datetime.datetime(2025, 11, 10, 18, 7, 38, 998067, tzinfo=datetime.timezone.utc))]),
 ModelResponse(parts=[ToolCallPart(tool_name=&#x27;search_papers&#x27;, args={&#x27;query&#x27;: &#x27;transformer architectures NLP natural language processing&#x27;, &#x27;max_results&#x27;: 10}, tool_call_id=&#x27;toolu_01HMYGCHHKepQbGLLnE77RTA&#x27;)], usage=RequestUsage(input_tokens=1265, output_tokens=64, details={&#x27;cache_creation_input_tokens&#x27;: 0, &#x27;cache_read_input_tokens&#x27;: 0, &#x27;input_tokens&#x27;: 1265, &#x27;output_tokens&#x27;: 64}), model_name=&#x27;claude-haiku-4-5-20251001&#x27;, timestamp=datetime.datetime(2025, 11, 10, 18, 7, 40, 151296, tzinfo=datetime.timezone.utc), provider_name=&#x27;anthropic&#x27;, provider_details={&#x27;finish_reason&#x27;: &#x27;tool_use&#x27;}, provider_response_id=&#x27;msg_01TXmSMSuieQVGRVVvCvrk7p&#x27;, finish_reason=&#x27;tool_call&#x27;),
 ModelRequest(parts=[ToolReturnPart(tool_name=&#x27;search_papers&#x27;, content=[Paper(title=&#x27;Attention Is All You Need&#x27;, authors=[&#x27;Vaswani, A.&#x27;, &#x27;Shazeer, N.&#x27;, &#x27;Parmar, N.&#x27;], year=2017, abstract=&#x27;We propose a new simple network architecture, the Transformer...&#x27;, doi=&#x27;10.5555/3295222.3295349&#x27;), Paper(title=&#x27;BERT: Pre-training of Deep Bidirectional Transformers&#x27;, authors=[&#x27;Devlin, J.&#x27;, &#x27;Chang, M.&#x27;, &#x27;Lee, K.&#x27;], year=2019, abstract=&#x27;We introduce BERT, a method for pre-training language representations...&#x27;, doi=&#x27;10.18653/v1/N19-1423&#x27;)], tool_call_id=&#x27;toolu_01HMYGCHHKepQbGLLnE77RTA&#x27;, timestamp=datetime.datetime(2025, 11, 10, 18, 7, 40, 152853, tzinfo=datetime.timezone.utc))]),
 ModelResponse(parts=[ToolCallPart(tool_name=&#x27;get_paper_details&#x27;, args={&#x27;paper_id&#x27;: &#x27;10.5555/3295222.3295349&#x27;}, tool_call_id=&#x27;toolu_01SAyghgAgQQioeXSeDLBg6S&#x27;), ToolCallPart(tool_name=&#x27;get_paper_details&#x27;, args={&#x27;paper_id&#x27;: &#x27;10.18653/v1/N19-1423&#x27;}, tool_call_id=&#x27;toolu_01CzRgpL8C2jHXem8UA7EXVW&#x27;), ToolCallPart(tool_name=&#x27;search_papers&#x27;, args={&#x27;query&#x27;: &#x27;GPT language model transformer decoder architecture&#x27;, &#x27;max_results&#x27;: 5}, tool_call_id=&#x27;toolu_01EHPzYsfa1VcN1numeKnka8&#x27;), ToolCallPart(tool_name=&#x27;search_papers&#x27;, args={&#x27;query&#x27;: &#x27;vision transformer ViT multimodal transformers&#x27;, &#x27;max_results&#x27;: 5}, tool_call_id=&#x27;toolu_016HLuY8zBwhBXVbogsVga69&#x27;)], usage=RequestUsage(input_tokens=1507, output_tokens=230, details={&#x27;cache_creation_input_tokens&#x27;: 0, &#x27;cache_read_input_tokens&#x27;: 0, &#x27;input_tokens&#x27;: 1507, &#x27;output_tokens&#x27;: 230}), model_name=&#x27;claude-haiku-4-5-20251001&#x27;, timestamp=datetime.datetime(2025, 11, 10, 18, 7, 41, 808031, tzinfo=datetime.timezone.utc), provider_name=&#x27;anthropic&#x27;, provider_details={&#x27;finish_reason&#x27;: &#x27;tool_use&#x27;}, provider_response_id=&#x27;msg_01KGv7g5ApDoCDnSenRMjfwW&#x27;, finish_reason=&#x27;tool_call&#x27;),
 ModelRequest(parts=[ToolReturnPart(tool_name=&#x27;get_paper_details&#x27;, content=Paper(title=&#x27;Example Paper&#x27;, authors=[&#x27;Author, A.&#x27;], year=2023, abstract=&#x27;This is an example paper abstract.&#x27;, doi=None), tool_call_id=&#x27;toolu_01SAyghgAgQQioeXSeDLBg6S&#x27;, timestamp=datetime.datetime(2025, 11, 10, 18, 7, 41, 810833, tzinfo=datetime.timezone.utc)), ToolReturnPart(tool_name=&#x27;get_paper_details&#x27;, content=Paper(title=&#x27;Example Paper&#x27;, authors=[&#x27;Author, A.&#x27;], year=2023, abstract=&#x27;This is an example paper abstract.&#x27;, doi=None), tool_call_id=&#x27;toolu_01CzRgpL8C2jHXem8UA7EXVW&#x27;, timestamp=datetime.datetime(2025, 11, 10, 18, 7, 41, 810881, tzinfo=datetime.timezone.utc)), ToolReturnPart(tool_name=&#x27;search_papers&#x27;, content=[Paper(title=&#x27;Attention Is All You Need&#x27;, authors=[&#x27;Vaswani, A.&#x27;, &#x27;Shazeer, N.&#x27;, &#x27;Parmar, N.&#x27;], year=2017, abstract=&#x27;We propose a new simple network architecture, the Transformer...&#x27;, doi=&#x27;10.5555/3295222.3295349&#x27;), Paper(title=&#x27;BERT: Pre-training of Deep Bidirectional Transformers&#x27;, authors=[&#x27;Devlin, J.&#x27;, &#x27;Chang, M.&#x27;, &#x27;Lee, K.&#x27;], year=2019, abstract=&#x27;We introduce BERT, a method for pre-training language representations...&#x27;, doi=&#x27;10.18653/v1/N19-1423&#x27;)], tool_call_id=&#x27;toolu_01EHPzYsfa1VcN1numeKnka8&#x27;, timestamp=datetime.datetime(2025, 11, 10, 18, 7, 41, 810865, tzinfo=datetime.timezone.utc)), ToolReturnPart(tool_name=&#x27;search_papers&#x27;, content=[Paper(title=&#x27;Attention Is All You Need&#x27;, authors=[&#x27;Vaswani, A.&#x27;, &#x27;Shazeer, N.&#x27;, &#x27;Parmar, N.&#x27;], year=2017, abstract=&#x27;We propose a new simple network architecture, the Transformer...&#x27;, doi=&#x27;10.5555/3295222.3295349&#x27;), Paper(title=&#x27;BERT: Pre-training of Deep Bidirectional Transformers&#x27;, authors=[&#x27;Devlin, J.&#x27;, &#x27;Chang, M.&#x27;, &#x27;Lee, K.&#x27;], year=2019, abstract=&#x27;We introduce BERT, a method for pre-training language representations...&#x27;, doi=&#x27;10.18653/v1/N19-1423&#x27;)], tool_call_id=&#x27;toolu_016HLuY8zBwhBXVbogsVga69&#x27;, timestamp=datetime.datetime(2025, 11, 10, 18, 7, 41, 810899, tzinfo=datetime.timezone.utc))]),
 ModelResponse(parts=[ToolCallPart(tool_name=&#x27;final_result&#x27;, args={&#x27;query&#x27;: &#x27;transformer architectures in NLP&#x27;, &#x27;summary&#x27;: &quot;Transformer architectures have become the foundation of modern natural language processing. The key innovation was the introduction of the self-attention mechanism, which allows models to process entire sequences in parallel and capture long-range dependencies effectively. The original Transformer architecture (Vaswani et al., 2017) proposed the encoder-decoder structure with multi-head self-attention and feed-forward networks. This was followed by influential pre-trained models like BERT (Devlin et al., 2019), which introduced bidirectional pre-training for language understanding. Transformer-based models have revolutionized NLP across diverse tasks including machine translation, question answering, sentiment analysis, and text generation. The architecture&#x27;s parallelization capabilities and effectiveness in capturing semantic relationships have made it the dominant paradigm in both research and industry applications.&quot;, &#x27;key_papers&#x27;: [{&#x27;title&#x27;: &#x27;Attention Is All You Need&#x27;, &#x27;authors&#x27;: [&#x27;Vaswani, A.&#x27;, &#x27;Shazeer, N.&#x27;, &#x27;Parmar, N.&#x27;], &#x27;year&#x27;: 2017, &#x27;abstract&#x27;: &#x27;We propose a new simple network architecture, the Transformer, based solely on attention mechanisms, dispensing with recurrence and convolutions entirely. The Transformer achieves new state-of-the-art BLEU scores on WMT 2014 English-to-German and English-to-French translation tasks. This work introduces multi-head self-attention, enabling parallel processing and effective capture of long-range dependencies in sequences.&#x27;, &#x27;doi&#x27;: &#x27;10.5555/3295222.3295349&#x27;}, {&#x27;title&#x27;: &#x27;BERT: Pre-training of Deep Bidirectional Transformers for Language Understanding&#x27;, &#x27;authors&#x27;: [&#x27;Devlin, J.&#x27;, &#x27;Chang, M.&#x27;, &#x27;Lee, K.&#x27;], &#x27;year&#x27;: 2019, &#x27;abstract&#x27;: &#x27;We introduce BERT, a method for pre-training language representations using masked language modeling and next sentence prediction on large unlabeled text corpora. BERT achieves state-of-the-art results on a wide range of NLP tasks through fine-tuning, demonstrating the power of bidirectional pre-trained representations.&#x27;, &#x27;doi&#x27;: &#x27;10.18653/v1/N19-1423&#x27;}], &#x27;confidence&#x27;: 0.75}, tool_call_id=&#x27;toolu_01WbAZFPb3WusK49Gkv7A2U6&#x27;)], usage=RequestUsage(input_tokens=2237, output_tokens=600, details={&#x27;cache_creation_input_tokens&#x27;: 0, &#x27;cache_read_input_tokens&#x27;: 0, &#x27;input_tokens&#x27;: 2237, &#x27;output_tokens&#x27;: 600}), model_name=&#x27;claude-haiku-4-5-20251001&#x27;, timestamp=datetime.datetime(2025, 11, 10, 18, 7, 46, 698547, tzinfo=datetime.timezone.utc), provider_name=&#x27;anthropic&#x27;, provider_details={&#x27;finish_reason&#x27;: &#x27;tool_use&#x27;}, provider_response_id=&#x27;msg_01Ub7dhxfuQEKChRtd5zP8Vg&#x27;, finish_reason=&#x27;tool_call&#x27;),
 ModelRequest(parts=[ToolReturnPart(tool_name=&#x27;final_result&#x27;, content=&#x27;Final result processed.&#x27;, tool_call_id=&#x27;toolu_01WbAZFPb3WusK49Gkv7A2U6&#x27;, timestamp=datetime.datetime(2025, 11, 10, 18, 7, 46, 699638, tzinfo=datetime.timezone.utc))])]</span></code></div></div></div><div id="vSbnh3bRo2" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">research_result.output</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="eKzWPOwmJhGBfzF_9ynyW" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="lAbeETz2If" class="relative group/block"><h3 id="what-just-happened" class="relative group"><span class="heading-text">What Just Happened?</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#what-just-happened" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Let’s break down the agent execution:</p><p><strong>1. Agent Received Query</strong></p><ul><li>User asked: “transformer architectures in NLP”</li><li>Agent has access to: search_papers and get_paper_details tools</li></ul><p><strong>2. Agent Made Decisions</strong></p><ul><li>LLM analyzed the query</li><li>Decided to call <code>search_papers(&quot;transformer architectures in NLP&quot;, max_results=5)</code></li><li>PydanticAI validated the parameters</li><li>Tool executed with access to deps via RunContext</li></ul><p><strong>3. Tool Returned Validated Data</strong></p><ul><li>Tool returned <code>list[Paper]</code> (type-checked)</li><li>Each Paper object validated by Pydantic</li><li>Agent received the results</li></ul><p><strong>4. Agent Synthesized Response</strong></p><ul><li>LLM analyzed the papers</li><li>Generated natural language summary</li><li>Selected key papers</li><li>Assigned confidence score</li><li>Returned ResearchSummary (validated!)</li></ul><p><strong>5. Type Safety Throughout</strong></p><ul><li>Every input validated before execution</li><li>Every output validated before return</li><li>Impossible to get wrong types</li><li>Clear errors if validation fails</li></ul><p>This is the power of type-safe agent development!</p></div><div id="lwjZLV7K33" class="relative group/block"><h3 id="exercise-add-a-new-tool" class="relative group"><span class="heading-text">Exercise: Add a New Tool</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#exercise-add-a-new-tool" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Add a <code>compare_papers</code> tool that takes two paper titles and returns a comparison.</p><p><strong>Requirements</strong>:</p><ol start="1"><li>Use <code>@research_agent.tool</code> decorator</li><li>Accept <code>RunContext[ResearchDeps]</code> as first parameter</li><li>Take two paper titles as strings</li><li>Return a string with the comparison</li><li>Use proper docstring (the agent sees this!)</li></ol><p><strong>Hint</strong>: The agent will automatically see this new tool and can call it!</p></div><div id="MYCkrDvJ9f" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">@research_agent.tool
def compare_papers(
    ctx: RunContext[ResearchDeps],
    paper1_title: str,
    paper2_title: str
) -&gt; str:
    &quot;&quot;&quot;
    Compare two papers by their titles.

    Args:
        paper1_title: Title of first paper
        paper2_title: Title of second paper

    Returns:
        Comparison summary
    &quot;&quot;&quot;
    # TODO: Implement comparison logic
    # In production, would search for both papers and compare:
    # - Publication dates
    # - Citation counts
    # - Research methods
    # - Key contributions

    return f&quot;Comparison between &#x27;{paper1_title}&#x27; and &#x27;{paper2_title}&#x27;: [TODO: implement]&quot;</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="9ffpLhsciEtu0brzP0rxO" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="UwcakAZcUX" class="relative group/block"><h3 id="advanced-dynamic-system-prompts" class="relative group"><span class="heading-text">Advanced: Dynamic System Prompts</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#advanced-dynamic-system-prompts" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>You can also generate system prompts dynamically based on context:</p></div><div id="g5El8HkHgV" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from pydantic_ai import RunContext

# Create agent without static system prompt
adaptive_agent = Agent(
    &#x27;anthropic:claude-haiku-4-5&#x27;,
    deps_type=ResearchDeps,
    output_type=ResearchSummary
)

# Dynamic system prompt based on context
@adaptive_agent.system_prompt(dynamic=True)
def get_system_prompt(ctx: RunContext[ResearchDeps]) -&gt; str:
    &quot;&quot;&quot;Generate system prompt based on current context.&quot;&quot;&quot;
    max_papers = ctx.deps.max_papers_per_search

    return f&quot;&quot;&quot;You are a research assistant with access to {max_papers} papers per search.

Focus on quality over quantity. When analyzing papers:
- Prioritize recent publications (last 5 years)
- Look for highly-cited works
- Consider methodological rigor
- Provide balanced summaries

Your database: {ctx.deps.database_url}
    &quot;&quot;&quot;

print(&quot;✓ Adaptive agent created with dynamic system prompt&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="rzpQ1x-5YxIHtFm-tvlIf" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system"><code><span>✓ Adaptive agent created with dynamic system prompt
</span></code></pre></div></div></div><div id="k3wOEaHc9t" class="relative group/block"><h3 id="why-this-pattern-scales" class="relative group"><span class="heading-text">Why This Pattern Scales</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#why-this-pattern-scales" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>This agent architecture works for production systems because:</p><p><strong>1. Type Safety</strong></p><ul><li>Catch errors at development time</li><li>Invalid data rejected before processing</li><li>Clear validation errors guide debugging</li></ul><p><strong>2. Separation of Concerns</strong></p><ul><li>Agent logic separate from business logic</li><li>Dependencies injected, not hard-coded</li><li>Easy to test each component independently</li></ul><p><strong>3. Composability</strong></p><ul><li>Tools are just Python functions</li><li>Add new capabilities by adding new tools</li><li>Mix and match tools for different agents</li></ul><p><strong>4. Observability</strong></p><ul><li>Every tool call is logged</li><li>Clear execution trace</li><li>Easy to monitor and debug</li></ul><p><strong>5. Maintainability</strong></p><ul><li>Simple, readable code</li><li>Standard Python patterns</li><li>Type hints document the code</li></ul><p>This is how you build AI agents that last!</p></div><div id="rgSUiWWWvm" class="relative group/block"><h3 id="key-takeaways" class="relative group"><span class="heading-text">Key Takeaways</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#key-takeaways" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p><strong>Type Safety Prevents Errors</strong></p><ul><li>Validate data at construction time</li><li>Invalid states become unrepresentable</li><li>Clear error messages guide debugging</li><li>Catch bugs before they reach production</li></ul><p><strong>PydanticAI Core Concepts</strong></p><ol start="1"><li><strong>Pydantic Models</strong> - Define validated data structures</li><li><strong>Agent</strong> - Coordinates LLM and tools</li><li><strong><span class="text-yellow-600" title="Citation Not Found"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1rem" height="1rem" class="inline mr-1"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"></path></svg>agent.tool</span></strong> - Register functions as tools</li><li><strong>RunContext[DepsType]</strong> - Inject dependencies safely</li><li><strong>result_type</strong> - Guarantee output structure</li></ol><p><strong>Production-Ready Pattern</strong></p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># 1. Define structures
class Output(BaseModel): ...
class Deps: ...

# 2. Create agent
agent = Agent(model, deps_type=Deps, result_type=Output)

# 3. Register tools
@agent.tool
def my_tool(ctx: RunContext[Deps], arg: str): ...

# 4. Run
result = await agent.run(query, deps=deps)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p><strong>Why This Works</strong></p><ul><li>Simple, composable primitives</li><li>Type safety throughout</li><li>Easy to test and maintain</li><li>Scales to complex systems</li></ul></div><div id="GZB0RvF6gR" class="relative group/block"><h3 id="quick-reference" class="relative group"><span class="heading-text">Quick Reference</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#quick-reference" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p><strong>Pydantic Validation</strong>:</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from pydantic import BaseModel, Field

class MyModel(BaseModel):
    name: str = Field(min_length=1)
    count: int = Field(ge=0, le=100)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p><strong>Agent Creation</strong>:</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from pydantic_ai import Agent

agent = Agent(
    &#x27;anthropic:claude-haiku-4-5&#x27;,
    deps_type=MyDeps,
    result_type=MyOutput,
    system_prompt=&quot;...&quot;
)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p><strong>Tool Registration</strong>:</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">@agent.tool
def my_tool(
    ctx: RunContext[MyDeps],
    arg: str
) -&gt; MyType:
    &quot;&quot;&quot;Docstring that LLM sees.&quot;&quot;&quot;
    return ctx.deps.some_method(arg)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p><strong>Dynamic System Prompt</strong>:</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">@agent.system_prompt
def get_prompt(ctx: RunContext[MyDeps]) -&gt; str:
    return f&quot;Context: {ctx.deps.value}&quot;</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p><strong>Running Agent</strong>:</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Async
result = await agent.run(query, deps=my_deps)
output: MyOutput = result.data

# Streaming
async with agent.run_stream(query, deps=my_deps) as response:
    async for chunk in response.stream_text():
        print(chunk, end=&#x27;&#x27;)
    final = await response.get_data()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div></div><div id="JWzbPvPpnH" class="relative group/block"><h3 id="next-steps" class="relative group"><span class="heading-text">Next Steps</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#next-steps" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p><strong>In L.A2.03: Agent Frameworks Comparison</strong>, we’ll:</p><ul><li>Compare different agent frameworks (PydanticAI, LangChain, CrewAI)</li><li>Understand architectural trade-offs</li><li>Learn when to use each approach</li><li>See the same task implemented multiple ways</li></ul><p><strong>In Week A03: Multi-Agent Systems</strong>, we’ll:</p><ul><li>Build agent swarms with collective intelligence</li><li>Apply game theory to AI agent interactions</li><li>Create digital twins with agent-based models</li><li>Scale from single agents to agent ecosystems</li></ul><p><strong>Practice Ideas</strong>:</p><ol start="1"><li>Add more tools to the research agent (filter by year, compare citations)</li><li>Build an agent for a different domain (finance, healthcare, education)</li><li>Implement streaming responses for better UX</li><li>Add error handling and retry logic</li><li>Create a simple web UI with FastAPI</li></ol></div><div id="iU1WTu9vUc" class="relative group/block"><h3 id="further-reading" class="relative group"><span class="heading-text">Further Reading</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#further-reading" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p><strong>PydanticAI Documentation</strong>:</p><ul><li><a target="_blank" rel="noreferrer" href="https://ai.pydantic.dev/" class="">Getting Started</a></li><li><a target="_blank" rel="noreferrer" href="https://ai.pydantic.dev/agents/" class="">Agents Guide</a></li><li><a target="_blank" rel="noreferrer" href="https://ai.pydantic.dev/tools/" class="">Tools Documentation</a></li><li><a target="_blank" rel="noreferrer" href="https://ai.pydantic.dev/dependencies/" class="">Dependencies</a></li><li><a target="_blank" rel="noreferrer" href="https://ai.pydantic.dev/examples/" class="">Examples</a></li></ul><p><strong>Pydantic Core</strong>:</p><ul><li><a target="_blank" rel="noreferrer" href="https://docs.pydantic.dev/" class="">Pydantic V2</a></li><li><a target="_blank" rel="noreferrer" href="https://docs.pydantic.dev/latest/concepts/fields/" class="">Field Validation</a></li><li><a target="_blank" rel="noreferrer" href="https://docs.pydantic.dev/latest/concepts/models/" class="">Models</a></li></ul><p><strong>Python Type System</strong>:</p><ul><li><a target="_blank" rel="noreferrer" href="https://docs.python.org/3/library/typing.html" class="">Type Hints</a></li><li><a target="_blank" rel="noreferrer" href="https://peps.python.org/pep-0544/" class="">Protocols</a></li><li><a target="_blank" rel="noreferrer" href="https://docs.python.org/3/library/typing.html#generics" class="">Generics</a></li></ul><p><strong>Production Topics</strong> (for later):</p><ul><li>Testing with pytest</li><li>Monitoring with Logfire</li><li>Deployment patterns</li><li>Cost optimization</li></ul></div><div></div><div class="flex pt-10 mb-10 space-x-4"><a class="flex-1 block p-4 font-normal text-gray-600 no-underline border border-gray-200 rounded shadow-sm group hover:border-blue-600 dark:hover:border-blue-400 hover:text-blue-600 dark:hover:text-blue-400 dark:text-gray-100 dark:border-gray-500 hover:shadow-lg dark:shadow-neutral-700" href="/l-a2-01-function-calling-and-tools"><div class="flex h-full align-middle"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.5rem" height="1.5rem" class="self-center transition-transform group-hover:-translate-x-1 shrink-0"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"></path></svg><div class="flex-grow text-right"><div class="text-xs text-gray-500 dark:text-gray-400">Agents 2</div>Function Calling and Tool Use: From Talk to Action</div></div></a><a class="flex-1 block p-4 font-normal text-gray-600 no-underline border border-gray-200 rounded shadow-sm group hover:border-blue-600 dark:hover:border-blue-400 hover:text-blue-600 dark:hover:text-blue-400 dark:text-gray-100 dark:border-gray-500 hover:shadow-lg dark:shadow-neutral-700" href="/l-a02-03-evaluations"><div class="flex h-full align-middle"><div class="flex-grow"><div class="text-xs text-gray-500 dark:text-gray-400">Agents 2</div>Evaluating AI Systems: Testing Agents at Scale</div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.5rem" height="1.5rem" class="self-center transition-transform group-hover:translate-x-1 shrink-0"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"></path></svg></div></a></div></article></main><script>((a,d)=>{if(!window.history.state||!window.history.state.key){let h=Math.random().toString(32).slice(2);window.history.replaceState({key:h},"")}try{let f=JSON.parse(sessionStorage.getItem(a)||"{}")[d||window.history.state.key];typeof f=="number"&&window.scrollTo(0,f)}catch(h){console.error(h),sessionStorage.removeItem(a)}})("positions", null)</script><link rel="modulepreload" href="/build/entry.client-UNPC4GT3.js"/><link rel="modulepreload" href="/build/_shared/chunk-OCTKKCIL.js"/><link rel="modulepreload" href="/build/_shared/chunk-UAI5KRM7.js"/><link rel="modulepreload" href="/build/_shared/chunk-2NH4LW52.js"/><link rel="modulepreload" href="/build/_shared/chunk-N2N6M3QH.js"/><link rel="modulepreload" href="/build/_shared/chunk-HBJK6BW3.js"/><link rel="modulepreload" href="/build/_shared/chunk-HYMQ7M2K.js"/><link rel="modulepreload" href="/build/_shared/chunk-OHOXABTA.js"/><link rel="modulepreload" href="/build/_shared/chunk-OCWQY3HK.js"/><link rel="modulepreload" href="/build/_shared/chunk-CPTH56EW.js"/><link rel="modulepreload" href="/build/_shared/chunk-3CVK3PYF.js"/><link rel="modulepreload" href="/build/_shared/chunk-J6FHCSRC.js"/><link rel="modulepreload" href="/build/_shared/chunk-S4SWV34C.js"/><link rel="modulepreload" href="/build/_shared/chunk-GUCIBHGO.js"/><link rel="modulepreload" href="/build/root-ZJZ4LRPY.js"/><link rel="modulepreload" href="/build/_shared/chunk-KGDL62ZF.js"/><link rel="modulepreload" href="/build/routes/$-23AHH5XS.js"/><script>window.__remixContext = {"url":"/l-a2-02-type-safe-agents-pydantic-patterns","state":{"loaderData":{"root":{"config":{"version":2,"myst":"1.6.0","options":{"hide_toc":false,"favicon":"/build/favicon-2547b7788b87f81b44ad3bc88b3d2a8b.ico","logo":"/build/logo-fdb88c5958d943ce34b840a833724994.png","logo_dark":"/build/logo-dark-68957f97f434b89940d35537897dfb8c.png"},"nav":[],"actions":[],"projects":[{"title":"UCF CAP-6318","description":"Computational Analysis of Social Complexity","authors":[{"nameParsed":{"literal":"Spencer Lyon","given":"Spencer","family":"Lyon"},"name":"Spencer Lyon","orcid":"0009-0001-6461-885X","email":"spencer.lyon@ucf.edu","affiliations":["University of Central Florida","Valorum Data"],"id":"contributors-myst-generated-uid-0","corresponding":true}],"affiliations":[{"id":"University of Central Florida","name":"University of Central Florida"},{"id":"Valorum Data","name":"Valorum Data"}],"id":"492c0fd0-6de5-4738-b5ab-8c08e34fb954","toc":[{"file":"week01/L01.01_welcome.ipynb"},{"children":[{"file":"week01/L01.02_setup.ipynb"},{"file":"week01/L01.03_julia_basics.ipynb"}],"title":"Julia 1"},{"children":[{"file":"week02/L02.01_julia_types_methods.ipynb"},{"file":"week02/L02.02_code_organization.ipynb"},{"file":"week02/L02.03_julia_packages.ipynb"}],"title":"Julia 2"},{"children":[{"file":"week03/L03.01_graphs.ipynb"},{"file":"week03/L03.02_strong_weak_ties.ipynb"}],"title":"Graph Theory 1"},{"children":[{"file":"week04/L04.01_homophily.ipynb"},{"file":"week04/L04.02_weighted_graphs.ipynb"},{"file":"week04/L04.03_structural_balance.ipynb"}],"title":"Graph Theory 2"},{"children":[{"file":"week05/L05.01_production_networks.ipynb"}],"title":"Production Networks"},{"children":[{"file":"week06/L06.01_abm_concepts.ipynb"},{"file":"week06/L06.02_schelling_agents.ipynb"}],"title":"ABM 1"},{"children":[{"file":"week07/L07.01_abm_money.ipynb"},{"file":"week07/L07.02_abm_paper_virality.ipynb"}],"title":"ABM 2"},{"children":[{"file":"week08/L08.01_game_theory_intro.ipynb"},{"file":"week08/L08.02_network_traffic.ipynb"}],"title":"Game Theory 1"},{"children":[{"file":"week09/L09.01_mixed_strategies.ipynb"},{"file":"week09/L09.03_auctions.ipynb"},{"file":"week09/L09.04_game_theory_lab.ipynb"}],"title":"Game Theory 2"},{"children":[{"file":"weekA01/L.A1.01_from_rule_based_to_learning_agents.ipynb"},{"file":"weekA01/L.A1.02_rag_pattern_augmented_knowledge.ipynb"},{"file":"weekA01/L.A1.03_multi_agent_conversations.ipynb"}],"title":"Agents 1"},{"children":[{"file":"weekA02/L.A2.01_function_calling_and_tools.ipynb"},{"file":"weekA02/L.A2.02_type_safe_agents_pydantic_patterns.ipynb"},{"file":"weekA02/L.A02.03_evaluations.ipynb"}],"title":"Agents 2"}],"exports":[],"bibliography":[],"index":"index","pages":[{"level":1,"title":"Julia 1"},{"slug":"l01-02-setup","title":"Julia Setup","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l01-03-julia-basics","title":"Julia Foundations","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Julia 2"},{"slug":"l02-01-julia-types-methods","title":"Julia Types and Methods","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l02-02-code-organization","title":"Julia Code Organization","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l02-03-julia-packages","title":"Julia Package Development","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Graph Theory 1"},{"slug":"l03-01-graphs","title":"Graphs","description":"","date":"","thumbnail":"/build/967a40bb8f52cb4e2ba5e92214773160.png","thumbnailOptimized":"/build/967a40bb8f52cb4e2ba5e92214773160.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l03-02-strong-weak-ties","title":"Strong and Weak Ties","description":"","date":"","thumbnail":"/build/ca8cf7fd449d95329a6482e7c5663568.png","thumbnailOptimized":"/build/ca8cf7fd449d95329a6482e7c5663568.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Graph Theory 2"},{"slug":"l04-01-homophily","title":"Homophily","description":"","date":"","thumbnail":"/build/c2d78afac7a8f5c0a921d74dc173a647.png","thumbnailOptimized":"/build/c2d78afac7a8f5c0a921d74dc173a647.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l04-02-weighted-graphs","title":"Weighted Graphs","description":"","date":"","thumbnail":"/build/89abe19f81fbf303bd67dbdff22715f2.png","thumbnailOptimized":"/build/89abe19f81fbf303bd67dbdff22715f2.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l04-03-structural-balance","title":"Structural Balance","description":"","date":"","thumbnail":"/build/e8165665e7da5ff6c9050aa529f882e5.png","thumbnailOptimized":"/build/e8165665e7da5ff6c9050aa529f882e5.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Production Networks"},{"slug":"l05-01-production-networks","title":"Production Networks","description":"","date":"","thumbnail":"/build/7b92ed8d684202cdc6a3ee91cdc9e32b.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"ABM 1"},{"slug":"l06-01-abm-concepts","title":"Agent Based Models","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l06-02-schelling-agents","title":"Schelling Model with Agents.jl","description":"","date":"","thumbnail":"/build/df6a6b05f3de1e22494ef3ccc0e47c9f.png","thumbnailOptimized":"/build/df6a6b05f3de1e22494ef3ccc0e47c9f.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"ABM 2"},{"slug":"l07-01-abm-money","title":"Agent Based Models Review/Practice","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l07-02-abm-paper-virality","title":"Academic Paper Virality: An Agent-Based Model","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Game Theory 1"},{"slug":"l08-01-game-theory-intro","title":"Game Theory 1","description":"","date":"","thumbnail":"/build/514111f16ff750b99f83913e8f7cef48.png","thumbnailOptimized":"/build/514111f16ff750b99f83913e8f7cef48.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l08-02-network-traffic","title":"Network Traffic with Game Theory","description":"","date":"","thumbnail":"/build/424d6f26a2e0b40ca12376f2698b2418.png","thumbnailOptimized":"/build/424d6f26a2e0b40ca12376f2698b2418.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Game Theory 2"},{"slug":"l09-01-mixed-strategies","title":"More Game Theory","description":"","date":"","thumbnail":"/build/c78b1360cc127c6ff833e0a98f9de844.png","thumbnailOptimized":"/build/c78b1360cc127c6ff833e0a98f9de844.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l09-03-auctions","title":"Auctions","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l09-04-game-theory-lab","title":"Game Theory Lab: Data Science Applications","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Agents 1"},{"slug":"l-a1-01-from-rule-based-to-learning-agents","title":"From Rule-Based to Learning Agents","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l-a1-02-rag-pattern-augmented-knowledge","title":"Retrieval-Augmented Generation: Augmenting AI with External Knowledge","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l-a1-03-multi-agent-conversations","title":"Multi-Agent Conversations and Emergent Collaboration","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Agents 2"},{"slug":"l-a2-01-function-calling-and-tools","title":"Function Calling and Tool Use: From Talk to Action","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l-a2-02-type-safe-agents-pydantic-patterns","title":"Type-Safe Agent Development with PydanticAI Patterns","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l-a02-03-evaluations","title":"Evaluating AI Systems: Testing Agents at Scale","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2}]}]},"CONTENT_CDN_PORT":"3100","MODE":"static"},"routes/$":{"config":{"version":2,"myst":"1.6.0","options":{"hide_toc":false,"favicon":"/build/favicon-2547b7788b87f81b44ad3bc88b3d2a8b.ico","logo":"/build/logo-fdb88c5958d943ce34b840a833724994.png","logo_dark":"/build/logo-dark-68957f97f434b89940d35537897dfb8c.png"},"nav":[],"actions":[],"projects":[{"title":"UCF CAP-6318","description":"Computational Analysis of Social Complexity","authors":[{"nameParsed":{"literal":"Spencer Lyon","given":"Spencer","family":"Lyon"},"name":"Spencer Lyon","orcid":"0009-0001-6461-885X","email":"spencer.lyon@ucf.edu","affiliations":["University of Central Florida","Valorum Data"],"id":"contributors-myst-generated-uid-0","corresponding":true}],"affiliations":[{"id":"University of Central Florida","name":"University of Central Florida"},{"id":"Valorum Data","name":"Valorum Data"}],"id":"492c0fd0-6de5-4738-b5ab-8c08e34fb954","toc":[{"file":"week01/L01.01_welcome.ipynb"},{"children":[{"file":"week01/L01.02_setup.ipynb"},{"file":"week01/L01.03_julia_basics.ipynb"}],"title":"Julia 1"},{"children":[{"file":"week02/L02.01_julia_types_methods.ipynb"},{"file":"week02/L02.02_code_organization.ipynb"},{"file":"week02/L02.03_julia_packages.ipynb"}],"title":"Julia 2"},{"children":[{"file":"week03/L03.01_graphs.ipynb"},{"file":"week03/L03.02_strong_weak_ties.ipynb"}],"title":"Graph Theory 1"},{"children":[{"file":"week04/L04.01_homophily.ipynb"},{"file":"week04/L04.02_weighted_graphs.ipynb"},{"file":"week04/L04.03_structural_balance.ipynb"}],"title":"Graph Theory 2"},{"children":[{"file":"week05/L05.01_production_networks.ipynb"}],"title":"Production Networks"},{"children":[{"file":"week06/L06.01_abm_concepts.ipynb"},{"file":"week06/L06.02_schelling_agents.ipynb"}],"title":"ABM 1"},{"children":[{"file":"week07/L07.01_abm_money.ipynb"},{"file":"week07/L07.02_abm_paper_virality.ipynb"}],"title":"ABM 2"},{"children":[{"file":"week08/L08.01_game_theory_intro.ipynb"},{"file":"week08/L08.02_network_traffic.ipynb"}],"title":"Game Theory 1"},{"children":[{"file":"week09/L09.01_mixed_strategies.ipynb"},{"file":"week09/L09.03_auctions.ipynb"},{"file":"week09/L09.04_game_theory_lab.ipynb"}],"title":"Game Theory 2"},{"children":[{"file":"weekA01/L.A1.01_from_rule_based_to_learning_agents.ipynb"},{"file":"weekA01/L.A1.02_rag_pattern_augmented_knowledge.ipynb"},{"file":"weekA01/L.A1.03_multi_agent_conversations.ipynb"}],"title":"Agents 1"},{"children":[{"file":"weekA02/L.A2.01_function_calling_and_tools.ipynb"},{"file":"weekA02/L.A2.02_type_safe_agents_pydantic_patterns.ipynb"},{"file":"weekA02/L.A02.03_evaluations.ipynb"}],"title":"Agents 2"}],"exports":[],"bibliography":[],"index":"index","pages":[{"level":1,"title":"Julia 1"},{"slug":"l01-02-setup","title":"Julia Setup","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l01-03-julia-basics","title":"Julia Foundations","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Julia 2"},{"slug":"l02-01-julia-types-methods","title":"Julia Types and Methods","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l02-02-code-organization","title":"Julia Code Organization","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l02-03-julia-packages","title":"Julia Package Development","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Graph Theory 1"},{"slug":"l03-01-graphs","title":"Graphs","description":"","date":"","thumbnail":"/build/967a40bb8f52cb4e2ba5e92214773160.png","thumbnailOptimized":"/build/967a40bb8f52cb4e2ba5e92214773160.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l03-02-strong-weak-ties","title":"Strong and Weak Ties","description":"","date":"","thumbnail":"/build/ca8cf7fd449d95329a6482e7c5663568.png","thumbnailOptimized":"/build/ca8cf7fd449d95329a6482e7c5663568.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Graph Theory 2"},{"slug":"l04-01-homophily","title":"Homophily","description":"","date":"","thumbnail":"/build/c2d78afac7a8f5c0a921d74dc173a647.png","thumbnailOptimized":"/build/c2d78afac7a8f5c0a921d74dc173a647.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l04-02-weighted-graphs","title":"Weighted Graphs","description":"","date":"","thumbnail":"/build/89abe19f81fbf303bd67dbdff22715f2.png","thumbnailOptimized":"/build/89abe19f81fbf303bd67dbdff22715f2.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l04-03-structural-balance","title":"Structural Balance","description":"","date":"","thumbnail":"/build/e8165665e7da5ff6c9050aa529f882e5.png","thumbnailOptimized":"/build/e8165665e7da5ff6c9050aa529f882e5.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Production Networks"},{"slug":"l05-01-production-networks","title":"Production Networks","description":"","date":"","thumbnail":"/build/7b92ed8d684202cdc6a3ee91cdc9e32b.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"ABM 1"},{"slug":"l06-01-abm-concepts","title":"Agent Based Models","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l06-02-schelling-agents","title":"Schelling Model with Agents.jl","description":"","date":"","thumbnail":"/build/df6a6b05f3de1e22494ef3ccc0e47c9f.png","thumbnailOptimized":"/build/df6a6b05f3de1e22494ef3ccc0e47c9f.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"ABM 2"},{"slug":"l07-01-abm-money","title":"Agent Based Models Review/Practice","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l07-02-abm-paper-virality","title":"Academic Paper Virality: An Agent-Based Model","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Game Theory 1"},{"slug":"l08-01-game-theory-intro","title":"Game Theory 1","description":"","date":"","thumbnail":"/build/514111f16ff750b99f83913e8f7cef48.png","thumbnailOptimized":"/build/514111f16ff750b99f83913e8f7cef48.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l08-02-network-traffic","title":"Network Traffic with Game Theory","description":"","date":"","thumbnail":"/build/424d6f26a2e0b40ca12376f2698b2418.png","thumbnailOptimized":"/build/424d6f26a2e0b40ca12376f2698b2418.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Game Theory 2"},{"slug":"l09-01-mixed-strategies","title":"More Game Theory","description":"","date":"","thumbnail":"/build/c78b1360cc127c6ff833e0a98f9de844.png","thumbnailOptimized":"/build/c78b1360cc127c6ff833e0a98f9de844.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l09-03-auctions","title":"Auctions","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l09-04-game-theory-lab","title":"Game Theory Lab: Data Science Applications","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Agents 1"},{"slug":"l-a1-01-from-rule-based-to-learning-agents","title":"From Rule-Based to Learning Agents","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l-a1-02-rag-pattern-augmented-knowledge","title":"Retrieval-Augmented Generation: Augmenting AI with External Knowledge","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l-a1-03-multi-agent-conversations","title":"Multi-Agent Conversations and Emergent Collaboration","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Agents 2"},{"slug":"l-a2-01-function-calling-and-tools","title":"Function Calling and Tool Use: From Talk to Action","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l-a2-02-type-safe-agents-pydantic-patterns","title":"Type-Safe Agent Development with PydanticAI Patterns","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l-a02-03-evaluations","title":"Evaluating AI Systems: Testing Agents at Scale","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2}]}]},"page":{"version":2,"kind":"Notebook","sha256":"d1bd20170d881ef8e8c8b29d63c135d01ca90382f261e2fb5939768bf6b5cfa3","slug":"l-a2-02-type-safe-agents-pydantic-patterns","location":"/weekA02/L.A2.02_type_safe_agents_pydantic_patterns.ipynb","dependencies":[],"frontmatter":{"title":"Type-Safe Agent Development with PydanticAI Patterns","content_includes_title":false,"kernelspec":{"name":"python3","display_name":".venv","language":"python"},"authors":[{"nameParsed":{"literal":"Spencer Lyon","given":"Spencer","family":"Lyon"},"name":"Spencer Lyon","orcid":"0009-0001-6461-885X","email":"spencer.lyon@ucf.edu","affiliations":["University of Central Florida","Valorum Data"],"id":"contributors-myst-generated-uid-0","corresponding":true}],"affiliations":[{"id":"University of Central Florida","name":"University of Central Florida"},{"id":"Valorum Data","name":"Valorum Data"}],"numbering":{"title":{"offset":1}},"exports":[{"format":"ipynb","filename":"L.A2.02_type_safe_agents_pydantic_patterns.ipynb","url":"/build/L.A2.02_type_safe_ag-2d938e9936b46bf863b48d3b59a3569f.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"blockquote","position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Computational Analysis of Social Complexity","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"pN0wXgrQxz"}],"key":"fo9ymryuf9"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Fall 2025, Spencer Lyon","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"zcq8EyWmcm"}],"key":"kbNcbUxemq"}],"key":"YF5PaxMiNE"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"strong","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Prerequisites","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"ia1Bvnqbs6"}],"key":"OmHvH4Sevf"}],"key":"HTc6aU35my"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":9,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Function calling concepts (L.A2.01)","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"O5aVwBfNJm"}],"key":"AmyRDZilgc"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Python type hints and type safety","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"manopJ1FRC"}],"key":"RebtOZY15d"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Basic agent architectures","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"PZt8YjPcE3"}],"key":"M7JuAzXUrF"}],"key":"vjVHDxMRwy"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"strong","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Outcomes","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"ODIF9WBfGw"}],"key":"l2jaNAnlWt"}],"key":"bJef9Ao3g2"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":15,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Understand type-safe agent development principles","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"KQiYnmYphQ"}],"key":"wT2uWVI7qy"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Implement validation-first agent architectures with Pydantic","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"Ed4iWDuM9M"}],"key":"v1V54cyIYC"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Apply dependency injection patterns for testable agents","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"p8FQmYxGF3"}],"key":"gGvwH8MANf"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"Build production-ready AI agents with PydanticAI","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"fxZ5H9Vvr6"}],"key":"QLAJuNbKYn"}],"key":"FwM8LwiSZH"},{"type":"paragraph","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"strong","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"References","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"KW2E9U9FkQ"}],"key":"qU6pr7rAUf"}],"key":"dsH6F1aiqF"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":22,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"link","url":"https://ai.pydantic.dev/","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"PydanticAI Documentation","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"DJ6pnkyrsD"}],"urlSource":"https://ai.pydantic.dev/","key":"B7xIgnkULJ"}],"key":"CIJYvGUAdl"},{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"link","url":"https://docs.pydantic.dev/","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"Pydantic Documentation","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"zvZVvqd0vV"}],"urlSource":"https://docs.pydantic.dev/","key":"xVWxt2q0hr"}],"key":"VDLCWcblhd"},{"type":"listItem","spread":true,"position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"link","url":"https://docs.python.org/3/library/typing.html","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"Python Type Hints","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"LtMcExQlMc"}],"urlSource":"https://docs.python.org/3/library/typing.html","key":"dz47i0FfFa"}],"key":"ppxwau6MAK"}],"key":"l72Vw2j9gA"}],"key":"DJfQK0HkiA"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Why Type Safety Matters","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"vkfPvtVYPe"}],"identifier":"why-type-safety-matters","label":"Why Type Safety Matters","html_id":"why-type-safety-matters","implicit":true,"key":"Ctalm1jme1"}],"key":"hOG27DqdB6"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The Problem: Unvalidated Agent Systems","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"vtNISrAyTd"}],"identifier":"the-problem-unvalidated-agent-systems","label":"The Problem: Unvalidated Agent Systems","html_id":"the-problem-unvalidated-agent-systems","implicit":true,"key":"Z1NTtGGJOL"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Consider a simple agent that processes user queries and makes database updates","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"nnc7pSpXzX"}],"key":"syIlvTj9g7"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"What could go wrong?","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"hECBpRXLv8"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Wrong data types passed to functions","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"B9xVYByIkz"}],"key":"C0jyaVoTOU"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Invalid values that violate business logic","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"cs3Yl19PJh"}],"key":"A5voDSW0Kx"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Runtime errors deep in execution","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"dwZBmAt0b8"}],"key":"hT9fe5Y4Ed"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Silent failures that corrupt data","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"KGuvzDVrV8"}],"key":"ZqSLkBVY8C"}],"key":"Mws2xFRsrE"}],"key":"lqzlvS2URH"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"These bugs are ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"BHN68yQ7SY"},{"type":"emphasis","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"expensive","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"G5o682qJtx"}],"key":"BtR3CGs7em"},{"type":"text","value":" in production","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"weVuvuO90e"}],"key":"HazDCyyhFN"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Type safety catches entire classes of errors before they happen","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"GXQ6UpBuO6"}],"key":"w7JCGwnXb1"}],"key":"K8vhrF8TPq"}],"key":"arDLIz8n0s"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"A Concrete Example","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"w44hQ8Ej62"}],"identifier":"a-concrete-example","label":"A Concrete Example","html_id":"a-concrete-example","implicit":true,"key":"e05cP6pvlC"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Suppose we’re building a research assistant agent that:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Ak5GXUyxDB"}],"key":"WhLKMydMh6"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Takes a research question","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"Xcqnh9ZFTW"}],"key":"soCd8GqTmt"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Searches academic databases","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Uuqk5tlZvy"}],"key":"RDGBwihmXT"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Returns structured citations","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"m7cYH277Ah"}],"key":"cWO5mDdRMK"}],"key":"iQHfhZTSbz"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Without type safety:","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"c5lpEGenTv"}],"key":"Sy7XAzrlGx"},{"type":"code","lang":"python","value":"# Python - no validation\ndef search_papers(query, max_results, min_year):\n    # What if query is None?\n    # What if max_results is negative?\n    # What if min_year is 99999?\n    ...","position":{"start":{"line":9,"column":1},"end":{"line":16,"column":1}},"key":"yLshRu5sRT"},{"type":"paragraph","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"With type safety:","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"vOOl8wetXh"}],"key":"J97pB6afIh"},{"type":"code","lang":"python","value":"# Python with Pydantic\nfrom pydantic import BaseModel, Field\n\nclass SearchRequest(BaseModel):\n    query: str = Field(min_length=1, max_length=500)\n    max_results: int = Field(ge=1, le=100)\n    min_year: int = Field(ge=1900, le=2025)\n\ndef search_papers(request: SearchRequest):\n    # Guaranteed valid inputs!\n    ...","position":{"start":{"line":19,"column":1},"end":{"line":31,"column":1}},"key":"nVhg8sWPSv"}],"key":"urJvuPPadL"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Key Benefits","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"QQncc7EvvH"}],"identifier":"key-benefits","label":"Key Benefits","html_id":"key-benefits","implicit":true,"key":"kEBSNo9W9j"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Fail Fast, Fail Loud","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"e53Q51GyvS"}],"key":"F042aO3t0W"}],"key":"Tm6vdY70Qi"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Invalid inputs rejected immediately","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"mkh839Fn9Z"}],"key":"xkAmOhclXI"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Clear error messages","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"fb8X6FJLIc"}],"key":"SpOK0YC27t"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"No silent corruption","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"hMCuwKTWW5"}],"key":"dzgJJ3Tzv3"}],"key":"LGIcT1HAI6"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"strong","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Self-Documenting Code","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"fnu3sgW5xy"}],"key":"mwMOCS9MyE"}],"key":"PdYnizNDJC"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":9,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Types tell you what’s expected","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"RKMxDsucFa"}],"key":"U8Vt22eRzt"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"IDE autocomplete and hints","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"q4EUf2GxDq"}],"key":"tMquX10Wpi"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Less need for comments","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"WkUiZW9Cb9"}],"key":"voFyPKkC8c"}],"key":"KBaU0hiTHE"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"strong","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Refactoring Confidence","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"GTKFGJHITZ"}],"key":"IWNGRYhFam"}],"key":"N46XxHOg8T"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":14,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Change a type definition","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"knx4hQwwmk"}],"key":"stMnMfoalC"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Compiler/type checker finds all affected code","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"kYMmBvJcQe"}],"key":"S7pntuHmHM"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Safe to modify large systems","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"SQ6r6du3YQ"}],"key":"E8ksz5WXDd"}],"key":"cqw8S5s4FE"},{"type":"paragraph","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"strong","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Testing Made Easier","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"PzbSnoWjZe"}],"key":"M6UEjFhUmQ"}],"key":"elmGCvrD0K"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":19,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"Don’t need to test invalid types","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"RBXI58PPjd"}],"key":"BV4FfqbXmh"},{"type":"listItem","spread":true,"position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"Focus on business logic","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"DXfHU21lgj"}],"key":"Ox8BvTj9l8"},{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Reduce test surface area","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"bzWVdtL9gU"}],"key":"xJvnNnqiO2"}],"key":"ATj4aeAHfg"}],"key":"QTUCySHz2y"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The PydanticAI Philosophy","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"UwAjURLbcn"}],"identifier":"the-pydanticai-philosophy","label":"The PydanticAI Philosophy","html_id":"the-pydanticai-philosophy","implicit":true,"key":"ZK04xBAYLp"}],"key":"BAYMeVI5x5"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"What is PydanticAI?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"alYnRMVX2a"}],"identifier":"what-is-pydanticai","label":"What is PydanticAI?","html_id":"what-is-pydanticai","implicit":true,"key":"pCLBXN6cMz"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"PydanticAI is a Python framework for building production-ready AI agents","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"wwknZAMAiQ"}],"key":"vH7EA8HWj3"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Created by the team behind Pydantic","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"beRQrRi4yY"}],"key":"bWU0SvArmM"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Pydantic powers the OpenAI SDK, Anthropic SDK, FastAPI, and countless other production systems","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"IuoPFHsYls"}],"key":"NyCp5xQUZL"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Philosophy: ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"isIhaCmQnW"},{"type":"strong","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"validation-first development","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"JG59n7wALo"}],"key":"IFSBOIhcmL"}],"key":"Bh74WGzGtQ"}],"key":"gEI2rmTKSZ"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"strong","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Why PydanticAI?","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"AQlvwe4kc2"}],"key":"GOsjVcfUX5"}],"key":"fuYLuhN1lM"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":9,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Type safety catches errors before runtime","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"uVQg8zhcja"}],"key":"JXY8Ffwf3k"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Validation ensures data integrity","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"PPtHmIsFBl"}],"key":"RFq5W29INU"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Production-ready patterns from day one","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"oaQXlutilz"}],"key":"zqznOVVIUA"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Seamless integration with Python’s type system","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"zdeEw9eeXn"}],"key":"MG3KGOHVll"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Used by major companies in production","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"EZ2RkyTCp6"}],"key":"b0pgrE0kq7"}],"key":"YlzNax9wO9"}],"key":"ltde9ihQfd"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Chef’s Knife and Cutting Board","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zpuJfi6boL"}],"identifier":"chefs-knife-and-cutting-board","label":"Chef’s Knife and Cutting Board","html_id":"chefs-knife-and-cutting-board","implicit":true,"key":"TTcZjRk5d5"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"PydanticAI describes itself as providing a “chef’s knife and cutting board”","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"leYLpuTPkb"}],"key":"SrxN50WSXx"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"What does this mean?","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"BaBqvYxket"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"NOT a framework","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Eo3KlThdhF"}],"key":"byHi8PzPAj"},{"type":"text","value":" with opinions about everything","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"eMZWxJeWzE"}],"key":"dDZihTDkf1"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"strong","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"IS a toolkit","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"QaVyvZgceA"}],"key":"RqMZ7Wgtx9"},{"type":"text","value":" with powerful, composable primitives","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"v0LvpoAoBN"}],"key":"brYOpuXbd7"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Simple tools that do one thing well","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"Xvv3IuwG1N"}],"key":"XCRTsWmUco"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Combine them however you want","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"J4MTR52BTS"}],"key":"EV3GpYpb5M"}],"key":"r5hyfA6k9u"}],"key":"xA8tDCKdJg"}],"key":"kMrlMUX4vc"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"strong","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Contrast with LangChain","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"CF58Nc4qkN"}],"key":"NysCzcy4s1"},{"type":"text","value":":","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"NlSBHONXhv"}],"key":"OTYSwQobaB"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":11,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"LangChain: Full kitchen with every appliance","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"AxpybphVpA"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":12,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Chains, memory, vector stores, callbacks, etc.","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"sR7s3obE5k"}],"key":"rXSTKn2M9G"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Complex abstractions","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"vvIuQWJJKS"}],"key":"zgL7JXRR2P"},{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Steep learning curve","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"rLIAAgVSWT"}],"key":"wjEKBGazQB"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Hard to customize","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"ESZelcUeIR"}],"key":"XL6mrGYukS"}],"key":"t7nPVyeyZr"}],"key":"vxInwiciAK"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"PydanticAI: Essential tools","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"LLpbZxbLUZ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":17,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Agent, tools, structured outputs","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"RiPNK4ZEVk"}],"key":"u8IW52aRTf"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Simple abstractions","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"TIaNZGt9mV"}],"key":"fjJeKQoLjT"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"Easy to understand","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"DWxA5iXY5h"}],"key":"HQE17IY89S"},{"type":"listItem","spread":true,"position":{"start":{"line":20,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Flexible customization","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"jGq4F3ovev"}],"key":"ZnBKAU6M5X"}],"key":"cYsU6a6QR6"}],"key":"mi2DzYdBOH"}],"key":"noJGpJtquL"},{"type":"paragraph","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"strong","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"When to Use Which","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"nkRePXID68"}],"key":"VwkVfluOf7"},{"type":"text","value":":","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"OUi6mtGXRr"}],"key":"afmcSstCle"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":23,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"Use PydanticAI when: building production systems, need type safety, want simplicity","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"LapEFmeskb"}],"key":"OCJge14Qjw"},{"type":"listItem","spread":true,"position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"Use LangChain when: rapid prototyping, need batteries-included features, okay with complexity","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"mBNKRnUKK9"}],"key":"rODWZbNKhK"}],"key":"sbxSsCO4sl"}],"key":"ucRW3ikLB3"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Core Principles","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TdhmvfIgjh"}],"identifier":"core-principles","label":"Core Principles","html_id":"core-principles","implicit":true,"key":"e9XGNkDll2"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"1. Type Safety First","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"DWNLts6iOE"}],"key":"nagIUsGhJv"}],"key":"zXZSwGhP89"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"All inputs validated before use","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"px50aRj7Bq"}],"key":"PqynJ8c1qt"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"All outputs structured and validated","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"DncGyxNJcL"}],"key":"Mene2S9GG1"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Catch errors at design time, not runtime","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"jHXssH7vS5"}],"key":"PqcDmfn1Tn"}],"key":"ZHRb8IAjA9"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"strong","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"2. Validation Before Computation","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"UtKV0dfHYe"}],"key":"jF0Jk3WS54"}],"key":"P0tamErWLs"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":9,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Never process invalid data","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"KnZxWz3PEZ"}],"key":"ayG6XQKgNR"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Fail immediately with clear messages","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"zmqkD204oR"}],"key":"TlklH4C8RU"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Make invalid states unrepresentable","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"ceyJJJjeVL"}],"key":"Pda8ChIkqJ"}],"key":"uklYOapNyR"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"strong","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"3. Dependency Injection","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"dGh1fF8xrq"}],"key":"P8aqDRqfn3"}],"key":"P8Cr8oFbFs"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":14,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Agents don’t create their dependencies","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"O7nPfdjatr"}],"key":"mhLTeKmoHf"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Dependencies passed in at construction","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"zVPrhxYU4U"}],"key":"KmWwZMYXGQ"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Easy to test with mocks","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"NbHKPnwq6s"}],"key":"YbNPKiTamd"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Easy to swap implementations","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"FeYtIEkq8j"}],"key":"LKrlie7V40"}],"key":"hRKi3EMQ2T"},{"type":"paragraph","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"strong","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"4. Explicit Over Implicit","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"JJ6R7zt0Im"}],"key":"xuHTNUe6Te"}],"key":"qTBWvVnxDW"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":20,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"No magic global state","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"qNPq5Su4zJ"}],"key":"KErQWDD9oL"},{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"No hidden configuration","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"BjuForZr2U"}],"key":"tA6bYMNGOM"},{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"Everything visible in function signatures","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"h5SlIGnht5"}],"key":"sAXSVGz9K3"}],"key":"ODawRAgvzX"},{"type":"paragraph","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"strong","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"5. Production Ready","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"nVwSz5worF"}],"key":"xbfpLKgnBI"}],"key":"nC8lOzrKwV"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":25,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"Designed for real systems, not demos","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"oIlLlOLUQm"}],"key":"y4lbtQktf5"},{"type":"listItem","spread":true,"position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"Handles errors gracefully","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"s6aiAWuXrz"}],"key":"IhiaLAodh6"},{"type":"listItem","spread":true,"position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"Observability built-in","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"McAjjItFCD"}],"key":"QfTqg9aKoa"},{"type":"listItem","spread":true,"position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"Performance matters","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"GHJtfDJQBk"}],"key":"g1d8W2sbWP"}],"key":"PAeaeLtW4z"}],"key":"vG5JZUg5BP"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Core Agent Components","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"K5ioVeGXtn"}],"identifier":"core-agent-components","label":"Core Agent Components","html_id":"core-agent-components","implicit":true,"key":"TXZVFkzumB"}],"key":"TSgzbPcdXD"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The Four Essential Pieces","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rMjzawt7Zp"}],"identifier":"the-four-essential-pieces","label":"The Four Essential Pieces","html_id":"the-four-essential-pieces","implicit":true,"key":"hvh0dn9Ieo"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Every PydanticAI agent has these components:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"aY72MPFG3p"}],"key":"lGit6qnzG5"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"1. Agent Definition","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ki4Gt0yvjG"}],"key":"GX8wvrimwp"}],"key":"Yip6tYcWCQ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Specifies the LLM model to use","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"fIRyuz67D9"}],"key":"RRpene5dqo"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Defines system prompt","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"WNfLlnX1hc"}],"key":"tSFl3PgkDN"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Registers available tools","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"SRL9KaLh5R"}],"key":"RUqCN4OQVE"}],"key":"KmSzf9jBmW"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"strong","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"2. Tool Functions","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"tL7HSQo4h2"}],"key":"nQ3lGlDzJx"}],"key":"RwGnqXXx2l"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":11,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Functions the agent can call","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"H0FF1tV7DM"}],"key":"OWvwiiRqKl"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Type-annotated parameters","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"fPmcHkD4Az"}],"key":"BPtslpJkWs"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Validated inputs and outputs","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"kn3mrUtehT"}],"key":"z0tNwV6GiV"}],"key":"ENqjRYEkBt"},{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"strong","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"3. Structured Outputs","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"XQnIDHi0cj"}],"key":"xHqXPkAc8Q"}],"key":"RDlZ79Fp98"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":16,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Define what the agent should return","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"DFljBukNov"}],"key":"Dlth7g355h"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Pydantic models for validation","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"YczxIMLRnq"}],"key":"KBIgmoognc"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"Guaranteed schema compliance","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"nVydDtmGEv"}],"key":"ZNmf4PUkkA"}],"key":"PdbfmZexC0"},{"type":"paragraph","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"strong","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"4. Run Context (Dependencies)","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"UylPQWn9xT"}],"key":"bCufBr328i"}],"key":"aVaVZWvdGZ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":21,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"External services (databases, APIs)","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"sIYD8wXK3E"}],"key":"vGtVBobdIy"},{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Configuration","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"ONfQGQ04R7"}],"key":"N5KyQrjnIC"},{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"State that flows through execution","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"rDxCwKsSBj"}],"key":"pD7MINjYZR"}],"key":"B55G6vRyyW"},{"type":"paragraph","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"Let’s examine each in detail","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"hx3NZmbbRW"}],"key":"NO9Gs6ZoNn"}],"key":"kLo59iWMRK"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"1. Agent Definition","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GY5UiEfMZ0"}],"identifier":"id-1-agent-definition","label":"1. Agent Definition","html_id":"id-1-agent-definition","implicit":true,"key":"mU7aB3yZ6C"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"In PydanticAI (Python):","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"nvtcFlMNGq"}],"key":"ybKOZ6ulu0"},{"type":"code","lang":"python","value":"from pydantic_ai import Agent\n\nagent = Agent(\n    'anthropic:claude-haiku-4-5',\n    system_prompt=\"You are a helpful research assistant.\",\n)","position":{"start":{"line":4,"column":1},"end":{"line":11,"column":1}},"key":"qaiWIw8ARK"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Key aspects:","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"quniIC3Li0"}],"key":"PsSNemIRNE"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":14,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"strong","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Model string","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"nsrYnoOjHe"}],"key":"PIOeOr1pEv"},{"type":"text","value":": Specifies which LLM to use","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"TtP1BcvSQf"}],"key":"JNHMBLdh8k"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"strong","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"System prompt","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"FhBm028pd4"}],"key":"gG8oWJUF30"},{"type":"text","value":": Sets agent behavior and role","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"ejTUF1qeSe"}],"key":"js0OtjMYhO"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"strong","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Simple constructor","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"zrbuBMbuW1"}],"key":"BcOdYAjXJn"},{"type":"text","value":": No complex configuration","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"J3fUwB4KbD"}],"key":"fv1oc1GIp9"}],"key":"x1FXMbQ9do"}],"key":"tt2JTjpHbq"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"2. Tool Functions","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Lwr4O5iCNE"}],"identifier":"id-2-tool-functions","label":"2. Tool Functions","html_id":"id-2-tool-functions","implicit":true,"key":"Of0q1wHxdc"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Tools are functions the agent can call:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"opmA6zFYs8"}],"key":"D9NDaYsc6G"},{"type":"code","lang":"python","value":"from pydantic_ai import Agent\n\nagent = Agent('anthropic:claude-haiku-4-5')\n\n@agent.tool\ndef search_papers(\n    query: str,\n    max_results: int = 10\n) -\u003e list[dict]:\n    \"\"\"Search academic papers by query.\"\"\"\n    # Implementation here\n    return results","position":{"start":{"line":5,"column":1},"end":{"line":18,"column":1}},"key":"SXYS70TLxE"},{"type":"paragraph","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"strong","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"What happens","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"Py9QdriQqS"}],"key":"Dt2CAaJuDh"},{"type":"text","value":":","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"F3TpPQmnlk"}],"key":"s5pXG3x9V6"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":21,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"LLM sees tool name and docstring","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"N1zh8JoUu0"}],"key":"ggTDjCdjih"},{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"LLM decides when to call it","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"RSOcE0rhM4"}],"key":"Jde6ILVgh5"},{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"Parameters are validated against type hints","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"OkZs4OJPB2"}],"key":"bzgbeCIOeP"},{"type":"listItem","spread":true,"position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"Function executes","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"HtBGsrn9Dm"}],"key":"lMuQsTiE5M"},{"type":"listItem","spread":true,"position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"Return value validated","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"GI3seKpffO"}],"key":"L1oNblb8r9"},{"type":"listItem","spread":true,"position":{"start":{"line":26,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"Result given back to LLM","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"MdNtecySSP"}],"key":"GAaKiS9YAE"}],"key":"bD12JlqsVN"},{"type":"paragraph","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"strong","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"Type safety at every step!","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"smAWi4EH6R"}],"key":"CARWeRyPtL"}],"key":"fLDgm3BxP1"}],"key":"VHhKzsXzWv"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"3. Structured Outputs","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hwNbrtGdR0"}],"identifier":"id-3-structured-outputs","label":"3. Structured Outputs","html_id":"id-3-structured-outputs","implicit":true,"key":"SUjXAu1QY9"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Define exactly what you want back:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"KqztBLqRBw"}],"key":"MIZakVkSZJ"},{"type":"code","lang":"python","value":"from pydantic import BaseModel\nfrom pydantic_ai import Agent\n\nclass Citation(BaseModel):\n    title: str\n    authors: list[str]\n    year: int\n    doi: str | None = None\n\nclass ResearchResult(BaseModel):\n    summary: str\n    citations: list[Citation]\n    confidence: float\n\nagent = Agent(\n    'anthropic:claude-haiku-4-5',\n    result_type=ResearchResult\n)","position":{"start":{"line":5,"column":1},"end":{"line":24,"column":1}},"key":"cM5IXhGfYi"},{"type":"paragraph","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"strong","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"Benefits","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"nd8CXNaWKu"}],"key":"h95LQ0UKtW"},{"type":"text","value":":","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"wtpsMOm6YC"}],"key":"ef8Pi2z9uz"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":27,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"LLM must return this exact structure","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"ARe5HK8fNa"}],"key":"WtvHFHfRwk"},{"type":"listItem","spread":true,"position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"Automatic validation","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"lVEjxV4uzo"}],"key":"mFFl4kNOCP"},{"type":"listItem","spread":true,"position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"No parsing strings or JSON","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"UYEHppQ7Wt"}],"key":"Sb5i4fgFAi"},{"type":"listItem","spread":true,"position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"text","value":"IDE autocomplete on results","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"cSCNROGH5F"}],"key":"yAbov6R0DJ"}],"key":"RrOsLin4RJ"}],"key":"uEuzRVMvWO"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"4. Run Context (Dependencies)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"WgrOa11ZXq"}],"identifier":"id-4-run-context-dependencies","label":"4. Run Context (Dependencies)","html_id":"id-4-run-context-dependencies","implicit":true,"key":"Zars5bV6fh"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The secret sauce for testability:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"N2zYl5XzRV"}],"key":"jhT3ZydaGA"},{"type":"code","lang":"python","value":"from pydantic_ai import Agent, RunContext\nfrom dataclasses import dataclass\n\n@dataclass\nclass Dependencies:\n    db: DatabaseClient\n    api_key: str\n    max_retries: int = 3\n\nagent = Agent(\n    'anthropic:claude-haiku-4-5',\n    deps_type=Dependencies\n)\n\n@agent.tool\ndef search_papers(\n    ctx: RunContext[Dependencies],\n    query: str\n) -\u003e list[dict]:\n    # Access dependencies via ctx.deps\n    return ctx.deps.db.search(query)","position":{"start":{"line":5,"column":1},"end":{"line":27,"column":1}},"key":"Y3XwRDKxzi"},{"type":"paragraph","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"strong","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"Why this matters","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"PuPMYwJHB2"}],"key":"j5j2w17EGI"},{"type":"text","value":":","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"S3U3wzT9Ld"}],"key":"Dym8PS2Kwe"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":30,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"text","value":"No global variables","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"FevkmjBJ6Y"}],"key":"OSUhduLjrz"},{"type":"listItem","spread":true,"position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"Easy to inject mock dependencies for testing","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"KVvZaDlG6a"}],"key":"SNnruSx3uV"},{"type":"listItem","spread":true,"position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"text","value":"Explicit about what each tool needs","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"SAlaOx4Rrw"}],"key":"l2iY6y1KDR"},{"type":"listItem","spread":true,"position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"text","value":"Can have different deps for dev/prod","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"rrFvPT6YxP"}],"key":"ZuvcZjcYa3"}],"key":"RMBH85qV2x"}],"key":"lVpobIiNvD"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Putting It All Together","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"C6yySZHHLz"}],"identifier":"putting-it-all-together","label":"Putting It All Together","html_id":"putting-it-all-together","implicit":true,"key":"oZDKEBOkLL"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"A complete PydanticAI agent:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"lnrpDPGchp"}],"key":"fandFByY6e"},{"type":"code","lang":"python","value":"from pydantic import BaseModel\nfrom pydantic_ai import Agent, RunContext\nfrom dataclasses import dataclass\n\n# 1. Define dependencies\n@dataclass\nclass ResearchDeps:\n    db: DatabaseClient\n    api_key: str\n\n# 2. Define output structure\nclass Citation(BaseModel):\n    title: str\n    authors: list[str]\n    year: int\n\nclass ResearchResult(BaseModel):\n    summary: str\n    citations: list[Citation]\n\n# 3. Create agent\nagent = Agent(\n    'anthropic:claude-haiku-4-5',\n    deps_type=ResearchDeps,\n    result_type=ResearchResult,\n    system_prompt='You are a research assistant.'\n)\n\n# 4. Register tools\n@agent.tool\ndef search_papers(\n    ctx: RunContext[ResearchDeps],\n    query: str,\n    max_results: int = 10\n) -\u003e list[dict]:\n    \"\"\"Search academic database.\"\"\"\n    return ctx.deps.db.search(query, limit=max_results)\n\n# 5. Run agent\nasync def run_research(question: str):\n    deps = ResearchDeps(\n        db=get_database(),\n        api_key=get_api_key()\n    )\n    result = await agent.run(question, deps=deps)\n    return result.data  # Guaranteed to be ResearchResult!","position":{"start":{"line":5,"column":1},"end":{"line":52,"column":1}},"key":"aosfJPDse1"}],"key":"xlRfPTH9eQ"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Building a Research Assistant","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xuEGlldeCo"}],"identifier":"building-a-research-assistant","label":"Building a Research Assistant","html_id":"building-a-research-assistant","implicit":true,"key":"MHBv99EBNl"}],"key":"WN6V4Ocaew"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from dotenv import load_dotenv\nimport nest_asyncio\n\nload_dotenv()\nnest_asyncio.apply()\n","key":"KeJLxXhLoi"},{"type":"output","id":"AYTszTl8ojVJ1c8wDZhn_","data":[],"key":"RVMZdIxAfs"}],"key":"LXm1j0XK37"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"System Design","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hb1HC1DfUR"}],"identifier":"system-design","label":"System Design","html_id":"system-design","implicit":true,"key":"d68qhob7Aq"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Let’s build a complete research assistant that demonstrates all the PydanticAI concepts we’ve learned:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"k17JyuRGp2"}],"key":"MnuIuG1mTb"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Features","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"RPdGMZrNzA"}],"key":"JeMW3Em34u"},{"type":"text","value":":","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"wQiuwLmjDQ"}],"key":"ftdvNB3DYm"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Search academic papers by query","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"aytBK6GTR1"}],"key":"YKQfKF9WLK"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Get detailed paper information","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"RaA1cqTwNS"}],"key":"B9QFaNzfnb"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Generate structured research summaries","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"PRFLyzqEno"}],"key":"VLBHQIwp1N"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Type-safe dependencies and outputs","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"Ee0ttyikcY"}],"key":"AznLLeWgRL"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Multiple tools working together","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"g7JDJBua3K"}],"key":"W1dQLXVkpb"}],"key":"O13dwo47I6"},{"type":"paragraph","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"strong","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Architecture","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"soOWGLQjUK"}],"key":"dzPp51UeWN"},{"type":"text","value":":","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"LK843O5EiR"}],"key":"TbVKn6YDXT"},{"type":"code","lang":"","value":"User Query\n    ↓\nPydanticAI Agent (with system prompt)\n    ↓\nTool Selection (agent decides which tools to use)\n    ↓\nTool Execution (with validated inputs via RunContext)\n    ↓\nResult Synthesis (agent combines tool outputs)\n    ↓\nStructured Output (validated ResearchSummary)","position":{"start":{"line":13,"column":1},"end":{"line":25,"column":1}},"key":"BWlv2bpmLT"},{"type":"paragraph","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"This is a realistic pattern you’d use in production.","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"bDdp7w39kp"}],"key":"Ms2i3refS2"}],"key":"MPx75Mfegs"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 1: Define Output Structure","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qgi7uXXL23"}],"identifier":"step-1-define-output-structure","label":"Step 1: Define Output Structure","html_id":"step-1-define-output-structure","implicit":true,"key":"ZycVOxO1tD"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"First, define what we want the agent to return:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"jCVki70XQ0"}],"key":"gSeAvQcshE"}],"key":"ZVz6PtyqGO"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from pydantic import BaseModel, Field\nfrom typing import Optional\n\nclass Paper(BaseModel):\n    \"\"\"Academic paper with validated fields.\"\"\"\n    title: str = Field(min_length=1)\n    authors: list[str] = Field(min_length=1)\n    year: int = Field(ge=1800, le=2025)\n    abstract: str\n    doi: Optional[str] = None\n\nclass ResearchSummary(BaseModel):\n    \"\"\"Final research output with validation.\"\"\"\n    query: str = Field(min_length=1)\n    summary: str = Field(min_length=1, description=\"Natural language summary\")\n    key_papers: list[Paper] = Field(min_length=1, description=\"Most relevant papers found\")\n    confidence: float = Field(ge=0.0, le=1.0, description=\"Agent's confidence in results\")\n\n    def _repr_html_(self) -\u003e str:\n        \"\"\"Rich HTML display for Jupyter notebooks.\"\"\"\n        papers_html = \"\"\n        for i, paper in enumerate(self.key_papers, 1):\n            authors = \", \".join(paper.authors)\n            doi_link = f'\u003ca href=\"https://doi.org/{paper.doi}\" target=\"_blank\"\u003eDOI\u003c/a\u003e' if paper.doi else \"\"\n            papers_html += f\"\"\"\n            \u003cdiv style=\"margin: 10px 0; padding: 10px; background: #f8f9fa; border-left: 3px solid #007bff;\"\u003e\n                \u003cstrong\u003e{i}. {paper.title}\u003c/strong\u003e ({paper.year}) {doi_link}\u003cbr\u003e\n                \u003cem\u003e{authors}\u003c/em\u003e\u003cbr\u003e\n                \u003csmall style=\"color: #666;\"\u003e{paper.abstract[:200]}...\u003c/small\u003e\n            \u003c/div\u003e\n            \"\"\"\n\n        confidence_color = \"#28a745\" if self.confidence \u003e= 0.7 else \"#ffc107\" if self.confidence \u003e= 0.4 else \"#dc3545\"\n        confidence_pct = f\"{self.confidence:.0%}\"\n\n        return f\"\"\"\n        \u003cdiv style=\"font-family: sans-serif; max-width: 800px;\"\u003e\n            \u003ch3 style=\"color: #333; border-bottom: 2px solid #007bff; padding-bottom: 10px;\"\u003e\n                📚 Research Results: \"{self.query}\"\n            \u003c/h3\u003e\n            \u003cdiv style=\"margin: 15px 0; padding: 15px; background: #e7f3ff; border-radius: 5px;\"\u003e\n                \u003cstrong\u003eSummary:\u003c/strong\u003e\u003cbr\u003e\n                {self.summary}\n            \u003c/div\u003e\n            \u003cdiv style=\"margin: 10px 0;\"\u003e\n                \u003cstrong\u003eConfidence:\u003c/strong\u003e\n                \u003cspan style=\"color: {confidence_color}; font-weight: bold;\"\u003e{confidence_pct}\u003c/span\u003e\n            \u003c/div\u003e\n            \u003cdiv style=\"margin-top: 20px;\"\u003e\n                \u003cstrong\u003eKey Papers ({len(self.key_papers)}):\u003c/strong\u003e\n                {papers_html}\n            \u003c/div\u003e\n        \u003c/div\u003e\n        \"\"\"\n\n    def __str__(self) -\u003e str:\n        \"\"\"Plain text representation.\"\"\"\n        lines = [\n            f\"Research Results: {self.query}\",\n            \"=\" * 60,\n            f\"\\nSummary:\\n{self.summary}\",\n            f\"\\nConfidence: {self.confidence:.0%}\",\n            f\"\\nKey Papers ({len(self.key_papers)}):\",\n        ]\n\n        for i, paper in enumerate(self.key_papers, 1):\n            lines.append(f\"\\n{i}. {paper.title} ({paper.year})\")\n            lines.append(f\"   Authors: {', '.join(paper.authors)}\")\n            if paper.doi:\n                lines.append(f\"   DOI: {paper.doi}\")\n\n        return \"\\n\".join(lines)\n\n# Test that validation works\ntry:\n    invalid = Paper(title=\"\", authors=[], year=3000, abstract=\"test\")\nexcept Exception as e:\n    print(f\"✓ Validation caught error: {type(e).__name__}\")\n\nvalid = Paper(\n    title=\"Attention Is All You Need\",\n    authors=[\"Vaswani et al.\"],\n    year=2017,\n    abstract=\"We propose the Transformer...\"\n)\nprint(f\"✓ Valid paper created: {valid.title}\")","key":"XxxDIGTcym"},{"type":"output","id":"TcB76U_S2pb3YNomj1Lus","data":[{"name":"stdout","output_type":"stream","text":"✓ Validation caught error: ValidationError\n✓ Valid paper created: Attention Is All You Need\n"}],"key":"krgA3yVL4w"}],"key":"cm2bPo9Wdl"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 2: Define Dependencies","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"yjUB2QCjyO"}],"identifier":"step-2-define-dependencies","label":"Step 2: Define Dependencies","html_id":"step-2-define-dependencies","implicit":true,"key":"GMiE5chmMn"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Define external resources the agent needs:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ZY44MzhSWi"}],"key":"obUDQHxxwt"}],"key":"H4rGMjip59"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from dataclasses import dataclass\n\n@dataclass\nclass ResearchDeps:\n    \"\"\"Dependencies for the research agent.\"\"\"\n    database_url: str\n    api_key: str\n    max_papers_per_search: int = 10\n\n    def search_database(self, query: str, limit: int) -\u003e list[Paper]:\n        \"\"\"Simulate database search (in production, would query real DB).\"\"\"\n        print(f\"  🔍 Searching database for: '{query}' (limit: {limit})\")\n\n        # In production, this would be:\n        # conn = connect(self.database_url, self.api_key)\n        # results = conn.execute(search_query)\n        # return [Paper(**row) for row in results]\n\n        # For demo, return mock results\n        return [\n            Paper(\n                title=\"Attention Is All You Need\",\n                authors=[\"Vaswani, A.\", \"Shazeer, N.\", \"Parmar, N.\"],\n                year=2017,\n                abstract=\"We propose a new simple network architecture, the Transformer...\",\n                doi=\"10.5555/3295222.3295349\"\n            ),\n            Paper(\n                title=\"BERT: Pre-training of Deep Bidirectional Transformers\",\n                authors=[\"Devlin, J.\", \"Chang, M.\", \"Lee, K.\"],\n                year=2019,\n                abstract=\"We introduce BERT, a method for pre-training language representations...\",\n                doi=\"10.18653/v1/N19-1423\"\n            ),\n        ]\n\n    def get_paper_by_id(self, paper_id: str) -\u003e Paper:\n        \"\"\"Retrieve specific paper by ID.\"\"\"\n        print(f\"  📄 Fetching paper: {paper_id}\")\n        return Paper(\n            title=\"Example Paper\",\n            authors=[\"Author, A.\"],\n            year=2023,\n            abstract=\"This is an example paper abstract.\"\n        )\n\n# Create dependencies\ndeps = ResearchDeps(\n    database_url=\"sqlite3:///papers.db\",\n    api_key=\"demo-api-key-12345\",\n    max_papers_per_search=5\n)\n\nprint(\"✓ Dependencies configured\")","key":"hmzsGNOxh2"},{"type":"output","id":"P-F2YoHSlB1B0kJXQPuv0","data":[{"name":"stdout","output_type":"stream","text":"✓ Dependencies configured\n"}],"key":"uzsNGYLd7d"}],"key":"crwje8ORCB"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 3: Create Agent and Register Tools","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"lJIX86L74s"}],"identifier":"step-3-create-agent-and-register-tools","label":"Step 3: Create Agent and Register Tools","html_id":"step-3-create-agent-and-register-tools","implicit":true,"key":"RP8s9emexo"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Now create the agent and give it tools:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"uGxKR19A4z"}],"key":"sABdTF9GoP"}],"key":"YH2BkcCwAp"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from pydantic_ai import Agent, RunContext\n\n# Create agent with system prompt and structured output\nresearch_agent = Agent(\n    'anthropic:claude-haiku-4-5',\n    deps_type=ResearchDeps,\n    output_type=ResearchSummary,\n    system_prompt=\"\"\"You are a helpful research assistant.\n\n    When asked to research a topic:\n    1. Search for relevant papers using the search_papers tool\n    2. Analyze the results carefully\n    3. Provide a clear summary with the most important papers\n    4. Rate your confidence based on result quality and relevance\n\n    Be thorough but concise. Focus on the most impactful papers.\"\"\"\n)\n\n# Register tool 1: Search for papers\n@research_agent.tool\ndef search_papers(\n    ctx: RunContext[ResearchDeps],\n    query: str,\n    max_results: int = 5\n) -\u003e list[Paper]:\n    \"\"\"\n    Search for academic papers by query string.\n\n    Args:\n        query: Search query (keywords, topics, authors)\n        max_results: Maximum number of papers to return (default 5)\n\n    Returns:\n        List of relevant papers\n    \"\"\"\n    # Access dependencies via ctx.deps\n    limit = min(max_results, ctx.deps.max_papers_per_search)\n    papers = ctx.deps.search_database(query, limit)\n    return papers\n\n# Register tool 2: Get specific paper details\n@research_agent.tool\ndef get_paper_details(\n    ctx: RunContext[ResearchDeps],\n    paper_id: str\n) -\u003e Paper:\n    \"\"\"\n    Get detailed information about a specific paper by its ID.\n\n    Args:\n        paper_id: Unique identifier for the paper\n\n    Returns:\n        Paper object with full details\n    \"\"\"\n    return ctx.deps.get_paper_by_id(paper_id)\n\nprint(\"✓ Agent created with 2 tools registered\")","key":"UlgtxpewOc"},{"type":"output","id":"6u2w4e9afBKaSNNOJSXAe","data":[{"name":"stdout","output_type":"stream","text":"✓ Agent created with 2 tools registered\n"}],"key":"Qj0STsoqpV"}],"key":"nk5WXbcosS"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 4: Run the Agent","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"IGHhws9qt0"}],"identifier":"step-4-run-the-agent","label":"Step 4: Run the Agent","html_id":"step-4-run-the-agent","implicit":true,"key":"Z2YJVrdFwh"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Execute the agent with a research query:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"VWm8vxpLuZ"}],"key":"IgaRg3VmK4"}],"key":"d6ilPiZ7Uo"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"async def run_research(question: str):\n    deps = ResearchDeps(\n        database_url=\"sqlite3:///papers.db\",\n        api_key=\"demo-api-key-12345\",\n        max_papers_per_search=5\n    )\n    result = await research_agent.run(question, deps=deps)\n    return result\n\nresearch_result = await run_research(\"transformer architectures in NLP\")","key":"y4TTGuxyuR"},{"type":"output","id":"FYNvFrDJuU0O6EHRQUghp","data":[{"name":"stdout","output_type":"stream","text":"  🔍 Searching database for: 'transformer architectures NLP natural language processing' (limit: 5)\n  📄 Fetching paper: 10.5555/3295222.3295349\n  🔍 Searching database for: 'GPT language model transformer decoder architecture' (limit: 5)\n  📄 Fetching paper: 10.18653/v1/N19-1423\n  🔍 Searching database for: 'vision transformer ViT multimodal transformers' (limit: 5)\n"}],"key":"sn2BMyD7lC"}],"key":"JLPPbAJwBD"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"research_result.all_messages()","key":"YFA3pWH52r"},{"type":"output","id":"vjR4TV_fTG09MZc6qpQRD","data":[{"output_type":"execute_result","execution_count":6,"metadata":{},"data":{"text/plain":{"content":"[ModelRequest(parts=[SystemPromptPart(content='You are a helpful research assistant.\\n\\n    When asked to research a topic:\\n    1. Search for relevant papers using the search_papers tool\\n    2. Analyze the results carefully\\n    3. Provide a clear summary with the most important papers\\n    4. Rate your confidence based on result quality and relevance\\n\\n    Be thorough but concise. Focus on the most impactful papers.', timestamp=datetime.datetime(2025, 11, 10, 18, 7, 38, 998062, tzinfo=datetime.timezone.utc)), UserPromptPart(content='transformer architectures in NLP', timestamp=datetime.datetime(2025, 11, 10, 18, 7, 38, 998067, tzinfo=datetime.timezone.utc))]),\n ModelResponse(parts=[ToolCallPart(tool_name='search_papers', args={'query': 'transformer architectures NLP natural language processing', 'max_results': 10}, tool_call_id='toolu_01HMYGCHHKepQbGLLnE77RTA')], usage=RequestUsage(input_tokens=1265, output_tokens=64, details={'cache_creation_input_tokens': 0, 'cache_read_input_tokens': 0, 'input_tokens': 1265, 'output_tokens': 64}), model_name='claude-haiku-4-5-20251001', timestamp=datetime.datetime(2025, 11, 10, 18, 7, 40, 151296, tzinfo=datetime.timezone.utc), provider_name='anthropic', provider_details={'finish_reason': 'tool_use'}, provider_response_id='msg_01TXmSMSuieQVGRVVvCvrk7p', finish_reason='tool_call'),\n ModelRequest(parts=[ToolReturnPart(tool_name='search_papers', content=[Paper(title='Attention Is All You Need', authors=['Vaswani, A.', 'Shazeer, N.', 'Parmar, N.'], year=2017, abstract='We propose a new simple network architecture, the Transformer...', doi='10.5555/3295222.3295349'), Paper(title='BERT: Pre-training of Deep Bidirectional Transformers', authors=['Devlin, J.', 'Chang, M.', 'Lee, K.'], year=2019, abstract='We introduce BERT, a method for pre-training language representations...', doi='10.18653/v1/N19-1423')], tool_call_id='toolu_01HMYGCHHKepQbGLLnE77RTA', timestamp=datetime.datetime(2025, 11, 10, 18, 7, 40, 152853, tzinfo=datetime.timezone.utc))]),\n ModelResponse(parts=[ToolCallPart(tool_name='get_paper_details', args={'paper_id': '10.5555/3295222.3295349'}, tool_call_id='toolu_01SAyghgAgQQioeXSeDLBg6S'), ToolCallPart(tool_name='get_paper_details', args={'paper_id': '10.18653/v1/N19-1423'}, tool_call_id='toolu_01CzRgpL8C2jHXem8UA7EXVW'), ToolCallPart(tool_name='search_papers', args={'query': 'GPT language model transformer decoder architecture', 'max_results': 5}, tool_call_id='toolu_01EHPzYsfa1VcN1numeKnka8'), ToolCallPart(tool_name='search_papers', args={'query': 'vision transformer ViT multimodal transformers', 'max_results': 5}, tool_call_id='toolu_016HLuY8zBwhBXVbogsVga69')], usage=RequestUsage(input_tokens=1507, output_tokens=230, details={'cache_creation_input_tokens': 0, 'cache_read_input_tokens': 0, 'input_tokens': 1507, 'output_tokens': 230}), model_name='claude-haiku-4-5-20251001', timestamp=datetime.datetime(2025, 11, 10, 18, 7, 41, 808031, tzinfo=datetime.timezone.utc), provider_name='anthropic', provider_details={'finish_reason': 'tool_use'}, provider_response_id='msg_01KGv7g5ApDoCDnSenRMjfwW', finish_reason='tool_call'),\n ModelRequest(parts=[ToolReturnPart(tool_name='get_paper_details', content=Paper(title='Example Paper', authors=['Author, A.'], year=2023, abstract='This is an example paper abstract.', doi=None), tool_call_id='toolu_01SAyghgAgQQioeXSeDLBg6S', timestamp=datetime.datetime(2025, 11, 10, 18, 7, 41, 810833, tzinfo=datetime.timezone.utc)), ToolReturnPart(tool_name='get_paper_details', content=Paper(title='Example Paper', authors=['Author, A.'], year=2023, abstract='This is an example paper abstract.', doi=None), tool_call_id='toolu_01CzRgpL8C2jHXem8UA7EXVW', timestamp=datetime.datetime(2025, 11, 10, 18, 7, 41, 810881, tzinfo=datetime.timezone.utc)), ToolReturnPart(tool_name='search_papers', content=[Paper(title='Attention Is All You Need', authors=['Vaswani, A.', 'Shazeer, N.', 'Parmar, N.'], year=2017, abstract='We propose a new simple network architecture, the Transformer...', doi='10.5555/3295222.3295349'), Paper(title='BERT: Pre-training of Deep Bidirectional Transformers', authors=['Devlin, J.', 'Chang, M.', 'Lee, K.'], year=2019, abstract='We introduce BERT, a method for pre-training language representations...', doi='10.18653/v1/N19-1423')], tool_call_id='toolu_01EHPzYsfa1VcN1numeKnka8', timestamp=datetime.datetime(2025, 11, 10, 18, 7, 41, 810865, tzinfo=datetime.timezone.utc)), ToolReturnPart(tool_name='search_papers', content=[Paper(title='Attention Is All You Need', authors=['Vaswani, A.', 'Shazeer, N.', 'Parmar, N.'], year=2017, abstract='We propose a new simple network architecture, the Transformer...', doi='10.5555/3295222.3295349'), Paper(title='BERT: Pre-training of Deep Bidirectional Transformers', authors=['Devlin, J.', 'Chang, M.', 'Lee, K.'], year=2019, abstract='We introduce BERT, a method for pre-training language representations...', doi='10.18653/v1/N19-1423')], tool_call_id='toolu_016HLuY8zBwhBXVbogsVga69', timestamp=datetime.datetime(2025, 11, 10, 18, 7, 41, 810899, tzinfo=datetime.timezone.utc))]),\n ModelResponse(parts=[ToolCallPart(tool_name='final_result', args={'query': 'transformer architectures in NLP', 'summary': \"Transformer architectures have become the foundation of modern natural language processing. The key innovation was the introduction of the self-attention mechanism, which allows models to process entire sequences in parallel and capture long-range dependencies effectively. The original Transformer architecture (Vaswani et al., 2017) proposed the encoder-decoder structure with multi-head self-attention and feed-forward networks. This was followed by influential pre-trained models like BERT (Devlin et al., 2019), which introduced bidirectional pre-training for language understanding. Transformer-based models have revolutionized NLP across diverse tasks including machine translation, question answering, sentiment analysis, and text generation. The architecture's parallelization capabilities and effectiveness in capturing semantic relationships have made it the dominant paradigm in both research and industry applications.\", 'key_papers': [{'title': 'Attention Is All You Need', 'authors': ['Vaswani, A.', 'Shazeer, N.', 'Parmar, N.'], 'year': 2017, 'abstract': 'We propose a new simple network architecture, the Transformer, based solely on attention mechanisms, dispensing with recurrence and convolutions entirely. The Transformer achieves new state-of-the-art BLEU scores on WMT 2014 English-to-German and English-to-French translation tasks. This work introduces multi-head self-attention, enabling parallel processing and effective capture of long-range dependencies in sequences.', 'doi': '10.5555/3295222.3295349'}, {'title': 'BERT: Pre-training of Deep Bidirectional Transformers for Language Understanding', 'authors': ['Devlin, J.', 'Chang, M.', 'Lee, K.'], 'year': 2019, 'abstract': 'We introduce BERT, a method for pre-training language representations using masked language modeling and next sentence prediction on large unlabeled text corpora. BERT achieves state-of-the-art results on a wide range of NLP tasks through fine-tuning, demonstrating the power of bidirectional pre-trained representations.', 'doi': '10.18653/v1/N19-1423'}], 'confidence': 0.75}, tool_call_id='toolu_01WbAZFPb3WusK49Gkv7A2U6')], usage=RequestUsage(input_tokens=2237, output_tokens=600, details={'cache_creation_input_tokens': 0, 'cache_read_input_tokens': 0, 'input_tokens': 2237, 'output_tokens': 600}), model_name='claude-haiku-4-5-20251001', timestamp=datetime.datetime(2025, 11, 10, 18, 7, 46, 698547, tzinfo=datetime.timezone.utc), provider_name='anthropic', provider_details={'finish_reason': 'tool_use'}, provider_response_id='msg_01Ub7dhxfuQEKChRtd5zP8Vg', finish_reason='tool_call'),\n ModelRequest(parts=[ToolReturnPart(tool_name='final_result', content='Final result processed.', tool_call_id='toolu_01WbAZFPb3WusK49Gkv7A2U6', timestamp=datetime.datetime(2025, 11, 10, 18, 7, 46, 699638, tzinfo=datetime.timezone.utc))])]","content_type":"text/plain"}}}],"key":"KKgpYte968"}],"key":"D8T4DwbNmx"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"research_result.output","key":"V5386Npaib"},{"type":"output","id":"eKzWPOwmJhGBfzF_9ynyW","data":[{"output_type":"execute_result","execution_count":7,"metadata":{},"data":{"text/html":{"content":"\n        \u003cdiv style=\"font-family: sans-serif; max-width: 800px;\"\u003e\n            \u003ch3 style=\"color: #333; border-bottom: 2px solid #007bff; padding-bottom: 10px;\"\u003e\n                📚 Research Results: \"transformer architectures in NLP\"\n            \u003c/h3\u003e\n            \u003cdiv style=\"margin: 15px 0; padding: 15px; background: #e7f3ff; border-radius: 5px;\"\u003e\n                \u003cstrong\u003eSummary:\u003c/strong\u003e\u003cbr\u003e\n                Transformer architectures have become the foundation of modern natural language processing. The key innovation was the introduction of the self-attention mechanism, which allows models to process entire sequences in parallel and capture long-range dependencies effectively. The original Transformer architecture (Vaswani et al., 2017) proposed the encoder-decoder structure with multi-head self-attention and feed-forward networks. This was followed by influential pre-trained models like BERT (Devlin et al., 2019), which introduced bidirectional pre-training for language understanding. Transformer-based models have revolutionized NLP across diverse tasks including machine translation, question answering, sentiment analysis, and text generation. The architecture's parallelization capabilities and effectiveness in capturing semantic relationships have made it the dominant paradigm in both research and industry applications.\n            \u003c/div\u003e\n            \u003cdiv style=\"margin: 10px 0;\"\u003e\n                \u003cstrong\u003eConfidence:\u003c/strong\u003e\n                \u003cspan style=\"color: #28a745; font-weight: bold;\"\u003e75%\u003c/span\u003e\n            \u003c/div\u003e\n            \u003cdiv style=\"margin-top: 20px;\"\u003e\n                \u003cstrong\u003eKey Papers (2):\u003c/strong\u003e\n                \n            \u003cdiv style=\"margin: 10px 0; padding: 10px; background: #f8f9fa; border-left: 3px solid #007bff;\"\u003e\n                \u003cstrong\u003e1. Attention Is All You Need\u003c/strong\u003e (2017) \u003ca href=\"https://doi.org/10.5555/3295222.3295349\" target=\"_blank\"\u003eDOI\u003c/a\u003e\u003cbr\u003e\n                \u003cem\u003eVaswani, A., Shazeer, N., Parmar, N.\u003c/em\u003e\u003cbr\u003e\n                \u003csmall style=\"color: #666;\"\u003eWe propose a new simple network architecture, the Transformer, based solely on attention mechanisms, dispensing with recurrence and convolutions entirely. The Transformer achieves new state-of-the-art...\u003c/small\u003e\n            \u003c/div\u003e\n            \n            \u003cdiv style=\"margin: 10px 0; padding: 10px; background: #f8f9fa; border-left: 3px solid #007bff;\"\u003e\n                \u003cstrong\u003e2. BERT: Pre-training of Deep Bidirectional Transformers for Language Understanding\u003c/strong\u003e (2019) \u003ca href=\"https://doi.org/10.18653/v1/N19-1423\" target=\"_blank\"\u003eDOI\u003c/a\u003e\u003cbr\u003e\n                \u003cem\u003eDevlin, J., Chang, M., Lee, K.\u003c/em\u003e\u003cbr\u003e\n                \u003csmall style=\"color: #666;\"\u003eWe introduce BERT, a method for pre-training language representations using masked language modeling and next sentence prediction on large unlabeled text corpora. BERT achieves state-of-the-art result...\u003c/small\u003e\n            \u003c/div\u003e\n            \n            \u003c/div\u003e\n        \u003c/div\u003e\n        ","content_type":"text/html"},"text/plain":{"content":"ResearchSummary(query='transformer architectures in NLP', summary=\"Transformer architectures have become the foundation of modern natural language processing. The key innovation was the introduction of the self-attention mechanism, which allows models to process entire sequences in parallel and capture long-range dependencies effectively. The original Transformer architecture (Vaswani et al., 2017) proposed the encoder-decoder structure with multi-head self-attention and feed-forward networks. This was followed by influential pre-trained models like BERT (Devlin et al., 2019), which introduced bidirectional pre-training for language understanding. Transformer-based models have revolutionized NLP across diverse tasks including machine translation, question answering, sentiment analysis, and text generation. The architecture's parallelization capabilities and effectiveness in capturing semantic relationships have made it the dominant paradigm in both research and industry applications.\", key_papers=[Paper(title='Attention Is All You Need', authors=['Vaswani, A.', 'Shazeer, N.', 'Parmar, N.'], year=2017, abstract='We propose a new simple network architecture, the Transformer, based solely on attention mechanisms, dispensing with recurrence and convolutions entirely. The Transformer achieves new state-of-the-art BLEU scores on WMT 2014 English-to-German and English-to-French translation tasks. This work introduces multi-head self-attention, enabling parallel processing and effective capture of long-range dependencies in sequences.', doi='10.5555/3295222.3295349'), Paper(title='BERT: Pre-training of Deep Bidirectional Transformers for Language Understanding', authors=['Devlin, J.', 'Chang, M.', 'Lee, K.'], year=2019, abstract='We introduce BERT, a method for pre-training language representations using masked language modeling and next sentence prediction on large unlabeled text corpora. BERT achieves state-of-the-art results on a wide range of NLP tasks through fine-tuning, demonstrating the power of bidirectional pre-trained representations.', doi='10.18653/v1/N19-1423')], confidence=0.75)","content_type":"text/plain"}}}],"key":"ChHXyNmgck"}],"key":"vSbnh3bRo2"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"What Just Happened?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"yt3qrrFhsf"}],"identifier":"what-just-happened","label":"What Just Happened?","html_id":"what-just-happened","implicit":true,"key":"Gw8ewcNxvP"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Let’s break down the agent execution:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"hTXrggkP8s"}],"key":"K4mnDaeYRa"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"1. Agent Received Query","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"xEqBquVqTd"}],"key":"A9MjtVm4R5"}],"key":"wZ8BEEI8OP"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"User asked: “transformer architectures in NLP”","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"xMyPskNS4c"}],"key":"FCRGJIb3Za"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Agent has access to: search_papers and get_paper_details tools","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"tWHSQs2LVi"}],"key":"KkXCqZgKZ5"}],"key":"P0koh2qH4g"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"strong","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"2. Agent Made Decisions","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"W1MqEffyhV"}],"key":"YkIelAAs0R"}],"key":"jRSRzX2r4l"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":10,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"LLM analyzed the query","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"qFpNdrT4g1"}],"key":"rtgDS1LSfg"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Decided to call ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"dsFlb06ZgG"},{"type":"inlineCode","value":"search_papers(\"transformer architectures in NLP\", max_results=5)","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"SMqk4UCXPM"}],"key":"y5pTCY8uTo"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"PydanticAI validated the parameters","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"a3JsPqGJIk"}],"key":"aSi0jbMZco"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Tool executed with access to deps via RunContext","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"g3lHosMZUI"}],"key":"TkPEtpCxla"}],"key":"MwU4qHQbMI"},{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"strong","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"3. Tool Returned Validated Data","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"MaDsUlhqpU"}],"key":"xL2fzZsbxG"}],"key":"RczbcSAzfc"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":16,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Tool returned ","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"usSt8gXawr"},{"type":"inlineCode","value":"list[Paper]","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"pXoZ2IuZ6H"},{"type":"text","value":" (type-checked)","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"XbcfNaaJym"}],"key":"HCv0Y0O6Fx"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Each Paper object validated by Pydantic","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"tBikkTdvJp"}],"key":"OiFvuOkaL8"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"Agent received the results","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"o3rn9c3nHT"}],"key":"CJKDXhYFqZ"}],"key":"xPuIsBmCxh"},{"type":"paragraph","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"strong","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"4. Agent Synthesized Response","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"vhM3G8Jj4m"}],"key":"cyRxKXcHbT"}],"key":"K0m11KmeUg"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":21,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"LLM analyzed the papers","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"jrGsUKwG6y"}],"key":"g9Ezh6dAEj"},{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Generated natural language summary","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"qYccBAP5eI"}],"key":"RTzD4C29zR"},{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"Selected key papers","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"Xr9kguhCYx"}],"key":"jmlwyNBJXc"},{"type":"listItem","spread":true,"position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"Assigned confidence score","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"HcUe25bzb1"}],"key":"fDKZ7vmIqf"},{"type":"listItem","spread":true,"position":{"start":{"line":25,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"Returned ResearchSummary (validated!)","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"gnvA8EXEsw"}],"key":"JMQKREDECZ"}],"key":"m8V1bGl6SA"},{"type":"paragraph","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"strong","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"5. Type Safety Throughout","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"btaIuEjJZg"}],"key":"vsPrgpjZUS"}],"key":"nd5ljaEHdz"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":28,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"Every input validated before execution","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"JMoyc1qoUi"}],"key":"lBVKEdwpZr"},{"type":"listItem","spread":true,"position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"Every output validated before return","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"Zk4tGgb8EJ"}],"key":"mWJp5aQVax"},{"type":"listItem","spread":true,"position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"text","value":"Impossible to get wrong types","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"YD8Wd9wkKA"}],"key":"bQxU7IO6Zp"},{"type":"listItem","spread":true,"position":{"start":{"line":31,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"text","value":"Clear errors if validation fails","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"mEd7jYKNdQ"}],"key":"UDDrwDYrpJ"}],"key":"HsZZXHjH6a"},{"type":"paragraph","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"text","value":"This is the power of type-safe agent development!","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"L8onOqy8VV"}],"key":"fu5GfUPdTt"}],"key":"lAbeETz2If"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Exercise: Add a New Tool","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rGrXqOdXFH"}],"identifier":"exercise-add-a-new-tool","label":"Exercise: Add a New Tool","html_id":"exercise-add-a-new-tool","implicit":true,"key":"wqdqiGjZGn"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Add a ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"mFkCsIDvEV"},{"type":"inlineCode","value":"compare_papers","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"JzPbhYsUBs"},{"type":"text","value":" tool that takes two paper titles and returns a comparison.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"cuCZP6ThKY"}],"key":"oGkim5VLkt"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Requirements","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"diaxVYTJ3n"}],"key":"GbfObPO4Im"},{"type":"text","value":":","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"uQlPt1ZJKf"}],"key":"Q93Ye6kuv7"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Use ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"uZR1mmvACK"},{"type":"inlineCode","value":"@research_agent.tool","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"FVJKiTytEY"},{"type":"text","value":" decorator","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"jhp2jeYayV"}],"key":"Anan7WofYD"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Accept ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"jw4jlx5lEK"},{"type":"inlineCode","value":"RunContext[ResearchDeps]","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"OKLmPgYS9m"},{"type":"text","value":" as first parameter","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"arv24LxerN"}],"key":"kbQxLGrLCu"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Take two paper titles as strings","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"yahkZNiMD0"}],"key":"jcHAp03IRF"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Return a string with the comparison","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"sVQTvLpffL"}],"key":"KRnbXPEBpo"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Use proper docstring (the agent sees this!)","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"kISEmJVaAz"}],"key":"kHiYau8OZR"}],"key":"sbZx8SAcA2"},{"type":"paragraph","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"strong","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Hint","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"sNo6xkSz0O"}],"key":"mDhYSTaJvY"},{"type":"text","value":": The agent will automatically see this new tool and can call it!","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"Zki45YvFXl"}],"key":"linmr6UYlv"}],"key":"lwjZLV7K33"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"@research_agent.tool\ndef compare_papers(\n    ctx: RunContext[ResearchDeps],\n    paper1_title: str,\n    paper2_title: str\n) -\u003e str:\n    \"\"\"\n    Compare two papers by their titles.\n\n    Args:\n        paper1_title: Title of first paper\n        paper2_title: Title of second paper\n\n    Returns:\n        Comparison summary\n    \"\"\"\n    # TODO: Implement comparison logic\n    # In production, would search for both papers and compare:\n    # - Publication dates\n    # - Citation counts\n    # - Research methods\n    # - Key contributions\n\n    return f\"Comparison between '{paper1_title}' and '{paper2_title}': [TODO: implement]\"","key":"L8Q7h7BY72"},{"type":"output","id":"9ffpLhsciEtu0brzP0rxO","data":[],"key":"I61qbtAGax"}],"key":"MYCkrDvJ9f"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Advanced: Dynamic System Prompts","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZTwHbvIvdk"}],"identifier":"advanced-dynamic-system-prompts","label":"Advanced: Dynamic System Prompts","html_id":"advanced-dynamic-system-prompts","implicit":true,"key":"eRmaNJB2UV"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"You can also generate system prompts dynamically based on context:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"l8wKQsmwfl"}],"key":"C8qPs2H0Lx"}],"key":"UwcakAZcUX"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from pydantic_ai import RunContext\n\n# Create agent without static system prompt\nadaptive_agent = Agent(\n    'anthropic:claude-haiku-4-5',\n    deps_type=ResearchDeps,\n    output_type=ResearchSummary\n)\n\n# Dynamic system prompt based on context\n@adaptive_agent.system_prompt(dynamic=True)\ndef get_system_prompt(ctx: RunContext[ResearchDeps]) -\u003e str:\n    \"\"\"Generate system prompt based on current context.\"\"\"\n    max_papers = ctx.deps.max_papers_per_search\n\n    return f\"\"\"You are a research assistant with access to {max_papers} papers per search.\n\nFocus on quality over quantity. When analyzing papers:\n- Prioritize recent publications (last 5 years)\n- Look for highly-cited works\n- Consider methodological rigor\n- Provide balanced summaries\n\nYour database: {ctx.deps.database_url}\n    \"\"\"\n\nprint(\"✓ Adaptive agent created with dynamic system prompt\")","key":"O5BP428dT0"},{"type":"output","id":"rzpQ1x-5YxIHtFm-tvlIf","data":[{"name":"stdout","output_type":"stream","text":"✓ Adaptive agent created with dynamic system prompt\n"}],"key":"dUxaMRrVYM"}],"key":"g5El8HkHgV"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Why This Pattern Scales","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"WXUKbDu0Nn"}],"identifier":"why-this-pattern-scales","label":"Why This Pattern Scales","html_id":"why-this-pattern-scales","implicit":true,"key":"gGb4soJHhW"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"This agent architecture works for production systems because:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"CJRWGZ7xy3"}],"key":"ceO2xjL6dC"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"1. Type Safety","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"uEGqyrBxVm"}],"key":"Lb6pOgBkUW"}],"key":"DrMqFSIAeq"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Catch errors at development time","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"mo2HmHW72J"}],"key":"cL7xGEWYkV"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Invalid data rejected before processing","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"MKuL3z3pQx"}],"key":"XkBYrTHLap"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Clear validation errors guide debugging","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"rRVXtRI7zp"}],"key":"CD9WgW1BFj"}],"key":"GMSyqorrVB"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"strong","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"2. Separation of Concerns","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"zZtTWNFrPZ"}],"key":"scXDDOpjai"}],"key":"U0LKZaDaY3"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":11,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Agent logic separate from business logic","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"XQifUavqXs"}],"key":"SiduHrSBMQ"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Dependencies injected, not hard-coded","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"OTq9QHda9Q"}],"key":"fzrYbXix47"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Easy to test each component independently","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"pCFDQ1rj9J"}],"key":"JdbGfwxIRW"}],"key":"mli0psJo5c"},{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"strong","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"3. Composability","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"snNd42wZUa"}],"key":"fvTHQxjzFp"}],"key":"KslR4TVVkH"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":16,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Tools are just Python functions","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"XQSmIUMn9F"}],"key":"Jb2ccoev9F"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Add new capabilities by adding new tools","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"z7NGP3NVdW"}],"key":"XIZat94XE1"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"Mix and match tools for different agents","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"RliMiMEe0M"}],"key":"DPCkBEpOoX"}],"key":"WnkWng2uun"},{"type":"paragraph","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"strong","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"4. Observability","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"PpiFFPwU2s"}],"key":"yICU1k7TAa"}],"key":"SPC72F5x8D"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":21,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Every tool call is logged","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"gcmeCu41RD"}],"key":"RQpTOrn9FN"},{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Clear execution trace","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"dIsC7AhomO"}],"key":"Q649xyYqdU"},{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"Easy to monitor and debug","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"MbHTyVE1cL"}],"key":"AS4bM13g2y"}],"key":"zk61FQ4Nwa"},{"type":"paragraph","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"strong","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"5. Maintainability","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"vnVe9qpLm1"}],"key":"M6Uwefm61R"}],"key":"YqR2VXYVrY"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":26,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"Simple, readable code","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"U9rTP1ziQ1"}],"key":"tGtUE1HJU0"},{"type":"listItem","spread":true,"position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"Standard Python patterns","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"LZQAUJSHA3"}],"key":"SsrfzxbvaR"},{"type":"listItem","spread":true,"position":{"start":{"line":28,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"Type hints document the code","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"xMeCZ5dXGC"}],"key":"RjbPxXnWam"}],"key":"Ly11K3l1VM"},{"type":"paragraph","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"text","value":"This is how you build AI agents that last!","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"KvDSpZeyLb"}],"key":"p1CPyISPDY"}],"key":"k3wOEaHc9t"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Key Takeaways","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"wLc3j5sK7V"}],"identifier":"key-takeaways","label":"Key Takeaways","html_id":"key-takeaways","implicit":true,"key":"Dt3O2LTIIO"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Type Safety Prevents Errors","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"JQvAuP7NQJ"}],"key":"MdIjZMpxFt"}],"key":"Q9X5qcSxZy"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Validate data at construction time","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"mYHf3XUBfD"}],"key":"LOMwsiwHFl"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Invalid states become unrepresentable","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"pFigQq2xgC"}],"key":"OuFNbxdpb1"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Clear error messages guide debugging","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"kPQ5U3noRR"}],"key":"r3fIS2tSlP"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Catch bugs before they reach production","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"C8DVkTmLJ5"}],"key":"qIFvPyUcna"}],"key":"JZQ9Z0aopJ"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"strong","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"PydanticAI Core Concepts","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"h8iMqLCLdt"}],"key":"vnouBoimLv"}],"key":"cveXB7dMnq"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":10,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"strong","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Pydantic Models","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"Z4rBxE4j7e"}],"key":"bWhtafFHjD"},{"type":"text","value":" - Define validated data structures","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"kQwCvqjbNs"}],"key":"G4NF714gsi"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"strong","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Agent","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"lJKBgYnTXG"}],"key":"x7eKTL6dHv"},{"type":"text","value":" - Coordinates LLM and tools","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"LGgpVyp3d6"}],"key":"tV14dhZxvL"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"strong","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"cite","identifier":"agent.tool","label":"agent.tool","kind":"narrative","position":{"start":{"line":12,"column":3},"end":{"line":12,"column":14}},"error":"not found","key":"vxTpVPbMUV"}],"key":"lNTVR4vpkI"},{"type":"text","value":" - Register functions as tools","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"pbSG2tMg75"}],"key":"aeosjViln3"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"strong","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"RunContext[DepsType]","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"DkmHWYv9kp"}],"key":"FFyD4cBU0V"},{"type":"text","value":" - Inject dependencies safely","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"NoKXcYPupe"}],"key":"oFPP2AfyXV"},{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"strong","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"result_type","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"LZghv1Dsdr"}],"key":"YrBNXpZJ9D"},{"type":"text","value":" - Guarantee output structure","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"ouVYnP7y0n"}],"key":"B17tC7DkUP"}],"key":"k20dfNUC86"},{"type":"paragraph","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"strong","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Production-Ready Pattern","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"PIL348HlsD"}],"key":"icyZKOGNcO"}],"key":"RzJgFfxrIK"},{"type":"code","lang":"python","value":"# 1. Define structures\nclass Output(BaseModel): ...\nclass Deps: ...\n\n# 2. Create agent\nagent = Agent(model, deps_type=Deps, result_type=Output)\n\n# 3. Register tools\n@agent.tool\ndef my_tool(ctx: RunContext[Deps], arg: str): ...\n\n# 4. Run\nresult = await agent.run(query, deps=deps)","position":{"start":{"line":17,"column":1},"end":{"line":31,"column":1}},"key":"uZVoAUGdQJ"},{"type":"paragraph","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"strong","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"text","value":"Why This Works","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"FiJJtv7vmh"}],"key":"sc7XnPNQ0j"}],"key":"vIeZbHecrt"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":34,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"text","value":"Simple, composable primitives","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"h7H7kSyyJc"}],"key":"XgJ3WZwZ8E"},{"type":"listItem","spread":true,"position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"text","value":"Type safety throughout","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"D9id88m3WG"}],"key":"z3e9ptm26C"},{"type":"listItem","spread":true,"position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"children":[{"type":"text","value":"Easy to test and maintain","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"fNF6p0Edwu"}],"key":"dEuctOuyYo"},{"type":"listItem","spread":true,"position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"text","value":"Scales to complex systems","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"YZsvgGc9o5"}],"key":"KGhpHG73kX"}],"key":"twnOcFSWXs"}],"key":"rgSUiWWWvm"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Quick Reference","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LPkHhJur7Z"}],"identifier":"quick-reference","label":"Quick Reference","html_id":"quick-reference","implicit":true,"key":"qF4Py5vo9l"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Pydantic Validation","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"vR7zCt1Jja"}],"key":"bXsmK7jRwQ"},{"type":"text","value":":","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"TFSwDA847P"}],"key":"XrjiXD3rss"},{"type":"code","lang":"python","value":"from pydantic import BaseModel, Field\n\nclass MyModel(BaseModel):\n    name: str = Field(min_length=1)\n    count: int = Field(ge=0, le=100)","position":{"start":{"line":4,"column":1},"end":{"line":10,"column":1}},"key":"mqlx76cdfm"},{"type":"paragraph","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"strong","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Agent Creation","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"F1sJDzGrAG"}],"key":"Y0H6cyEfso"},{"type":"text","value":":","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"sL8hSBr2bR"}],"key":"uNGuvlF3rN"},{"type":"code","lang":"python","value":"from pydantic_ai import Agent\n\nagent = Agent(\n    'anthropic:claude-haiku-4-5',\n    deps_type=MyDeps,\n    result_type=MyOutput,\n    system_prompt=\"...\"\n)","position":{"start":{"line":13,"column":1},"end":{"line":22,"column":1}},"key":"lflIBDdbTb"},{"type":"paragraph","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"strong","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"Tool Registration","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"fSb3JQfEvb"}],"key":"qqQMn5mFp1"},{"type":"text","value":":","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"X20SQrmXAu"}],"key":"L5oGUSYNcj"},{"type":"code","lang":"python","value":"@agent.tool\ndef my_tool(\n    ctx: RunContext[MyDeps],\n    arg: str\n) -\u003e MyType:\n    \"\"\"Docstring that LLM sees.\"\"\"\n    return ctx.deps.some_method(arg)","position":{"start":{"line":25,"column":1},"end":{"line":33,"column":1}},"key":"Nz6bla0A8u"},{"type":"paragraph","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"strong","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"text","value":"Dynamic System Prompt","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"mbSFyQ1fwG"}],"key":"mUqkTMN2Lu"},{"type":"text","value":":","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"pv7pJag0pt"}],"key":"qAQ7HbBKQq"},{"type":"code","lang":"python","value":"@agent.system_prompt\ndef get_prompt(ctx: RunContext[MyDeps]) -\u003e str:\n    return f\"Context: {ctx.deps.value}\"","position":{"start":{"line":36,"column":1},"end":{"line":40,"column":1}},"key":"r0Qs36hKo3"},{"type":"paragraph","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"children":[{"type":"strong","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"children":[{"type":"text","value":"Running Agent","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"key":"kfLXGBK4le"}],"key":"ETSXAabYVi"},{"type":"text","value":":","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"key":"sEGtAiy9kz"}],"key":"iAnnRqvp0o"},{"type":"code","lang":"python","value":"# Async\nresult = await agent.run(query, deps=my_deps)\noutput: MyOutput = result.data\n\n# Streaming\nasync with agent.run_stream(query, deps=my_deps) as response:\n    async for chunk in response.stream_text():\n        print(chunk, end='')\n    final = await response.get_data()","position":{"start":{"line":43,"column":1},"end":{"line":53,"column":1}},"key":"skmLEC0GUX"}],"key":"GZB0RvF6gR"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Next Steps","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YyW8lNHrin"}],"identifier":"next-steps","label":"Next Steps","html_id":"next-steps","implicit":true,"key":"vjD72dtEUf"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"In L.A2.03: Agent Frameworks Comparison","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"f3dSjKjdu0"}],"key":"uiYrhhPEpf"},{"type":"text","value":", we’ll:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"s3CmnKt8Yv"}],"key":"c5HKKTmoaw"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Compare different agent frameworks (PydanticAI, LangChain, CrewAI)","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"GUBM53I7I6"}],"key":"UCY8FqZPHI"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Understand architectural trade-offs","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"FWOFcKimOw"}],"key":"rOlfgBSt1A"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Learn when to use each approach","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"KoRkXbssNc"}],"key":"LDy5wPQch1"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"See the same task implemented multiple ways","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"ULAeiflHtL"}],"key":"O16ipeLiK9"}],"key":"J0xaxpqS7D"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"strong","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"In Week A03: Multi-Agent Systems","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"FTMyMam1Ug"}],"key":"JUOBIyejI9"},{"type":"text","value":", we’ll:","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"oEchg1ovbL"}],"key":"pUU55vXvqq"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":10,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Build agent swarms with collective intelligence","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"ZBLMl9rAY5"}],"key":"lPwzwg4IVO"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Apply game theory to AI agent interactions","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"kZHBx23WdM"}],"key":"HCsqygkVwG"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Create digital twins with agent-based models","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"CQvlx8D9Wh"}],"key":"DvmfrATll8"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Scale from single agents to agent ecosystems","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"E7LeqIaPc4"}],"key":"U1bBuo9rJP"}],"key":"Cw4EUU5SST"},{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"strong","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Practice Ideas","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"t1mp0Y05f6"}],"key":"sdxwpdFunt"},{"type":"text","value":":","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"skH9Tb4q6E"}],"key":"TRZm4u1RxF"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":16,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Add more tools to the research agent (filter by year, compare citations)","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"rRgi4wVjSD"}],"key":"Is0STs6jFH"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Build an agent for a different domain (finance, healthcare, education)","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"K88rSEqa6u"}],"key":"WPNOWnrPcz"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Implement streaming responses for better UX","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"BixdwmTNrM"}],"key":"TzRNtOetKL"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"Add error handling and retry logic","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"aVYB5YB6an"}],"key":"Bwpewds1yF"},{"type":"listItem","spread":true,"position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"Create a simple web UI with FastAPI","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"SIOOnTlRH6"}],"key":"CHAniG7Rtx"}],"key":"jzjbn4SHLT"}],"key":"JWzbPvPpnH"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Further Reading","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"gh1kHdYsWB"}],"identifier":"further-reading","label":"Further Reading","html_id":"further-reading","implicit":true,"key":"eZqKsQ6Ghk"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"PydanticAI Documentation","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"FsOPT8bqca"}],"key":"pJCHd2hFEB"},{"type":"text","value":":","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Js59gpBHDa"}],"key":"Fa8EMrN9QS"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"link","url":"https://ai.pydantic.dev/","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Getting Started","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"gR0R2GGit7"}],"urlSource":"https://ai.pydantic.dev/","key":"lZ5Fwqaaln"}],"key":"aCShyL8mMq"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"link","url":"https://ai.pydantic.dev/agents/","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Agents Guide","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Y5KODSYB9O"}],"urlSource":"https://ai.pydantic.dev/agents/","key":"BT7mtyZtSv"}],"key":"vnCvPC6kFb"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"link","url":"https://ai.pydantic.dev/tools/","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Tools Documentation","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"cGP1gSjWVv"}],"urlSource":"https://ai.pydantic.dev/tools/","key":"VCIacN9VFn"}],"key":"GxkchvJyOb"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"link","url":"https://ai.pydantic.dev/dependencies/","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Dependencies","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"pz9g9VKx2v"}],"urlSource":"https://ai.pydantic.dev/dependencies/","key":"ovW1pxREKH"}],"key":"YJQSdXvKJP"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"link","url":"https://ai.pydantic.dev/examples/","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Examples","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"xYUTJZc3P4"}],"urlSource":"https://ai.pydantic.dev/examples/","key":"ggVba57DxD"}],"key":"YgIA5uAlJh"}],"key":"gb2tFJ04Cm"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"strong","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Pydantic Core","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"T5Z7iql8ZT"}],"key":"aX6ByIrHcB"},{"type":"text","value":":","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"gQtaLxGjeG"}],"key":"wCzyoyNkNW"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":11,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"link","url":"https://docs.pydantic.dev/","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Pydantic V2","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"mOdaPh03LY"}],"urlSource":"https://docs.pydantic.dev/","key":"mk16W04mMZ"}],"key":"LugGnnMVp4"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"link","url":"https://docs.pydantic.dev/latest/concepts/fields/","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Field Validation","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"ywwiaRQWlp"}],"urlSource":"https://docs.pydantic.dev/latest/concepts/fields/","key":"GbPs8yMBcF"}],"key":"HHpENyg4DW"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"link","url":"https://docs.pydantic.dev/latest/concepts/models/","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Models","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"xHZEGBT3cP"}],"urlSource":"https://docs.pydantic.dev/latest/concepts/models/","key":"y6iN7U87Qh"}],"key":"kv36rt28ZS"}],"key":"IIdfZGhOyH"},{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"strong","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Python Type System","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"QxyW4KTSFv"}],"key":"E8F0WKi7CU"},{"type":"text","value":":","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"uzlHvJaTNo"}],"key":"UhM0kdGv4P"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":16,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"link","url":"https://docs.python.org/3/library/typing.html","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Type Hints","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"uiV0rCuwJ0"}],"urlSource":"https://docs.python.org/3/library/typing.html","key":"Yst1nI0NBh"}],"key":"N3aJiIim37"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"link","url":"https://peps.python.org/pep-0544/","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Protocols","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"Hbgl0yeZ3x"}],"urlSource":"https://peps.python.org/pep-0544/","key":"PNQy7h8Xkb"}],"key":"CiTTBFeax7"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"link","url":"https://docs.python.org/3/library/typing.html#generics","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Generics","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"k4EIZ6Zcjh"}],"urlSource":"https://docs.python.org/3/library/typing.html#generics","key":"qejf6JNmqL"}],"key":"NPkYYzkJKq"}],"key":"y6Uxc9qf44"},{"type":"paragraph","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"strong","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"Production Topics","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"vMrH8PZHyx"}],"key":"PNa7RDjOSB"},{"type":"text","value":" (for later):","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"D3cLdD58Wv"}],"key":"w9gWFzGCvt"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":21,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Testing with pytest","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"nMufpnka2Q"}],"key":"C987MnaGsB"},{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Monitoring with Logfire","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"Vru4PUzF6R"}],"key":"gDrUlb26gX"},{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"Deployment patterns","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"WrPBL2otd0"}],"key":"GIslmOeoCX"},{"type":"listItem","spread":true,"position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"Cost optimization","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"hKRFU3OoNk"}],"key":"rIxrhzTHZs"}],"key":"ildT1YhNO9"}],"key":"iU1WTu9vUc"}],"key":"p8TP9dVHL5"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Function Calling and Tool Use: From Talk to Action","url":"/l-a2-01-function-calling-and-tools","group":"Agents 2"},"next":{"title":"Evaluating AI Systems: Testing Agents at Scale","url":"/l-a02-03-evaluations","group":"Agents 2"}}},"domain":"http://localhost:3000"},"project":{"title":"UCF CAP-6318","description":"Computational Analysis of Social Complexity","authors":[{"nameParsed":{"literal":"Spencer Lyon","given":"Spencer","family":"Lyon"},"name":"Spencer Lyon","orcid":"0009-0001-6461-885X","email":"spencer.lyon@ucf.edu","affiliations":["University of Central Florida","Valorum Data"],"id":"contributors-myst-generated-uid-0","corresponding":true}],"affiliations":[{"id":"University of Central Florida","name":"University of Central Florida"},{"id":"Valorum Data","name":"Valorum Data"}],"id":"492c0fd0-6de5-4738-b5ab-8c08e34fb954","toc":[{"file":"week01/L01.01_welcome.ipynb"},{"children":[{"file":"week01/L01.02_setup.ipynb"},{"file":"week01/L01.03_julia_basics.ipynb"}],"title":"Julia 1"},{"children":[{"file":"week02/L02.01_julia_types_methods.ipynb"},{"file":"week02/L02.02_code_organization.ipynb"},{"file":"week02/L02.03_julia_packages.ipynb"}],"title":"Julia 2"},{"children":[{"file":"week03/L03.01_graphs.ipynb"},{"file":"week03/L03.02_strong_weak_ties.ipynb"}],"title":"Graph Theory 1"},{"children":[{"file":"week04/L04.01_homophily.ipynb"},{"file":"week04/L04.02_weighted_graphs.ipynb"},{"file":"week04/L04.03_structural_balance.ipynb"}],"title":"Graph Theory 2"},{"children":[{"file":"week05/L05.01_production_networks.ipynb"}],"title":"Production Networks"},{"children":[{"file":"week06/L06.01_abm_concepts.ipynb"},{"file":"week06/L06.02_schelling_agents.ipynb"}],"title":"ABM 1"},{"children":[{"file":"week07/L07.01_abm_money.ipynb"},{"file":"week07/L07.02_abm_paper_virality.ipynb"}],"title":"ABM 2"},{"children":[{"file":"week08/L08.01_game_theory_intro.ipynb"},{"file":"week08/L08.02_network_traffic.ipynb"}],"title":"Game Theory 1"},{"children":[{"file":"week09/L09.01_mixed_strategies.ipynb"},{"file":"week09/L09.03_auctions.ipynb"},{"file":"week09/L09.04_game_theory_lab.ipynb"}],"title":"Game Theory 2"},{"children":[{"file":"weekA01/L.A1.01_from_rule_based_to_learning_agents.ipynb"},{"file":"weekA01/L.A1.02_rag_pattern_augmented_knowledge.ipynb"},{"file":"weekA01/L.A1.03_multi_agent_conversations.ipynb"}],"title":"Agents 1"},{"children":[{"file":"weekA02/L.A2.01_function_calling_and_tools.ipynb"},{"file":"weekA02/L.A2.02_type_safe_agents_pydantic_patterns.ipynb"},{"file":"weekA02/L.A02.03_evaluations.ipynb"}],"title":"Agents 2"}],"exports":[],"bibliography":[],"index":"index","pages":[{"level":1,"title":"Julia 1"},{"slug":"l01-02-setup","title":"Julia Setup","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l01-03-julia-basics","title":"Julia Foundations","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Julia 2"},{"slug":"l02-01-julia-types-methods","title":"Julia Types and Methods","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l02-02-code-organization","title":"Julia Code Organization","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l02-03-julia-packages","title":"Julia Package Development","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Graph Theory 1"},{"slug":"l03-01-graphs","title":"Graphs","description":"","date":"","thumbnail":"/build/967a40bb8f52cb4e2ba5e92214773160.png","thumbnailOptimized":"/build/967a40bb8f52cb4e2ba5e92214773160.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l03-02-strong-weak-ties","title":"Strong and Weak Ties","description":"","date":"","thumbnail":"/build/ca8cf7fd449d95329a6482e7c5663568.png","thumbnailOptimized":"/build/ca8cf7fd449d95329a6482e7c5663568.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Graph Theory 2"},{"slug":"l04-01-homophily","title":"Homophily","description":"","date":"","thumbnail":"/build/c2d78afac7a8f5c0a921d74dc173a647.png","thumbnailOptimized":"/build/c2d78afac7a8f5c0a921d74dc173a647.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l04-02-weighted-graphs","title":"Weighted Graphs","description":"","date":"","thumbnail":"/build/89abe19f81fbf303bd67dbdff22715f2.png","thumbnailOptimized":"/build/89abe19f81fbf303bd67dbdff22715f2.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l04-03-structural-balance","title":"Structural Balance","description":"","date":"","thumbnail":"/build/e8165665e7da5ff6c9050aa529f882e5.png","thumbnailOptimized":"/build/e8165665e7da5ff6c9050aa529f882e5.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Production Networks"},{"slug":"l05-01-production-networks","title":"Production Networks","description":"","date":"","thumbnail":"/build/7b92ed8d684202cdc6a3ee91cdc9e32b.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"ABM 1"},{"slug":"l06-01-abm-concepts","title":"Agent Based Models","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l06-02-schelling-agents","title":"Schelling Model with Agents.jl","description":"","date":"","thumbnail":"/build/df6a6b05f3de1e22494ef3ccc0e47c9f.png","thumbnailOptimized":"/build/df6a6b05f3de1e22494ef3ccc0e47c9f.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"ABM 2"},{"slug":"l07-01-abm-money","title":"Agent Based Models Review/Practice","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l07-02-abm-paper-virality","title":"Academic Paper Virality: An Agent-Based Model","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Game Theory 1"},{"slug":"l08-01-game-theory-intro","title":"Game Theory 1","description":"","date":"","thumbnail":"/build/514111f16ff750b99f83913e8f7cef48.png","thumbnailOptimized":"/build/514111f16ff750b99f83913e8f7cef48.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l08-02-network-traffic","title":"Network Traffic with Game Theory","description":"","date":"","thumbnail":"/build/424d6f26a2e0b40ca12376f2698b2418.png","thumbnailOptimized":"/build/424d6f26a2e0b40ca12376f2698b2418.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Game Theory 2"},{"slug":"l09-01-mixed-strategies","title":"More Game Theory","description":"","date":"","thumbnail":"/build/c78b1360cc127c6ff833e0a98f9de844.png","thumbnailOptimized":"/build/c78b1360cc127c6ff833e0a98f9de844.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l09-03-auctions","title":"Auctions","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l09-04-game-theory-lab","title":"Game Theory Lab: Data Science Applications","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Agents 1"},{"slug":"l-a1-01-from-rule-based-to-learning-agents","title":"From Rule-Based to Learning Agents","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l-a1-02-rag-pattern-augmented-knowledge","title":"Retrieval-Augmented Generation: Augmenting AI with External Knowledge","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l-a1-03-multi-agent-conversations","title":"Multi-Agent Conversations and Emergent Collaboration","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Agents 2"},{"slug":"l-a2-01-function-calling-and-tools","title":"Function Calling and Tool Use: From Talk to Action","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l-a2-02-type-safe-agents-pydantic-patterns","title":"Type-Safe Agent Development with PydanticAI Patterns","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"l-a02-03-evaluations","title":"Evaluating AI Systems: Testing Agents at Scale","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2}]}}},"actionData":null,"errors":null},"future":{"unstable_dev":false,"unstable_postcss":false,"unstable_tailwind":false,"v2_errorBoundary":true,"v2_headers":true,"v2_meta":true,"v2_normalizeFormMethod":true,"v2_routeConvention":true}};</script><script type="module" async="">import "/build/manifest-06410F0D.js";
import * as route0 from "/build/root-ZJZ4LRPY.js";
import * as route1 from "/build/routes/$-23AHH5XS.js";
window.__remixRouteModules = {"root":route0,"routes/$":route1};

import("/build/entry.client-UNPC4GT3.js");</script></body></html>